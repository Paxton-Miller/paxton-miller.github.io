<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>MinIO åˆ†å¸ƒå¼éƒ¨ç½²ï¼ˆKubernetesï¼‰</title>
    <link href="/2025/09/05/MinIO-%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2%EF%BC%88Kubernetes%EF%BC%89/"/>
    <url>/2025/09/05/MinIO-%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2%EF%BC%88Kubernetes%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="ğŸ“‹-ç›®å½•"><a href="#ğŸ“‹-ç›®å½•" class="headerlink" title="ğŸ“‹ ç›®å½•"></a>ğŸ“‹ ç›®å½•</h2><ul><li><a href="#%E9%83%A8%E7%BD%B2%E5%89%8D%E5%87%86%E5%A4%87">éƒ¨ç½²å‰å‡†å¤‡</a></li><li><a href="#kubernetes-%E9%83%A8%E7%BD%B2%E6%9E%B6%E6%9E%84">Kubernetes éƒ¨ç½²æ¶æ„</a></li><li><a href="#yaml-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3">YAML é…ç½®æ–‡ä»¶è¯¦è§£</a></li><li><a href="#%E9%83%A8%E7%BD%B2%E6%AD%A5%E9%AA%A4">éƒ¨ç½²æ­¥éª¤</a></li><li><a href="#docker-vs-kubernetes-%E5%AF%B9%E6%AF%94">Docker vs Kubernetes å¯¹æ¯”</a></li><li><a href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹</a></li><li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">å‚è€ƒèµ„æ–™</a></li></ul><h2 id="éƒ¨ç½²å‰å‡†å¤‡"><a href="#éƒ¨ç½²å‰å‡†å¤‡" class="headerlink" title="éƒ¨ç½²å‰å‡†å¤‡"></a>éƒ¨ç½²å‰å‡†å¤‡</h2><h3 id="æ£€æŸ¥å­˜å‚¨ç±»"><a href="#æ£€æŸ¥å­˜å‚¨ç±»" class="headerlink" title="æ£€æŸ¥å­˜å‚¨ç±»"></a>æ£€æŸ¥å­˜å‚¨ç±»</h3><p>åœ¨å¼€å§‹éƒ¨ç½²ä¹‹å‰ï¼Œç¡®ä¿ä½ çš„ Kubernetes é›†ç¾¤æœ‰å¯ç”¨çš„å­˜å‚¨ç±»ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">kubectl get storageclass<br></code></pre></td></tr></table></figure><blockquote><p>âš ï¸ <strong>é‡è¦</strong>ï¼šå¦‚æœæ²¡æœ‰é»˜è®¤çš„å­˜å‚¨ç±»ï¼ŒPVC å°†æ— æ³•ç»‘å®šï¼Œå¯¼è‡´ Pod å¯åŠ¨å¤±è´¥</p></blockquote><h3 id="ç³»ç»Ÿè¦æ±‚"><a href="#ç³»ç»Ÿè¦æ±‚" class="headerlink" title="ç³»ç»Ÿè¦æ±‚"></a>ç³»ç»Ÿè¦æ±‚</h3><ul><li>Kubernetes é›†ç¾¤ï¼ˆå»ºè®® 1.20+ï¼‰</li><li>å¯ç”¨çš„å­˜å‚¨ç±»ï¼ˆå¦‚ NFSã€Ceph ç­‰ï¼‰</li><li>è‡³å°‘ 4 ä¸ªèŠ‚ç‚¹ä»¥è·å¾—æœ€ä½³æ€§èƒ½</li><li>è¶³å¤Ÿçš„å­˜å‚¨ç©ºé—´ï¼ˆå»ºè®®æ¯ä¸ªèŠ‚ç‚¹ 5GB+ï¼‰</li></ul><h2 id="Kubernetes-éƒ¨ç½²æ¶æ„"><a href="#Kubernetes-éƒ¨ç½²æ¶æ„" class="headerlink" title="Kubernetes éƒ¨ç½²æ¶æ„"></a>Kubernetes éƒ¨ç½²æ¶æ„</h2><h3 id="ç»„ä»¶è¯´æ˜"><a href="#ç»„ä»¶è¯´æ˜" class="headerlink" title="ç»„ä»¶è¯´æ˜"></a>ç»„ä»¶è¯´æ˜</h3><table><thead><tr><th>ç»„ä»¶</th><th>ä½œç”¨</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>StatefulSet</strong></td><td>ç®¡ç†æœ‰çŠ¶æ€ Pod</td><td>å›ºå®šç½‘ç»œèº«ä»½ã€æœ‰åºéƒ¨ç½²</td></tr><tr><td><strong>Headless Service</strong></td><td>Pod é—´æœåŠ¡å‘ç°</td><td>æ—  ClusterIPï¼Œæä¾› DNS è§£æ</td></tr><tr><td><strong>NodePort Service</strong></td><td>å¯¹å¤–æš´éœ²æœåŠ¡</td><td>é€šè¿‡èŠ‚ç‚¹ç«¯å£è®¿é—®</td></tr><tr><td><strong>PVC</strong></td><td>æŒä¹…åŒ–å­˜å‚¨</td><td>è‡ªåŠ¨ç»‘å®šï¼Œæ•°æ®æŒä¹…åŒ–</td></tr></tbody></table><h2 id="YAML-é…ç½®æ–‡ä»¶è¯¦è§£"><a href="#YAML-é…ç½®æ–‡ä»¶è¯¦è§£" class="headerlink" title="YAML é…ç½®æ–‡ä»¶è¯¦è§£"></a>YAML é…ç½®æ–‡ä»¶è¯¦è§£</h2><h3 id="1ï¸âƒ£-Headless-Service"><a href="#1ï¸âƒ£-Headless-Service" class="headerlink" title="1ï¸âƒ£ Headless Service"></a>1ï¸âƒ£ Headless Service</h3><p><strong>ä½œç”¨</strong>ï¼šä¸º StatefulSet æä¾›å›ºå®šåŸŸåè§£æï¼Œå®ç° Pod é—´æœåŠ¡å‘ç°</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">minio-hl-svc</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">satellite-micro</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">clusterIP:</span> <span class="hljs-string">None</span>   <span class="hljs-comment"># å…³é”®ï¼šHeadless Service</span><br>  <span class="hljs-attr">publishNotReadyAddresses:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">minio</span><br>  <span class="hljs-attr">ports:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">api</span><br>      <span class="hljs-attr">port:</span> <span class="hljs-number">9000</span><br>      <span class="hljs-attr">targetPort:</span> <span class="hljs-number">9000</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">console</span><br>      <span class="hljs-attr">port:</span> <span class="hljs-number">9001</span><br>      <span class="hljs-attr">targetPort:</span> <span class="hljs-number">9001</span><br></code></pre></td></tr></table></figure><p><strong>å…³é”®é…ç½®è¯´æ˜</strong>ï¼š</p><ul><li><code>clusterIP: None</code>ï¼šåˆ›å»º Headless Service</li><li><code>publishNotReadyAddresses: true</code>ï¼šå³ä½¿ Pod æœªå°±ç»ªä¹Ÿå‘å¸ƒåœ°å€</li></ul><h3 id="2ï¸âƒ£-NodePort-Service"><a href="#2ï¸âƒ£-NodePort-Service" class="headerlink" title="2ï¸âƒ£ NodePort Service"></a>2ï¸âƒ£ NodePort Service</h3><p><strong>ä½œç”¨</strong>ï¼šå¯¹å¤–æš´éœ² MinIO æœåŠ¡ï¼Œæä¾›å¤–éƒ¨è®¿é—®å…¥å£</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">minio-svc</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">satellite-micro</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">NodePort</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">minio</span><br>  <span class="hljs-attr">ports:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">api</span><br>      <span class="hljs-attr">port:</span> <span class="hljs-number">9000</span><br>      <span class="hljs-attr">targetPort:</span> <span class="hljs-number">9000</span><br>      <span class="hljs-attr">nodePort:</span> <span class="hljs-number">30900</span>   <span class="hljs-comment"># è‡ªå®šä¹‰èŠ‚ç‚¹ç«¯å£</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">console</span><br>      <span class="hljs-attr">port:</span> <span class="hljs-number">9001</span><br>      <span class="hljs-attr">targetPort:</span> <span class="hljs-number">9001</span><br>      <span class="hljs-attr">nodePort:</span> <span class="hljs-number">30901</span>   <span class="hljs-comment"># è‡ªå®šä¹‰èŠ‚ç‚¹ç«¯å£</span><br></code></pre></td></tr></table></figure><p><strong>ç«¯å£æ˜ å°„</strong>ï¼š</p><ul><li><code>30900</code>ï¼šMinIO API æ¥å£</li><li><code>30901</code>ï¼šMinIO ç®¡ç†æ§åˆ¶å°</li></ul><h3 id="3ï¸âƒ£-StatefulSet"><a href="#3ï¸âƒ£-StatefulSet" class="headerlink" title="3ï¸âƒ£ StatefulSet"></a>3ï¸âƒ£ StatefulSet</h3><p><strong>ä½œç”¨</strong>ï¼šç®¡ç† MinIO Pod å’Œ PVCï¼Œç¡®ä¿æœ‰çŠ¶æ€æœåŠ¡çš„ç¨³å®šæ€§</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">StatefulSet</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">minio</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">satellite-micro</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">serviceName:</span> <span class="hljs-string">minio-hl-svc</span><br>  <span class="hljs-attr">replicas:</span> <span class="hljs-number">4</span>  <span class="hljs-comment"># å››ä¸ªèŠ‚ç‚¹</span><br>  <span class="hljs-attr">podManagementPolicy:</span> <span class="hljs-string">Parallel</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">matchLabels:</span><br>      <span class="hljs-attr">app:</span> <span class="hljs-string">minio</span><br>  <span class="hljs-attr">template:</span><br>    <span class="hljs-attr">metadata:</span><br>      <span class="hljs-attr">labels:</span><br>        <span class="hljs-attr">app:</span> <span class="hljs-string">minio</span><br>    <span class="hljs-attr">spec:</span><br>      <span class="hljs-attr">securityContext:</span><br>        <span class="hljs-attr">fsGroup:</span> <span class="hljs-number">1000</span><br>      <span class="hljs-attr">affinity:</span><br>        <span class="hljs-attr">podAntiAffinity:</span>   <span class="hljs-comment"># å°½é‡æŠŠ Pod åˆ†æ•£åˆ°ä¸åŒèŠ‚ç‚¹</span><br>          <span class="hljs-attr">preferredDuringSchedulingIgnoredDuringExecution:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-attr">weight:</span> <span class="hljs-number">100</span><br>              <span class="hljs-attr">podAffinityTerm:</span><br>                <span class="hljs-attr">labelSelector:</span><br>                  <span class="hljs-attr">matchExpressions:</span><br>                    <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">app</span><br>                      <span class="hljs-attr">operator:</span> <span class="hljs-string">In</span><br>                      <span class="hljs-attr">values:</span> [<span class="hljs-string">&quot;minio&quot;</span>]<br>                <span class="hljs-attr">topologyKey:</span> <span class="hljs-string">kubernetes.io/hostname</span><br>      <span class="hljs-attr">containers:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">minio</span><br>          <span class="hljs-attr">image:</span> <span class="hljs-number">223.2</span><span class="hljs-number">.44</span><span class="hljs-number">.251</span><span class="hljs-string">/satellite/minio:latest</span><br>          <span class="hljs-attr">imagePullPolicy:</span> <span class="hljs-string">IfNotPresent</span><br>          <span class="hljs-attr">args:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">server</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">--address=:9000</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">--console-address=:9001</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">http://minio-&#123;0...3&#125;.minio-hl-svc.satellite-micro.svc.cluster.local:9000/data</span><br>          <span class="hljs-attr">env:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">MINIO_ROOT_USER</span><br>              <span class="hljs-attr">value:</span> <span class="hljs-string">&quot;minioadmin&quot;</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">MINIO_ROOT_PASSWORD</span><br>              <span class="hljs-attr">value:</span> <span class="hljs-string">&quot;minioadmin&quot;</span><br>          <span class="hljs-attr">ports:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">api</span><br>              <span class="hljs-attr">containerPort:</span> <span class="hljs-number">9000</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">console</span><br>              <span class="hljs-attr">containerPort:</span> <span class="hljs-number">9001</span><br>          <span class="hljs-attr">volumeMounts:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">data</span><br>              <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/data</span><br>          <span class="hljs-attr">readinessProbe:</span><br>            <span class="hljs-attr">httpGet:</span><br>              <span class="hljs-attr">path:</span> <span class="hljs-string">/minio/health/ready</span><br>              <span class="hljs-attr">port:</span> <span class="hljs-number">9000</span><br>            <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">20</span><br>            <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">10</span><br>          <span class="hljs-attr">livenessProbe:</span><br>            <span class="hljs-attr">httpGet:</span><br>              <span class="hljs-attr">path:</span> <span class="hljs-string">/minio/health/live</span><br>              <span class="hljs-attr">port:</span> <span class="hljs-number">9000</span><br>            <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">120</span><br>            <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">20</span><br>  <span class="hljs-attr">volumeClaimTemplates:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">metadata:</span><br>        <span class="hljs-attr">name:</span> <span class="hljs-string">data</span><br>      <span class="hljs-attr">spec:</span><br>        <span class="hljs-attr">accessModes:</span> [<span class="hljs-string">&quot;ReadWriteOnce&quot;</span>]<br>        <span class="hljs-attr">storageClassName:</span> <span class="hljs-string">nfs-client</span>   <span class="hljs-comment"># ä½¿ç”¨ä½ çš„å­˜å‚¨ç±»</span><br>        <span class="hljs-attr">resources:</span><br>          <span class="hljs-attr">requests:</span><br>            <span class="hljs-attr">storage:</span> <span class="hljs-string">5Gi</span><br></code></pre></td></tr></table></figure><h3 id="å…³é”®é…ç½®è§£æ"><a href="#å…³é”®é…ç½®è§£æ" class="headerlink" title="å…³é”®é…ç½®è§£æ"></a>å…³é”®é…ç½®è§£æ</h3><h4 id="ç½‘ç»œé…ç½®"><a href="#ç½‘ç»œé…ç½®" class="headerlink" title="ç½‘ç»œé…ç½®"></a>ç½‘ç»œé…ç½®</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># åˆ†å¸ƒå¼èŠ‚ç‚¹åœ°å€ï¼ˆ0-3 é¡ºåºä¸è¦éšæ„æ”¹ï¼‰</span><br><span class="hljs-string">http://minio-&#123;0...3&#125;.minio-hl-svc.satellite-micro.svc.cluster.local:9000/data</span><br></code></pre></td></tr></table></figure><h4 id="å¥åº·æ£€æŸ¥"><a href="#å¥åº·æ£€æŸ¥" class="headerlink" title="å¥åº·æ£€æŸ¥"></a>å¥åº·æ£€æŸ¥</h4><ul><li><strong>å°±ç»ªæ¢é’ˆ</strong>ï¼šæ£€æŸ¥æœåŠ¡æ˜¯å¦å‡†å¤‡å¥½æ¥æ”¶æµé‡</li><li><strong>å­˜æ´»æ¢é’ˆ</strong>ï¼šæ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ</li></ul><h4 id="å­˜å‚¨é…ç½®"><a href="#å­˜å‚¨é…ç½®" class="headerlink" title="å­˜å‚¨é…ç½®"></a>å­˜å‚¨é…ç½®</h4><ul><li><strong>PVC æ¨¡æ¿</strong>ï¼šè‡ªåŠ¨ä¸ºæ¯ä¸ª Pod åˆ›å»ºç‹¬ç«‹çš„å­˜å‚¨å·</li><li><strong>å­˜å‚¨ç±»</strong>ï¼šæ ¹æ®ä½ çš„é›†ç¾¤ç¯å¢ƒé€‰æ‹©åˆé€‚çš„å­˜å‚¨ç±»</li></ul><h2 id="éƒ¨ç½²æ­¥éª¤"><a href="#éƒ¨ç½²æ­¥éª¤" class="headerlink" title="éƒ¨ç½²æ­¥éª¤"></a>éƒ¨ç½²æ­¥éª¤</h2><h3 id="1-åˆ›å»ºé…ç½®æ–‡ä»¶"><a href="#1-åˆ›å»ºé…ç½®æ–‡ä»¶" class="headerlink" title="1. åˆ›å»ºé…ç½®æ–‡ä»¶"></a>1. åˆ›å»ºé…ç½®æ–‡ä»¶</h3><p>å°†ä¸Šè¿° YAML å†…å®¹åˆ†åˆ«ä¿å­˜ä¸ºï¼š</p><ul><li><code>01-minio-headless-svc.yaml</code></li><li><code>02-minio-svc.yaml</code></li><li><code>03-minio-statefulset.yaml</code></li></ul><h3 id="2-æŒ‰é¡ºåºéƒ¨ç½²"><a href="#2-æŒ‰é¡ºåºéƒ¨ç½²" class="headerlink" title="2. æŒ‰é¡ºåºéƒ¨ç½²"></a>2. æŒ‰é¡ºåºéƒ¨ç½²</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. åˆ›å»º Headless Service</span><br>kubectl apply -f 01-minio-headless-svc.yaml<br><br><span class="hljs-comment"># 2. åˆ›å»º NodePort Service</span><br>kubectl apply -f 02-minio-svc.yaml<br><br><span class="hljs-comment"># 3. åˆ›å»º StatefulSet</span><br>kubectl apply -f 03-minio-statefulset.yaml<br></code></pre></td></tr></table></figure><h3 id="3-éªŒè¯éƒ¨ç½²"><a href="#3-éªŒè¯éƒ¨ç½²" class="headerlink" title="3. éªŒè¯éƒ¨ç½²"></a>3. éªŒè¯éƒ¨ç½²</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ£€æŸ¥ Pod çŠ¶æ€</span><br>kubectl get pods -n satellite-micro<br><br><span class="hljs-comment"># æ£€æŸ¥ Service</span><br>kubectl get svc -n satellite-micro<br><br><span class="hljs-comment"># æ£€æŸ¥ PVC</span><br>kubectl get pvc -n satellite-micro<br><br><span class="hljs-comment"># æŸ¥çœ‹ Pod æ—¥å¿—</span><br>kubectl logs -f minio-0 -n satellite-micro<br></code></pre></td></tr></table></figure><h3 id="4-è®¿é—®æœåŠ¡"><a href="#4-è®¿é—®æœåŠ¡" class="headerlink" title="4. è®¿é—®æœåŠ¡"></a>4. è®¿é—®æœåŠ¡</h3><p>éƒ¨ç½²å®Œæˆåï¼Œé€šè¿‡ä»¥ä¸‹æ–¹å¼è®¿é—®ï¼š</p><ul><li><strong>API æ¥å£</strong>ï¼š<code>http://your-node-ip:30900</code></li><li><strong>ç®¡ç†æ§åˆ¶å°</strong>ï¼š<code>http://your-node-ip:30901</code></li></ul><h2 id="Docker-vs-Kubernetes-å¯¹æ¯”"><a href="#Docker-vs-Kubernetes-å¯¹æ¯”" class="headerlink" title="Docker vs Kubernetes å¯¹æ¯”"></a>Docker vs Kubernetes å¯¹æ¯”</h2><h3 id="1ï¸âƒ£-Docker-åˆ†å¸ƒå¼æ¨¡å¼"><a href="#1ï¸âƒ£-Docker-åˆ†å¸ƒå¼æ¨¡å¼" class="headerlink" title="1ï¸âƒ£ Docker åˆ†å¸ƒå¼æ¨¡å¼"></a>1ï¸âƒ£ Docker åˆ†å¸ƒå¼æ¨¡å¼</h3><p><strong>ç‰¹ç‚¹</strong>ï¼šéœ€è¦æ‰‹åŠ¨é…ç½®ç½‘ç»œå’Œå­˜å‚¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># éœ€è¦æ‰‹åŠ¨é…ç½® hosts æ–‡ä»¶</span><br>minio-0 10.0.0.1<br>minio-1 10.0.0.2<br>minio-2 10.0.0.3<br>minio-3 10.0.0.4<br><br><span class="hljs-comment"># å¯åŠ¨å‘½ä»¤</span><br>minio server http://minio-0/data http://minio-1/data http://minio-2/data http://minio-3/data<br></code></pre></td></tr></table></figure><p><strong>ç¼ºç‚¹</strong>ï¼š</p><ul><li>éœ€è¦æ‰‹åŠ¨ç®¡ç†ç½‘ç»œé…ç½®</li><li>å­˜å‚¨ç®¡ç†å¤æ‚</li><li>æ‰©ç¼©å®¹å›°éš¾</li><li>ç¼ºä¹è‡ªåŠ¨æ•…éšœæ¢å¤</li></ul><h3 id="2ï¸âƒ£-Kubernetes-StatefulSet-æ¨¡å¼"><a href="#2ï¸âƒ£-Kubernetes-StatefulSet-æ¨¡å¼" class="headerlink" title="2ï¸âƒ£ Kubernetes StatefulSet æ¨¡å¼"></a>2ï¸âƒ£ Kubernetes StatefulSet æ¨¡å¼</h3><p><strong>ç‰¹ç‚¹</strong>ï¼šè‡ªåŠ¨åŒ–ç®¡ç†ï¼Œé«˜å¯ç”¨æ€§</p><h4 id="è‡ªåŠ¨æœåŠ¡å‘ç°"><a href="#è‡ªåŠ¨æœåŠ¡å‘ç°" class="headerlink" title="è‡ªåŠ¨æœåŠ¡å‘ç°"></a>è‡ªåŠ¨æœåŠ¡å‘ç°</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># Pod å›ºå®šå‘½å</span><br><span class="hljs-string">minio-0,</span> <span class="hljs-string">minio-1,</span> <span class="hljs-string">minio-2,</span> <span class="hljs-string">minio-3</span><br><br><span class="hljs-comment"># DNS è‡ªåŠ¨è§£æ</span><br><span class="hljs-string">minio-0.minio-hl-svc.satellite-micro.svc.cluster.local</span><br><span class="hljs-string">minio-1.minio-hl-svc.satellite-micro.svc.cluster.local</span><br><span class="hljs-comment"># ...</span><br></code></pre></td></tr></table></figure><h4 id="ä¼˜åŠ¿å¯¹æ¯”"><a href="#ä¼˜åŠ¿å¯¹æ¯”" class="headerlink" title="ä¼˜åŠ¿å¯¹æ¯”"></a>ä¼˜åŠ¿å¯¹æ¯”</h4><table><thead><tr><th>ç‰¹æ€§</th><th>Docker</th><th>Kubernetes</th></tr></thead><tbody><tr><td><strong>æœåŠ¡å‘ç°</strong></td><td>æ‰‹åŠ¨é…ç½® hosts</td><td>DNS è‡ªåŠ¨è§£æ</td></tr><tr><td><strong>å­˜å‚¨ç®¡ç†</strong></td><td>æ‰‹åŠ¨æŒ‚è½½</td><td>PVC è‡ªåŠ¨ç»‘å®š</td></tr><tr><td><strong>æ‰©ç¼©å®¹</strong></td><td>å¤æ‚</td><td>ç®€å•ï¼ˆä¿®æ”¹ replicasï¼‰</td></tr><tr><td><strong>æ•…éšœæ¢å¤</strong></td><td>æ‰‹åŠ¨å¤„ç†</td><td>è‡ªåŠ¨é‡å¯</td></tr><tr><td><strong>è´Ÿè½½å‡è¡¡</strong></td><td>éœ€è¦ Nginx</td><td>Service è‡ªåŠ¨å¤„ç†</td></tr><tr><td><strong>ç›‘æ§</strong></td><td>éœ€è¦é¢å¤–å·¥å…·</td><td>åŸç”Ÿæ”¯æŒ</td></tr></tbody></table><h2 id="å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹"><a href="#å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹" class="headerlink" title="å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹"></a>å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹</h2><h3 id="âš ï¸-é‡è¦æé†’"><a href="#âš ï¸-é‡è¦æé†’" class="headerlink" title="âš ï¸ é‡è¦æé†’"></a>âš ï¸ é‡è¦æé†’</h3><ol><li><strong>èŠ‚ç‚¹é¡ºåº</strong>ï¼š<code>minio-&#123;0...3&#125;</code> ä¸­çš„ 0-3 é¡ºåºä¸è¦éšæ„æ”¹åŠ¨</li><li><strong>å­˜å‚¨ç±»</strong>ï¼šç¡®ä¿ <code>storageClassName</code> ä¸ä½ çš„é›†ç¾¤ç¯å¢ƒåŒ¹é…</li><li><strong>å‘½åç©ºé—´</strong>ï¼šæ‰€æœ‰èµ„æºå¿…é¡»åœ¨åŒä¸€ä¸ªå‘½åç©ºé—´ä¸­</li><li><strong>ç½‘ç»œç­–ç•¥</strong>ï¼šç¡®ä¿ Pod é—´ç½‘ç»œé€šä¿¡æ­£å¸¸</li></ol><h3 id="ğŸ”§-æ•…éšœæ’æŸ¥"><a href="#ğŸ”§-æ•…éšœæ’æŸ¥" class="headerlink" title="ğŸ”§ æ•…éšœæ’æŸ¥"></a>ğŸ”§ æ•…éšœæ’æŸ¥</h3><h4 id="Pod-å¯åŠ¨å¤±è´¥"><a href="#Pod-å¯åŠ¨å¤±è´¥" class="headerlink" title="Pod å¯åŠ¨å¤±è´¥"></a>Pod å¯åŠ¨å¤±è´¥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ£€æŸ¥ Pod çŠ¶æ€</span><br>kubectl describe pod minio-0 -n satellite-micro<br><br><span class="hljs-comment"># æŸ¥çœ‹äº‹ä»¶</span><br>kubectl get events -n satellite-micro --sort-by=<span class="hljs-string">&#x27;.lastTimestamp&#x27;</span><br></code></pre></td></tr></table></figure><h4 id="PVC-ç»‘å®šå¤±è´¥"><a href="#PVC-ç»‘å®šå¤±è´¥" class="headerlink" title="PVC ç»‘å®šå¤±è´¥"></a>PVC ç»‘å®šå¤±è´¥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ£€æŸ¥å­˜å‚¨ç±»</span><br>kubectl get storageclass<br><br><span class="hljs-comment"># æ£€æŸ¥ PVC çŠ¶æ€</span><br>kubectl describe pvc data-minio-0 -n satellite-micro<br></code></pre></td></tr></table></figure><h4 id="ç½‘ç»œè¿æ¥é—®é¢˜"><a href="#ç½‘ç»œè¿æ¥é—®é¢˜" class="headerlink" title="ç½‘ç»œè¿æ¥é—®é¢˜"></a>ç½‘ç»œè¿æ¥é—®é¢˜</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æµ‹è¯• Pod é—´ç½‘ç»œ</span><br>kubectl <span class="hljs-built_in">exec</span> -it minio-0 -n satellite-micro -- nslookup minio-1.minio-hl-svc.satellite-micro.svc.cluster.local<br></code></pre></td></tr></table></figure><h3 id="ğŸ“Š-æ€§èƒ½ä¼˜åŒ–å»ºè®®"><a href="#ğŸ“Š-æ€§èƒ½ä¼˜åŒ–å»ºè®®" class="headerlink" title="ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®"></a>ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3><ol><li><strong>èŠ‚ç‚¹åˆ†å¸ƒ</strong>ï¼šä½¿ç”¨ <code>podAntiAffinity</code> ç¡®ä¿ Pod åˆ†å¸ƒåœ¨ä¸åŒèŠ‚ç‚¹</li><li><strong>å­˜å‚¨ä¼˜åŒ–</strong>ï¼šæ ¹æ® I&#x2F;O éœ€æ±‚é€‰æ‹©åˆé€‚çš„å­˜å‚¨ç±»</li><li><strong>èµ„æºé™åˆ¶</strong>ï¼šä¸ºå®¹å™¨è®¾ç½®åˆé€‚çš„ CPU å’Œå†…å­˜é™åˆ¶</li><li><strong>ç½‘ç»œä¼˜åŒ–</strong>ï¼šä½¿ç”¨ CNI æ’ä»¶ä¼˜åŒ–ç½‘ç»œæ€§èƒ½</li></ol><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://www.cnblogs.com/Leonardo-li/p/18743772">k8sç¦»çº¿éƒ¨ç½²minioé›†ç¾¤</a></li><li><a href="https://cloud.tencent.com/developer/article/2246499">kuberneteså®‰è£…minioé›†ç¾¤</a></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>MinIO</tag>
      
      <tag>åˆ†å¸ƒå¼</tag>
      
      <tag>Kubernetes</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MinIO åˆ†å¸ƒå¼éƒ¨ç½²ï¼ˆDockerï¼‰</title>
    <link href="/2025/09/05/MinIO-%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2%EF%BC%88Docker%EF%BC%89/"/>
    <url>/2025/09/05/MinIO-%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2%EF%BC%88Docker%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="ğŸ“‹-ç›®å½•"><a href="#ğŸ“‹-ç›®å½•" class="headerlink" title="ğŸ“‹ ç›®å½•"></a>ğŸ“‹ ç›®å½•</h2><ul><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2">ä¸ºä»€ä¹ˆé€‰æ‹©åˆ†å¸ƒå¼éƒ¨ç½²ï¼Ÿ</a></li><li><a href="#%E9%83%A8%E7%BD%B2%E5%89%8D%E5%87%86%E5%A4%87">éƒ¨ç½²å‰å‡†å¤‡</a></li><li><a href="#minio-%E5%88%86%E5%B8%83%E5%BC%8F%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2">MinIO åˆ†å¸ƒå¼å®¹å™¨åŒ–éƒ¨ç½²</a></li><li><a href="#nginx-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E9%85%8D%E7%BD%AE">Nginx è´Ÿè½½å‡è¡¡é…ç½®</a></li><li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">å‚è€ƒèµ„æ–™</a></li></ul><h2 id="ä¸ºä»€ä¹ˆé€‰æ‹©åˆ†å¸ƒå¼éƒ¨ç½²ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆé€‰æ‹©åˆ†å¸ƒå¼éƒ¨ç½²ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰æ‹©åˆ†å¸ƒå¼éƒ¨ç½²ï¼Ÿ"></a>ä¸ºä»€ä¹ˆé€‰æ‹©åˆ†å¸ƒå¼éƒ¨ç½²ï¼Ÿ</h2><p>MinIO å•ä½“åº”ç”¨å¹¶ä¸èƒ½å‘æŒ¥ MinIO è‡ªå¸¦åˆ†å¸ƒå¼å­˜å‚¨çš„ä¼˜åŠ¿ï¼š</p><ul><li>âœ… <strong>æ•°æ®å®¹ç¾</strong>ï¼šå¤šèŠ‚ç‚¹å¤‡ä»½ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±</li><li>âœ… <strong>è´Ÿè½½å‡è¡¡</strong>ï¼šåˆ†æ•£è¯·æ±‚å‹åŠ›ï¼Œæé«˜æ€§èƒ½</li><li>âœ… <strong>é«˜å¯ç”¨æ€§</strong>ï¼šé¿å…å•ç‚¹æ•…éšœï¼Œç¡®ä¿æœåŠ¡ç¨³å®šè¿è¡Œ</li></ul><blockquote><p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šå•èŠ‚ç‚¹éƒ¨ç½²éš¾å…ä¼šå‡ºç°å•ç‚¹æ•…éšœï¼Œæ— æ³•åšåˆ°æœåŠ¡çš„é«˜å¯ç”¨</p></blockquote><h2 id="éƒ¨ç½²å‰å‡†å¤‡"><a href="#éƒ¨ç½²å‰å‡†å¤‡" class="headerlink" title="éƒ¨ç½²å‰å‡†å¤‡"></a>éƒ¨ç½²å‰å‡†å¤‡</h2><h3 id="ç³»ç»Ÿè¦æ±‚"><a href="#ç³»ç»Ÿè¦æ±‚" class="headerlink" title="ç³»ç»Ÿè¦æ±‚"></a>ç³»ç»Ÿè¦æ±‚</h3><ul><li>MinIO å®˜æ–¹å»ºè®®é‡‡ç”¨ <strong>Kubernetes</strong> éƒ¨ç½²</li><li>ç¡®ä¿æ‰€æœ‰èŠ‚ç‚¹çš„ <strong>MinIO ç‰ˆæœ¬ä¸€è‡´</strong></li><li>å»ºè®®ä½¿ç”¨ 4 ä¸ªæˆ–æ›´å¤šèŠ‚ç‚¹ä»¥è·å¾—æœ€ä½³æ€§èƒ½</li></ul><h3 id="ç½‘ç»œé…ç½®"><a href="#ç½‘ç»œé…ç½®" class="headerlink" title="ç½‘ç»œé…ç½®"></a>ç½‘ç»œé…ç½®</h3><h4 id="1-è·å–èŠ‚ç‚¹-IP-åœ°å€"><a href="#1-è·å–èŠ‚ç‚¹-IP-åœ°å€" class="headerlink" title="1. è·å–èŠ‚ç‚¹ IP åœ°å€"></a>1. è·å–èŠ‚ç‚¹ IP åœ°å€</h4><p>åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è·å–å†…ç½‘ IPï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ip addr<br></code></pre></td></tr></table></figure><blockquote><p>ğŸ’¡ <strong>æç¤º</strong>ï¼šé˜¿é‡Œäº‘æœåŠ¡å™¨è¯·å‹¿é‡‡ç”¨å…¬ç½‘ IPï¼Œä½¿ç”¨å†…ç½‘ IP æ›´å®‰å…¨ä¸”æ€§èƒ½æ›´å¥½</p></blockquote><h4 id="2-é…ç½®ä¸»æœºåè§£æ"><a href="#2-é…ç½®ä¸»æœºåè§£æ" class="headerlink" title="2. é…ç½®ä¸»æœºåè§£æ"></a>2. é…ç½®ä¸»æœºåè§£æ</h4><p>åœ¨æ¯ä¸ªèŠ‚ç‚¹çš„ <code>/etc/hosts</code> æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">172.17.117.117 minio-1  <br>172.17.117.118 minio-2  <br>172.17.117.119 minio-3  <br>172.17.117.120 minio-4<br></code></pre></td></tr></table></figure><h4 id="3-æµ‹è¯•ç½‘ç»œè¿é€šæ€§"><a href="#3-æµ‹è¯•ç½‘ç»œè¿é€šæ€§" class="headerlink" title="3. æµ‹è¯•ç½‘ç»œè¿é€šæ€§"></a>3. æµ‹è¯•ç½‘ç»œè¿é€šæ€§</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">ping minio-1<br>ping minio-2<br>ping minio-3<br>ping minio-4<br></code></pre></td></tr></table></figure><h2 id="MinIO-åˆ†å¸ƒå¼å®¹å™¨åŒ–éƒ¨ç½²"><a href="#MinIO-åˆ†å¸ƒå¼å®¹å™¨åŒ–éƒ¨ç½²" class="headerlink" title="MinIO åˆ†å¸ƒå¼å®¹å™¨åŒ–éƒ¨ç½²"></a>MinIO åˆ†å¸ƒå¼å®¹å™¨åŒ–éƒ¨ç½²</h2><h3 id="å¯åŠ¨-MinIO-å®¹å™¨"><a href="#å¯åŠ¨-MinIO-å®¹å™¨" class="headerlink" title="å¯åŠ¨ MinIO å®¹å™¨"></a>å¯åŠ¨ MinIO å®¹å™¨</h3><p>åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run -d --name minio --net=host --restart=always --privileged=<span class="hljs-literal">true</span> -v /mnt/minio/data:/data -e MINIO_ROOT_USER=OGMS -e MINIO_ROOT_PASSWORD=ogms250410 minio/minio:latest server http://minio-&#123;1...4&#125;/data --console-address <span class="hljs-string">&quot;0.0.0.0:9101&quot;</span> --address <span class="hljs-string">&quot;0.0.0.0:9100&quot;</span><br></code></pre></td></tr></table></figure><h3 id="å‚æ•°è¯´æ˜"><a href="#å‚æ•°è¯´æ˜" class="headerlink" title="å‚æ•°è¯´æ˜"></a>å‚æ•°è¯´æ˜</h3><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>--net=host</code></td><td>å…±äº«å®¿ä¸»æœºç½‘ç»œå‘½åç©ºé—´</td></tr><tr><td><code>--restart=always</code></td><td>å®¹å™¨è‡ªåŠ¨é‡å¯</td></tr><tr><td><code>--privileged=true</code></td><td>ç»™äºˆå®¹å™¨ç‰¹æƒæ¨¡å¼</td></tr><tr><td><code>-v /mnt/minio/data:/data</code></td><td>æ•°æ®æŒä¹…åŒ–æŒ‚è½½</td></tr><tr><td><code>MINIO_ROOT_USER</code></td><td>MinIO ç®¡ç†å‘˜ç”¨æˆ·å</td></tr><tr><td><code>MINIO_ROOT_PASSWORD</code></td><td>MinIO ç®¡ç†å‘˜å¯†ç </td></tr><tr><td><code>--console-address</code></td><td>æ§åˆ¶å°è®¿é—®åœ°å€</td></tr><tr><td><code>--address</code></td><td>API è®¿é—®åœ°å€</td></tr></tbody></table><h3 id="æ£€æŸ¥å®¹å™¨çŠ¶æ€"><a href="#æ£€æŸ¥å®¹å™¨çŠ¶æ€" class="headerlink" title="æ£€æŸ¥å®¹å™¨çŠ¶æ€"></a>æ£€æŸ¥å®¹å™¨çŠ¶æ€</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker logs minio<br></code></pre></td></tr></table></figure><h2 id="Nginx-è´Ÿè½½å‡è¡¡é…ç½®"><a href="#Nginx-è´Ÿè½½å‡è¡¡é…ç½®" class="headerlink" title="Nginx è´Ÿè½½å‡è¡¡é…ç½®"></a>Nginx è´Ÿè½½å‡è¡¡é…ç½®</h2><h3 id="å¯åŠ¨-Nginx-å®¹å™¨"><a href="#å¯åŠ¨-Nginx-å®¹å™¨" class="headerlink" title="å¯åŠ¨ Nginx å®¹å™¨"></a>å¯åŠ¨ Nginx å®¹å™¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run -d --name minio_nginx --net=host -p 9000:9000 -p 9001:9001 -v /mnt/nginx/conf/nginx.conf:/etc/nginx/nginx.conf --restart=always --privileged=<span class="hljs-literal">true</span> nginx:latest<br><br><span class="hljs-comment"># æˆ–è€…ä½¿ç”¨ ARM ç‰ˆæœ¬</span><br><span class="hljs-comment"># nginx:alpine-arm</span><br></code></pre></td></tr></table></figure><h3 id="Nginx-é…ç½®æ–‡ä»¶"><a href="#Nginx-é…ç½®æ–‡ä»¶" class="headerlink" title="Nginx é…ç½®æ–‡ä»¶"></a>Nginx é…ç½®æ–‡ä»¶</h3><p>åˆ›å»º <code>/mnt/nginx/conf/nginx.conf</code> æ–‡ä»¶ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">worker_processes</span> auto;  <br><br><span class="hljs-section">events</span> &#123;  <br>    <span class="hljs-attribute">worker_connections</span> <span class="hljs-number">1024</span>;  <br>&#125;  <br><br><span class="hljs-section">http</span> &#123;  <br>    <span class="hljs-comment"># API è´Ÿè½½å‡è¡¡  </span><br>    <span class="hljs-section">upstream</span> minio_api &#123;  <br>        ip_hash;   <span class="hljs-comment"># ä½¿ç”¨ ip_hashï¼Œä¿è¯åŒä¸€ä¸ªå®¢æˆ·ç«¯å°½é‡è½åˆ°åŒä¸€èŠ‚ç‚¹ï¼Œé¿å…ä¼šè¯ä¸ä¸€è‡´  </span><br>        <span class="hljs-attribute">server</span> minio-<span class="hljs-number">1</span>:<span class="hljs-number">9100</span> max_fails=<span class="hljs-number">3</span> fail_timeout=<span class="hljs-number">30s</span>;  <br>        <span class="hljs-attribute">server</span> minio-<span class="hljs-number">2</span>:<span class="hljs-number">9100</span> max_fails=<span class="hljs-number">3</span> fail_timeout=<span class="hljs-number">30s</span>;  <br>        <span class="hljs-attribute">server</span> minio-<span class="hljs-number">3</span>:<span class="hljs-number">9100</span> max_fails=<span class="hljs-number">3</span> fail_timeout=<span class="hljs-number">30s</span>;  <br>        <span class="hljs-attribute">server</span> minio-<span class="hljs-number">4</span>:<span class="hljs-number">9100</span> max_fails=<span class="hljs-number">3</span> fail_timeout=<span class="hljs-number">30s</span>;  <br>    &#125;  <br><br>    <span class="hljs-comment"># æ§åˆ¶å°è´Ÿè½½å‡è¡¡  </span><br>    <span class="hljs-section">upstream</span> minio_console &#123;  <br>        <span class="hljs-attribute">server</span> minio-<span class="hljs-number">1</span>:<span class="hljs-number">9101</span>;  <br>        <span class="hljs-attribute">server</span> minio-<span class="hljs-number">2</span>:<span class="hljs-number">9101</span>;  <br>        <span class="hljs-attribute">server</span> minio-<span class="hljs-number">3</span>:<span class="hljs-number">9101</span>;  <br>        <span class="hljs-attribute">server</span> minio-<span class="hljs-number">4</span>:<span class="hljs-number">9101</span>;  <br>    &#125;  <br><br>    <span class="hljs-comment"># MinIO API æœåŠ¡</span><br>    <span class="hljs-section">server</span> &#123;  <br>        <span class="hljs-attribute">listen</span> <span class="hljs-number">9000</span>;  <br>        <span class="hljs-attribute">server_name</span> _;  <br><br>        <span class="hljs-attribute">client_max_body_size</span> <span class="hljs-number">0</span>;  <br>        <span class="hljs-attribute">proxy_buffering</span> <span class="hljs-literal">off</span>;  <br>        <span class="hljs-attribute">ignore_invalid_headers</span> <span class="hljs-literal">off</span>;  <br><br>        <span class="hljs-section">location</span> / &#123;  <br>            <span class="hljs-attribute">proxy_set_header</span> Host              <span class="hljs-variable">$http_host</span>;  <br>            <span class="hljs-attribute">proxy_set_header</span> X-Real-IP         <span class="hljs-variable">$remote_addr</span>;  <br>            <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For   <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;  <br>            <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-Proto <span class="hljs-variable">$scheme</span>;  <br><br>            <span class="hljs-attribute">proxy_connect_timeout</span> <span class="hljs-number">300</span>;  <br>            <span class="hljs-attribute">proxy_http_version</span> <span class="hljs-number">1</span>.<span class="hljs-number">1</span>;  <br>            <span class="hljs-attribute">chunked_transfer_encoding</span> <span class="hljs-literal">off</span>;  <br>            <span class="hljs-attribute">proxy_ignore_client_abort</span> <span class="hljs-literal">on</span>;  <br><br>            <span class="hljs-attribute">proxy_pass</span> http://minio_api;  <br>        &#125;  <br>    &#125;  <br><br>    <span class="hljs-comment"># MinIO Console æœåŠ¡</span><br>    <span class="hljs-section">server</span> &#123;  <br>        <span class="hljs-attribute">listen</span> <span class="hljs-number">9001</span>;  <br>        <span class="hljs-attribute">server_name</span> _;  <br><br>        <span class="hljs-section">location</span> / &#123;  <br>            <span class="hljs-attribute">proxy_set_header</span> Host              <span class="hljs-variable">$http_host</span>;  <br>            <span class="hljs-attribute">proxy_set_header</span> X-Real-IP         <span class="hljs-variable">$remote_addr</span>;  <br>            <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For   <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;  <br>            <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-Proto <span class="hljs-variable">$scheme</span>;  <br><br>            <span class="hljs-attribute">proxy_pass</span> http://minio_console;  <br>        &#125;  <br>    &#125;  <br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é…ç½®è¯´æ˜"><a href="#é…ç½®è¯´æ˜" class="headerlink" title="é…ç½®è¯´æ˜"></a>é…ç½®è¯´æ˜</h3><h4 id="è´Ÿè½½å‡è¡¡ç­–ç•¥"><a href="#è´Ÿè½½å‡è¡¡ç­–ç•¥" class="headerlink" title="è´Ÿè½½å‡è¡¡ç­–ç•¥"></a>è´Ÿè½½å‡è¡¡ç­–ç•¥</h4><ul><li><strong>API æœåŠ¡</strong>ï¼šä½¿ç”¨ <code>ip_hash</code> ç­–ç•¥ï¼Œç¡®ä¿åŒä¸€å®¢æˆ·ç«¯è¯·æ±‚è·¯ç”±åˆ°åŒä¸€èŠ‚ç‚¹</li><li><strong>æ§åˆ¶å°æœåŠ¡</strong>ï¼šä½¿ç”¨è½®è¯¢ç­–ç•¥ï¼Œåˆ†æ•£è®¿é—®å‹åŠ›</li></ul><h4 id="ç«¯å£æ˜ å°„"><a href="#ç«¯å£æ˜ å°„" class="headerlink" title="ç«¯å£æ˜ å°„"></a>ç«¯å£æ˜ å°„</h4><table><thead><tr><th>æœåŠ¡</th><th>ç«¯å£</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>MinIO API</td><td>9000</td><td>å¯¹è±¡å­˜å‚¨ API æ¥å£</td></tr><tr><td>MinIO Console</td><td>9001</td><td>Web ç®¡ç†æ§åˆ¶å°</td></tr></tbody></table><h2 id="ğŸ¯-éƒ¨ç½²å®Œæˆ"><a href="#ğŸ¯-éƒ¨ç½²å®Œæˆ" class="headerlink" title="ğŸ¯ éƒ¨ç½²å®Œæˆ"></a>ğŸ¯ éƒ¨ç½²å®Œæˆ</h2><p>éƒ¨ç½²å®Œæˆåï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¿é—®ï¼š</p><ul><li><strong>API æ¥å£</strong>ï¼š<code>http://your-server:9000</code></li><li><strong>ç®¡ç†æ§åˆ¶å°</strong>ï¼š<code>http://your-server:9001</code></li></ul><p>ä½¿ç”¨é…ç½®çš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•ç®¡ç†æ§åˆ¶å°ï¼Œå¼€å§‹ä½¿ç”¨ MinIO åˆ†å¸ƒå¼å­˜å‚¨æœåŠ¡ï¼</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://www.cnblogs.com/sunxun001/p/17420785.html">MinIO åˆ†å¸ƒå¼éƒ¨ç½²å®è·µ</a></li><li><a href="https://www.cnblogs.com/masonlee/p/12811784.html">MinIO é›†ç¾¤éƒ¨ç½²æŒ‡å—</a></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>MinIO</tag>
      
      <tag>Docker</tag>
      
      <tag>åˆ†å¸ƒå¼</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue Composables - ç»„åˆå¼å‡½æ•°çš„åº”ç”¨</title>
    <link href="/2025/08/09/Vue-Composables-%E7%BB%84%E5%90%88%E5%BC%8F%E5%87%BD%E6%95%B0%E7%9A%84%E5%BA%94%E7%94%A8/"/>
    <url>/2025/08/09/Vue-Composables-%E7%BB%84%E5%90%88%E5%BC%8F%E5%87%BD%E6%95%B0%E7%9A%84%E5%BA%94%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>Vue3 å¸¦æ¥æœ€å¤§çš„é©æ–°è«è¿‡äºé€‰é¡¹å¼API (<code>Composition API</code>), å…¶ä¸­ä¸€å¤§ç‰¹æ€§å°±æ˜¯<code>ç»„åˆå¼å‡½æ•°</code>ã€‚åœ¨ Vue ç”Ÿæ€ä¸­ï¼Œcomposables ä¸€èˆ¬ç¿»è¯‘æˆ â€œç»„åˆå¼å‡½æ•°â€ æˆ– â€œå¯ç»„åˆå‡½æ•°â€, æ„æ€æ˜¯æŠŠä¸€æ®µé€»è¾‘ï¼ˆé€šå¸¸æ˜¯å“åº”å¼çŠ¶æ€ã€è®¡ç®—å±æ€§ã€ä¾¦å¬å™¨ç­‰ï¼‰å°è£…æˆä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥åœ¨å¤šä¸ªç»„ä»¶ä¸­å¤ç”¨, ä¹Ÿå¯ä»¥ç”¨äºè§£è€¦è‡ƒè‚¿çš„ä¸šåŠ¡é€»è¾‘ã€‚</p><p><strong>ä½œç”¨ï¼šé€»è¾‘å¤ç”¨ã€ä»£ç ç»„ç»‡æ›´æ¸…æ™°ï¼Œä¸ä¾èµ–ç»„ä»¶ä¸Šä¸‹æ–‡</strong></p><h2 id="ä¸€ä¸ªç®€å•çš„ç»„åˆå¼å‡½æ•°æ ·ä¾‹"><a href="#ä¸€ä¸ªç®€å•çš„ç»„åˆå¼å‡½æ•°æ ·ä¾‹" class="headerlink" title="ä¸€ä¸ªç®€å•çš„ç»„åˆå¼å‡½æ•°æ ·ä¾‹"></a>ä¸€ä¸ªç®€å•çš„ç»„åˆå¼å‡½æ•°æ ·ä¾‹</h2><h3 id="åˆ›å»º-useGrid-ts-æ–‡ä»¶"><a href="#åˆ›å»º-useGrid-ts-æ–‡ä»¶" class="headerlink" title="åˆ›å»º useGrid.ts æ–‡ä»¶"></a>åˆ›å»º useGrid.ts æ–‡ä»¶</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; computed, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Grid</span> = &#123;<br>    <span class="hljs-attr">columnId</span>: <span class="hljs-built_in">number</span>,<br>    <span class="hljs-attr">rowId</span>: <span class="hljs-built_in">number</span>,<br>    <span class="hljs-attr">resolution</span>: <span class="hljs-built_in">number</span><br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useGrid</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> columnId = ref&lt;<span class="hljs-built_in">number</span>&gt;()<br>    <span class="hljs-keyword">const</span> rowId = ref&lt;<span class="hljs-built_in">number</span>&gt;()<br>    <span class="hljs-keyword">const</span> resolution = ref&lt;<span class="hljs-built_in">number</span>&gt;()<br>    <span class="hljs-keyword">const</span> selectedGrid = ref&lt;<span class="hljs-title class_">Grid</span>&gt;()<br><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getAllGrid</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>        <span class="hljs-comment">// åœ¨è¿™é‡Œå°è£…å…·ä½“çš„å‡½æ•°é€»è¾‘</span><br>        ...<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> &#123;<br>        selectedGrid,<br>        getAllGrid<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="åœ¨ä½ çš„ä»£ç ä¸­åº”ç”¨"><a href="#åœ¨ä½ çš„ä»£ç ä¸­åº”ç”¨" class="headerlink" title="åœ¨ä½ çš„ä»£ç ä¸­åº”ç”¨"></a>åœ¨ä½ çš„ä»£ç ä¸­åº”ç”¨</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        ä¸€ä¸ªç®€å•çš„ç»„åˆå¼å‡½æ•°æ ·ä¾‹ğŸš€<br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>å½“å‰é€‰ä¸­çš„æ ¼ç½‘ï¼š&#123;&#123; selectedGrid &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useGrid &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./useGrid.ts&quot;</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> &#123; selectedGrid, getAllGrid &#125; = <span class="hljs-title function_">useGrid</span>() <span class="hljs-comment">// è®°ä½è¿™ç§å†™æ³•ï¼å¯¹è±¡è§£è€¦</span></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="ç­‰åŒäºï¼š"><a href="#ç­‰åŒäºï¼š" class="headerlink" title="ç­‰åŒäºï¼š"></a>ç­‰åŒäºï¼š</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        ä¸€ä¸ªç®€å•çš„éç»„åˆå¼å‡½æ•°æ ·ä¾‹<br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>å½“å‰é€‰ä¸­çš„æ ¼ç½‘ï¼š&#123;&#123; selectedGrid &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; computed, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">type <span class="hljs-title class_">Grid</span> = &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">columnId</span>: number,</span><br><span class="language-javascript">    <span class="hljs-attr">rowId</span>: number,</span><br><span class="language-javascript">    <span class="hljs-attr">resolution</span>: number</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> columnId = ref&lt;number&gt;()</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> rowId = ref&lt;number&gt;()</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> resolution = ref&lt;number&gt;()</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> selectedGrid = ref&lt;<span class="hljs-title class_">Grid</span>&gt;()</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getAllGrid</span> = (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">    <span class="hljs-comment">// åœ¨è¿™é‡Œå°è£…å…·ä½“çš„å‡½æ•°é€»è¾‘</span></span><br><span class="language-javascript">    ...</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="ç»„åˆå¼å‡½æ•°çš„å¥½å¤„"><a href="#ç»„åˆå¼å‡½æ•°çš„å¥½å¤„" class="headerlink" title="ç»„åˆå¼å‡½æ•°çš„å¥½å¤„"></a>ç»„åˆå¼å‡½æ•°çš„å¥½å¤„</h2><p>å¤§å®¶å¯ä»¥å‘ç°ï¼Œç»„åˆå¼å‡½æ•°èƒ½å¤Ÿå°†ä½ çš„ä¸šåŠ¡é€»è¾‘ä»åŸæœ¬è‡ƒè‚¿çš„ä»£ç ä¸­æŠ½è±¡è§£æ”¾å‡ºæ¥ï¼ä»¥ä¾¿äºé€»è¾‘å¤ç”¨ï¼ŒåŒæ—¶ä»£ç ç»„ç»‡æ›´åŠ æ¸…æ™°ï¼Œä¸ä¾èµ–ç»„ä»¶ä¸Šä¸‹æ–‡</p><h2 id="ç»„åˆå¼å‡½æ•°çš„â€œé™·é˜±â€"><a href="#ç»„åˆå¼å‡½æ•°çš„â€œé™·é˜±â€" class="headerlink" title="ç»„åˆå¼å‡½æ•°çš„â€œé™·é˜±â€"></a>ç»„åˆå¼å‡½æ•°çš„â€œé™·é˜±â€</h2><h3 id="é€‰é¡¹å¼-API-ä½œç”¨åŸŸèŒƒå›´æ··æ·†â€”â€”æ¡ˆä¾‹1"><a href="#é€‰é¡¹å¼-API-ä½œç”¨åŸŸèŒƒå›´æ··æ·†â€”â€”æ¡ˆä¾‹1" class="headerlink" title="é€‰é¡¹å¼ API ä½œç”¨åŸŸèŒƒå›´æ··æ·†â€”â€”æ¡ˆä¾‹1"></a>é€‰é¡¹å¼ API ä½œç”¨åŸŸèŒƒå›´æ··æ·†â€”â€”æ¡ˆä¾‹1</h3><p>å¤§å®¶å¯ä»¥æ€è€ƒä¸€ä¸‹ä»¥ä¸‹ä¸¤ç§å†™æ³•æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</p><ul><li>å†™æ³•1</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// useGrid.ts</span><br><span class="hljs-keyword">import</span> &#123; computed, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useGrid</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-comment">// æŠŠå“åº”å¼å˜é‡å°è£…å…¥ç»„åˆå¼å‡½æ•°å†…éƒ¨</span><br>    <span class="hljs-keyword">const</span> columnId = ref&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">0</span>)<br><br>    <span class="hljs-keyword">return</span> &#123;<br>        columnId<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// test.ts</span><br><span class="hljs-keyword">import</span> &#123; useGrid &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./useGrid.ts&quot;</span><br><span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">columnId</span>: columnIdA &#125; = <span class="hljs-title function_">useGrid</span>() <span class="hljs-comment">// :ç›¸å½“äºä»¥columnIdAçš„å˜é‡åå¼•å…¥columnId</span><br><span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">columnId</span>: columnIdB &#125; = <span class="hljs-title function_">useGrid</span>()<br><br>columnIdA.<span class="hljs-property">value</span> ++<br>columnIdB.<span class="hljs-property">value</span> ++<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(columnIdA.<span class="hljs-property">value</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(columnIdB.<span class="hljs-property">value</span>)<br></code></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">1<br>1<br></code></pre></td></tr></table></figure><ul><li>å†™æ³•2</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// useGrid.ts</span><br><span class="hljs-keyword">import</span> &#123; computed, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span><br><br><span class="hljs-keyword">const</span> columnId = ref&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">0</span>)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useGrid</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>        columId<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// test.ts</span><br><span class="hljs-keyword">import</span> &#123; useGrid &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./useGrid.ts&quot;</span><br><span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">columnId</span>: columnIdA &#125; = <span class="hljs-title function_">useGrid</span>() <span class="hljs-comment">// :ç›¸å½“äºä»¥columnIdAçš„å˜é‡åå¼•å…¥columnId</span><br><span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">columnId</span>: columnIdB &#125; = <span class="hljs-title function_">useGrid</span>()<br><br>columnIdA.<span class="hljs-property">value</span> ++<br>columnIdB.<span class="hljs-property">value</span> ++<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(columnIdA.<span class="hljs-property">value</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(columnIdB.<span class="hljs-property">value</span>)<br></code></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">1<br>2<br></code></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆä¼šé€ æˆè¿™ç§å·®å¼‚å‘¢ï¼Ÿ</p><p>å› ä¸ºå†™æ³•1æŠŠcolumnIdè¿™ä¸ªå“åº”å¼å˜é‡ä½œä¸ºäº†ç»„åˆå‡½æ•°å°è£…çš„ä¸€éƒ¨åˆ†ï¼Œè€Œå†™æ³•2åˆ™æŠŠcolumnIdä½œä¸ºäº†å…¨å±€å˜é‡ã€‚åœ¨å†™æ³•1çš„æƒ…å†µä¸‹ï¼Œåˆ©ç”¨useGridå£°æ˜çš„ä¸¤ä¸ªå“åº”å¼å˜é‡æ˜¯åŒèƒèƒå…„å¼Ÿï¼Œå®ƒä»¬æœ¬è´¨ä¸Šæ˜¯ä¸åŒçš„ä¸ªä½“ï¼è€Œå†™æ³•2è™½ç„¶ä¹Ÿå£°æ˜äº†ä¸¤ä¸ªå“åº”å¼å˜é‡ï¼Œä½†æœ¬è´¨ä¸Šä¸¤ä¸ªå“åº”å¼å˜é‡æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå˜é‡ã€‚</p><p>è¿™ä¸¤ç§åšæ³•å„æœ‰ä»€ä¹ˆå®é™…ç”¨å¤„å‘¢ï¼Ÿ</p><p>å†™æ³•1æ›´é€‚ç”¨äºâ€œé€»è¾‘å¤ç”¨â€ï¼Œåœ¨ä¸åŒçš„åœ°æ–¹å£°æ˜useGridï¼Œä¹Ÿå³åœ¨ä¸åŒçš„ä¸šåŠ¡åœºæ™¯åº”ç”¨ç»„åˆå¼å‡½æ•°ï¼Œä»–ä»¬éœ€è¦çš„æ˜¯ç‹¬ç«‹çš„å“åº”å¼å˜é‡ï¼Œä¸éœ€è¦å…±äº«ç»™å…¶ä»–ç»„ä»¶ã€‚<br>è€Œå†™æ³•2æ›´é€‚ç”¨äºâ€œå…±äº«â€ï¼Œåœ¨ä¸åŒçš„åœ°æ–¹å£°æ˜useGridï¼Œå®ƒä»¬å¯ä»¥æ‹¿åˆ°åŒä¸€ä»½å“åº”å¼å˜é‡ï¼Œéœ€è¦çš„æ˜¯èƒ½åœ¨ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ä¸­å…±äº«ä¸€ä»½æ•°æ®ã€‚</p><h3 id="é€‰é¡¹å¼APIä½œç”¨åŸŸèŒƒå›´æ··æ·†â€”â€”æ¡ˆä¾‹2"><a href="#é€‰é¡¹å¼APIä½œç”¨åŸŸèŒƒå›´æ··æ·†â€”â€”æ¡ˆä¾‹2" class="headerlink" title="é€‰é¡¹å¼APIä½œç”¨åŸŸèŒƒå›´æ··æ·†â€”â€”æ¡ˆä¾‹2"></a>é€‰é¡¹å¼APIä½œç”¨åŸŸèŒƒå›´æ··æ·†â€”â€”æ¡ˆä¾‹2</h3><p>å‰æƒ…æè¦ï¼šuseI18næ˜¯ä¸€ä¸ªåªèƒ½ä½œç”¨äºé€‰é¡¹å¼APIèŒƒå›´å†…çš„ç»„åˆå¼å‡½æ•°</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// useA.ts</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useA</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> &#123; t &#125; = <span class="hljs-title function_">useI18n</span>()<br>    ...<br><br>    <span class="hljs-keyword">return</span> &#123;<br>        ...<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//useB.ts</span><br><span class="hljs-keyword">import</span> &#123; useA &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./useA.ts&#x27;</span><br><span class="hljs-keyword">const</span> &#123; ... &#125; = <span class="hljs-title function_">useA</span>()<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useB</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    ...<br>    <span class="hljs-keyword">return</span> &#123;<br>        ...<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>vueç»„ä»¶æµ‹è¯•</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useB &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./useB.ts&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> &#123; ... &#125; = <span class="hljs-title function_">useB</span>()</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿™æ˜¯å¦ä¸€ç§ä½œç”¨åŸŸæ··æ·†é”™è¯¯ï¼Œå› ä¸ºuseAä¸­useI18nåªèƒ½åœ¨é€‰é¡¹å¼APIå†…å£°æ˜ï¼Œè€ŒuseBä¸­å´åœ¨ç»„åˆå¼å‡½æ•°å¤–éƒ¨å£°æ˜useAï¼Œè¿™æœ¬è´¨ä¸Šè„±ç¦»äº†é€‰é¡¹å¼APIçš„ä½œç”¨åŸŸï¼Œæ•…vueç»„ä»¶å°±ä¼šæŠ¥é”™useI18nå¿…é¡»åœ¨é€‰é¡¹å¼APIå†…éƒ¨å£°æ˜ã€‚</p><h3 id="æ³¨æ„è§„é¿å¾ªç¯ä¾èµ–"><a href="#æ³¨æ„è§„é¿å¾ªç¯ä¾èµ–" class="headerlink" title="æ³¨æ„è§„é¿å¾ªç¯ä¾èµ–"></a>æ³¨æ„è§„é¿å¾ªç¯ä¾èµ–</h3><p>æœ‰çš„æ—¶å€™æˆ‘ä»¬å–œæ¬¢æ··ç”¨å„ä¸ªç»„åˆå¼å‡½æ•°ï¼Œç»„åˆå¼å‡½æ•°ä¹‹é—´å¯èƒ½å­˜åœ¨ç›¸äº’å¼•ç”¨çš„å˜é‡ï¼Œå°±ä¼šé€ æˆå¾ªç¯ä¾èµ–ï¼Œæ•…åœ¨è®¾è®¡æ—¶å°±è¦å°†å„ä¸ªæ¨¡å—è§£è€¦å¼€ï¼Œå¦å¤–æ¨èä¸€ç§ç¬”è€…æ¨èçš„å†™æ³•ï¼Œå¯ä»¥æœ‰æ•ˆé¿å…å¾ªç¯ä¾èµ–ï¼š</p><h3 id="ç¬”è€…æ¨èçš„å†™æ³•"><a href="#ç¬”è€…æ¨èçš„å†™æ³•" class="headerlink" title="ç¬”è€…æ¨èçš„å†™æ³•"></a>ç¬”è€…æ¨èçš„å†™æ³•</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åˆ›å»º shared.ts</span><br><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> commonVar = ref&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">0</span>)<br><br><span class="hljs-comment">// useA.ts</span><br><span class="hljs-keyword">import</span> &#123; commonVar &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./shared.ts&#x27;</span><br>... <span class="hljs-comment">// ä½¿ç”¨commonVar</span><br><span class="hljs-comment">// useB.ts</span><br><span class="hljs-keyword">import</span> &#123; commonVar &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./shared.ts&#x27;</span><br>... <span class="hljs-comment">// ä½¿ç”¨commonVar</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2025/08/03/hello-world/"/>
    <url>/2025/08/03/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
