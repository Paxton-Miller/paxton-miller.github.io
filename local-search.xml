<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Linuxç¯å›è®¾å¤‡(loop device)</title>
    <link href="/2025/11/01/Linux%E7%8E%AF%E5%9B%9E%E8%AE%BE%E5%A4%87loop/"/>
    <url>/2025/11/01/Linux%E7%8E%AF%E5%9B%9E%E8%AE%BE%E5%A4%87loop/</url>
    
    <content type="html"><![CDATA[<h1 id="Linux-ç¯å›è®¾å¤‡ï¼ˆloop-deviceï¼‰"><a href="#Linux-ç¯å›è®¾å¤‡ï¼ˆloop-deviceï¼‰" class="headerlink" title="Linux ç¯å›è®¾å¤‡ï¼ˆloop deviceï¼‰"></a>Linux ç¯å›è®¾å¤‡ï¼ˆloop deviceï¼‰</h1><h2 id="ä¸€ã€æ¦‚å¿µ"><a href="#ä¸€ã€æ¦‚å¿µ" class="headerlink" title="ä¸€ã€æ¦‚å¿µ"></a>ä¸€ã€æ¦‚å¿µ</h2><p><strong>ç¯å›è®¾å¤‡ï¼ˆloop deviceï¼‰</strong> æ˜¯ä¸€ç§è™šæ‹Ÿå—è®¾å¤‡ï¼Œå®ƒå…è®¸ä½ æŠŠä¸€ä¸ªæ™®é€šæ–‡ä»¶å½“ä½œå—è®¾å¤‡ï¼ˆå¦‚ç¡¬ç›˜æˆ–åˆ†åŒºï¼‰æ¥ä½¿ç”¨ã€‚<br>ç®€å•æ¥è¯´ï¼Œå®ƒè®©ä¸€ä¸ªæ–‡ä»¶â€œä¼ªè£…æˆâ€ä¸€ä¸ªç£ç›˜è®¾å¤‡ï¼Œè¿™æ ·å°±å¯ä»¥å¯¹è¿™ä¸ªæ–‡ä»¶æ‰§è¡ŒæŒ‚è½½ï¼ˆmountï¼‰ã€æ ¼å¼åŒ–ç­‰æ“ä½œã€‚</p><p>ä¾‹å¦‚ï¼Œä½ æœ‰ä¸€ä¸ªé•œåƒæ–‡ä»¶ <code>disk.img</code>ï¼Œå°±å¯ä»¥é€šè¿‡ loop è®¾å¤‡æŠŠå®ƒæŒ‚è½½åˆ°ç³»ç»Ÿä¸­ï¼ŒåƒæŒ‚è½½çœŸå®ç£ç›˜ä¸€æ ·ä½¿ç”¨ã€‚</p><hr><h2 id="äºŒã€åŸºæœ¬ç”¨æ³•"><a href="#äºŒã€åŸºæœ¬ç”¨æ³•" class="headerlink" title="äºŒã€åŸºæœ¬ç”¨æ³•"></a>äºŒã€åŸºæœ¬ç”¨æ³•</h2><h3 id="1-åˆ›å»ºä¸€ä¸ªé•œåƒæ–‡ä»¶"><a href="#1-åˆ›å»ºä¸€ä¸ªé•œåƒæ–‡ä»¶" class="headerlink" title="1. åˆ›å»ºä¸€ä¸ªé•œåƒæ–‡ä»¶"></a>1. åˆ›å»ºä¸€ä¸ªé•œåƒæ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">dd</span> <span class="hljs-keyword">if</span>=/dev/zero of=disk.img bs=1M count=100<br></code></pre></td></tr></table></figure><p>è¿™ä¼šåˆ›å»ºä¸€ä¸ª 100MB çš„ç©ºç™½æ–‡ä»¶ã€‚</p><hr><h3 id="2-é€šè¿‡-losetup-å…³è”ç¯å›è®¾å¤‡"><a href="#2-é€šè¿‡-losetup-å…³è”ç¯å›è®¾å¤‡" class="headerlink" title="2. é€šè¿‡ losetup å…³è”ç¯å›è®¾å¤‡"></a>2. é€šè¿‡ <code>losetup</code> å…³è”ç¯å›è®¾å¤‡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> losetup /dev/loop0 disk.img<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹ç¯å›è®¾å¤‡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">losetup -a<br></code></pre></td></tr></table></figure><p>è§£é™¤å…³è”ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> losetup -d /dev/loop0<br></code></pre></td></tr></table></figure><hr><h3 id="3-åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ"><a href="#3-åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="3. åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ"></a>3. åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> mkfs.ext4 /dev/loop0<br></code></pre></td></tr></table></figure><hr><h3 id="4-æŒ‚è½½åˆ°ç›®å½•"><a href="#4-æŒ‚è½½åˆ°ç›®å½•" class="headerlink" title="4. æŒ‚è½½åˆ°ç›®å½•"></a>4. æŒ‚è½½åˆ°ç›®å½•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">mkdir</span> /mnt/looptest<br><span class="hljs-built_in">sudo</span> mount /dev/loop0 /mnt/looptest<br></code></pre></td></tr></table></figure><p>ç°åœ¨ <code>/mnt/looptest</code> ä¸‹å°±åƒä¸€ä¸ªçœŸå®ç£ç›˜ä¸€æ ·ï¼Œå¯ä»¥è¯»å†™æ–‡ä»¶ã€‚</p><hr><h3 id="5-å¸è½½ä¸æ¸…ç†"><a href="#5-å¸è½½ä¸æ¸…ç†" class="headerlink" title="5. å¸è½½ä¸æ¸…ç†"></a>5. å¸è½½ä¸æ¸…ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> umount /mnt/looptest<br><span class="hljs-built_in">sudo</span> losetup -d /dev/loop0<br></code></pre></td></tr></table></figure><hr><h2 id="ä¸‰ã€å¿«æ·ç”¨æ³•ï¼ˆè‡ªåŠ¨åˆ†é…-loopï¼‰"><a href="#ä¸‰ã€å¿«æ·ç”¨æ³•ï¼ˆè‡ªåŠ¨åˆ†é…-loopï¼‰" class="headerlink" title="ä¸‰ã€å¿«æ·ç”¨æ³•ï¼ˆè‡ªåŠ¨åˆ†é… loopï¼‰"></a>ä¸‰ã€å¿«æ·ç”¨æ³•ï¼ˆè‡ªåŠ¨åˆ†é… loopï¼‰</h2><p>å¯ä»¥ç›´æ¥é€šè¿‡ <code>mount -o loop</code> è‡ªåŠ¨å®Œæˆè®¾å¤‡ç»‘å®šï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> mount -o loop disk.img /mnt/looptest<br></code></pre></td></tr></table></figure><p>ç³»ç»Ÿä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªç©ºé—²çš„ <code>/dev/loopX</code>ã€‚</p><hr><h2 id="å››ã€ä¼˜ç‚¹"><a href="#å››ã€ä¼˜ç‚¹" class="headerlink" title="å››ã€ä¼˜ç‚¹"></a>å››ã€ä¼˜ç‚¹</h2><ul><li><strong>ä¾¿æ·æ€§</strong>ï¼šä¸éœ€è¦çœŸå®ç£ç›˜ï¼Œå°±å¯ä»¥æµ‹è¯•æŒ‚è½½ã€æ–‡ä»¶ç³»ç»Ÿæ“ä½œã€‚</li><li><strong>çµæ´»æ€§</strong>ï¼šå¯å¿«é€Ÿåˆ›å»ºã€é”€æ¯è™šæ‹Ÿç£ç›˜ï¼Œæ–¹ä¾¿å®éªŒæˆ–å®¹å™¨åŒ–ç¯å¢ƒä½¿ç”¨ã€‚</li><li><strong>æ–‡ä»¶å¯ç§»æ¤</strong>ï¼šæ•´ä¸ªé•œåƒæ–‡ä»¶å¯éšæ—¶å¤åˆ¶ã€å¤‡ä»½æˆ–ç§»åŠ¨ã€‚</li><li><strong>å®‰å…¨æ€§</strong>ï¼šä¸ä¼šå½±å“çœŸå®ç£ç›˜åˆ†åŒºã€‚</li></ul><hr><h2 id="äº”ã€ç¼ºç‚¹"><a href="#äº”ã€ç¼ºç‚¹" class="headerlink" title="äº”ã€ç¼ºç‚¹"></a>äº”ã€ç¼ºç‚¹</h2><ul><li><strong>æ€§èƒ½è¾ƒä½</strong>ï¼šæœ¬è´¨ä¸Šæ˜¯æ–‡ä»¶è¯»å†™çš„å†å°è£…ï¼Œæœ‰é¢å¤–çš„ I&#x2F;O å¼€é”€ã€‚</li><li><strong>ä¸é€‚åˆå¤§è§„æ¨¡å­˜å‚¨</strong>ï¼šä»…ç”¨äºæµ‹è¯•æˆ–è½»é‡è™šæ‹Ÿç¯å¢ƒã€‚ï¼ˆæœ‰äº›è®¾å¤‡ä»…æ”¯æŒè‡³32Tï¼‰</li><li><strong>ä¸èƒ½ç›´æ¥æ”¯æŒæŸäº›é«˜çº§å—è®¾å¤‡ç‰¹æ€§</strong>ï¼ˆå¦‚ç›´é€šã€LVMã€å¤šé˜Ÿåˆ— I&#x2F;Oï¼‰ã€‚</li></ul><hr><h2 id="å…­ã€å…¸å‹åº”ç”¨åœºæ™¯"><a href="#å…­ã€å…¸å‹åº”ç”¨åœºæ™¯" class="headerlink" title="å…­ã€å…¸å‹åº”ç”¨åœºæ™¯"></a>å…­ã€å…¸å‹åº”ç”¨åœºæ™¯</h2><ul><li>åˆ¶ä½œæˆ–æµ‹è¯• Linux é•œåƒæ–‡ä»¶ï¼ˆå¦‚ <code>.iso</code>, <code>.img</code>ï¼‰</li><li>å®¹å™¨æˆ–è™šæ‹Ÿæœºçš„ä¸´æ—¶æ ¹æ–‡ä»¶ç³»ç»Ÿ</li><li>æ–‡ä»¶ç³»ç»Ÿå­¦ä¹ ã€æ ¼å¼åŒ–å®éªŒ</li><li>åŠ å¯†å·ï¼ˆä¾‹å¦‚ <code>cryptsetup</code> åŸºäº loop è®¾å¤‡ï¼‰</li></ul><hr><h2 id="ä¸ƒã€æ€»ç»“"><a href="#ä¸ƒã€æ€»ç»“" class="headerlink" title="ä¸ƒã€æ€»ç»“"></a>ä¸ƒã€æ€»ç»“</h2><table><thead><tr><th>åŠŸèƒ½</th><th>å‘½ä»¤ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>åˆ›å»ºé•œåƒ</td><td><code>dd if=/dev/zero of=disk.img bs=1M count=100</code></td><td>ç”Ÿæˆ 100MB æ–‡ä»¶</td></tr><tr><td>ç»‘å®š loop</td><td><code>losetup /dev/loop0 disk.img</code></td><td>å°†æ–‡ä»¶æ˜ å°„ä¸ºå—è®¾å¤‡</td></tr><tr><td>åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ</td><td><code>mkfs.ext4 /dev/loop0</code></td><td>æ ¼å¼åŒ–ä¸º ext4</td></tr><tr><td>æŒ‚è½½</td><td><code>mount /dev/loop0 /mnt/looptest</code></td><td>åƒçœŸå®ç£ç›˜ä¸€æ ·ä½¿ç”¨</td></tr><tr><td>å¸è½½</td><td><code>umount /mnt/looptest &amp;&amp; losetup -d /dev/loop0</code></td><td>é‡Šæ”¾èµ„æº</td></tr></tbody></table><hr><p><strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong><br>ç¯å›è®¾å¤‡ï¼ˆloop deviceï¼‰æ˜¯â€œç”¨æ–‡ä»¶å‡è£…æˆç£ç›˜â€çš„æœºåˆ¶ï¼Œæ–¹ä¾¿æŒ‚è½½ã€å®éªŒå’Œé•œåƒæ“ä½œï¼Œä½†æ€§èƒ½æœ‰é™ï¼Œä¸»è¦ç”¨äºæµ‹è¯•å’Œè™šæ‹ŸåŒ–åœºæ™¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>DevOps &amp; äº‘åŸç”Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>asyncã€awaitä¸Promise</title>
    <link href="/2025/10/20/async%E3%80%81await%E4%B8%8EPromise/"/>
    <url>/2025/10/20/async%E3%80%81await%E4%B8%8EPromise/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€async-æ ‡è®°çš„å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸€ã€async-æ ‡è®°çš„å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸€ã€async æ ‡è®°çš„å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä¸€ã€<code>async</code> æ ‡è®°çš„å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">123</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>â¡ï¸ <strong>ç»“è®ºï¼š<code>async</code> æ ‡è®°çš„å‡½æ•°ç›¸å½“äºä¸€ä¸ª Promise å‡½æ•°ï¼ˆå³è¿”å› Promise å¯¹è±¡çš„å‡½æ•°ï¼‰</strong>ã€‚</p><p>è§£é‡Šï¼š</p><ul><li>å®ƒæœ¬è´¨æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼›</li><li>ä½†è°ƒç”¨åï¼Œ<strong>è¿”å›ä¸€ä¸ª Promise å¯¹è±¡</strong>ï¼›</li><li>è¿”å›å€¼ <code>123</code> ä¼šè¢«è‡ªåŠ¨åŒ…è£…æˆ <code>Promise.resolve(123)</code>ã€‚</li></ul><p>éªŒè¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> p = <span class="hljs-title function_">foo</span>();<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Promise</span>); <span class="hljs-comment">// âœ… true</span><br></code></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼š</p><blockquote><p>âœ… â€œ<code>async</code> æ ‡è®°çš„å‡½æ•° â‰  Promise å¯¹è±¡æœ¬èº«â€ï¼Œ<br>è€Œæ˜¯â€œ<strong>è¿”å› Promise å¯¹è±¡çš„å‡½æ•°</strong>â€ã€‚</p></blockquote><h2 id="äºŒã€await-æ ‡è®°çš„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#äºŒã€await-æ ‡è®°çš„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="äºŒã€await æ ‡è®°çš„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>äºŒã€<code>await</code> æ ‡è®°çš„æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><code>await</code> ç”¨æ¥<strong>ç­‰å¾…ä¸€ä¸ª Promise å¯¹è±¡çš„ç»“æœ</strong>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>();<br></code></pre></td></tr></table></figure><ul><li>å¦‚æœ <code>fetchData()</code> è¿”å›ä¸€ä¸ª Promiseï¼ˆæ¯”å¦‚é€šè¿‡ async å®šä¹‰çš„ï¼‰ï¼Œ<code>await</code> ä¼šæš‚åœå½“å‰å‡½æ•°ï¼Œç›´åˆ° Promise è¢« resolveï¼›</li><li>å¦‚æœè¿”å›çš„ä¸æ˜¯ Promiseï¼ŒJS ä¼šè‡ªåŠ¨æ‰§è¡Œ <code>Promise.resolve(éPromiseå€¼)</code>ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç­‰å¾…ä¸€ä¸ªæ™®é€šå€¼ã€‚</li></ul><p>ğŸ‘‰ æ¢å¥è¯è¯´ï¼š</p><blockquote><p><code>await</code> <strong>åé¢é€šå¸¸æ¥ Promise å¯¹è±¡</strong>ï¼ˆæˆ–ä»»ä½•å¯ä»¥è½¬æˆ Promise çš„å€¼ï¼‰ã€‚</p></blockquote><p>ç¤ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">await</span> <span class="hljs-number">123</span>; <span class="hljs-comment">// ç­‰ä»·äº await Promise.resolve(123)</span><br></code></pre></td></tr></table></figure><h2 id="ä¸‰ã€Promise-all-æ¥å—çš„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸‰ã€Promise-all-æ¥å—çš„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸‰ã€Promise.all æ¥å—çš„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä¸‰ã€<code>Promise.all</code> æ¥å—çš„æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><code>Promise.all()</code> æ¥å—çš„æ˜¯ <strong>Promise å¯¹è±¡æ•°ç»„</strong>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([p1, p2, p3])<br></code></pre></td></tr></table></figure><p>å¦‚æœä½ ä¼ è¿›å»å‡½æ•°ï¼Œæ¯”å¦‚ <code>[foo, bar]</code>ï¼Œæ˜¯ä¸ä¼šèµ·ä½œç”¨çš„ï¼Œå¿…é¡»æ‰§è¡Œæˆå¯¹è±¡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// é”™è¯¯ âŒ</span><br><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([fetchA, fetchB]); <span class="hljs-comment">// ä¸ä¼šç­‰å¾…</span><br><br><span class="hljs-comment">// æ­£ç¡® âœ…</span><br><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([<span class="hljs-title function_">fetchA</span>(), <span class="hljs-title function_">fetchB</span>()]);<br></code></pre></td></tr></table></figure><h2 id="å››ã€æ•´ä½“å…³ç³»å›¾-ğŸ§©"><a href="#å››ã€æ•´ä½“å…³ç³»å›¾-ğŸ§©" class="headerlink" title="å››ã€æ•´ä½“å…³ç³»å›¾ ğŸ§©"></a>å››ã€æ•´ä½“å…³ç³»å›¾ ğŸ§©</h2><table><thead><tr><th>æ¦‚å¿µ</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>Promise</code></td><td>æ„é€ å‡½æ•°</td><td>ç”¨æ¥ new å‡º Promise å¯¹è±¡</td></tr><tr><td><code>Promise å¯¹è±¡</code></td><td>å¼‚æ­¥ç»“æœå®¹å™¨</td><td>æœ‰ thenã€catch æ–¹æ³•</td></tr><tr><td><code>async å‡½æ•°</code></td><td>è¿”å› Promise çš„å‡½æ•°</td><td>æ˜¯ Promise çš„è¯­æ³•ç³–</td></tr><tr><td><code>await è¡¨è¾¾å¼</code></td><td>Promise è§£åŒ…å·¥å…·</td><td>ç­‰å¾… Promise ç»“æœ</td></tr><tr><td><code>Promise.all([...])</code></td><td>Promise ç»„åˆå™¨</td><td>æ¥æ”¶ Promise å¯¹è±¡æ•°ç»„</td></tr></tbody></table><h2 id="äº”ã€ç®€å•ç¤ºä¾‹-ğŸŒ±"><a href="#äº”ã€ç®€å•ç¤ºä¾‹-ğŸŒ±" class="headerlink" title="äº”ã€ç®€å•ç¤ºä¾‹ ğŸŒ±"></a>äº”ã€ç®€å•ç¤ºä¾‹ ğŸŒ±</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getData</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> a = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchA</span>(); <span class="hljs-comment">// ç­‰å¾… PromiseA</span><br>  <span class="hljs-keyword">const</span> b = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchB</span>(); <span class="hljs-comment">// ç­‰å¾… PromiseB</span><br>  <span class="hljs-keyword">return</span> a + b;             <span class="hljs-comment">// è‡ªåŠ¨å°è£…æˆ Promise.resolve(a + b)</span><br>&#125;<br><br><span class="hljs-keyword">const</span> p = <span class="hljs-title function_">getData</span>(); <span class="hljs-comment">// è¿”å› Promise å¯¹è±¡</span><br>p.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)); <span class="hljs-comment">// è·å–ç»“æœ</span><br><br><span class="hljs-comment">// å¹¶è¡Œæ‰§è¡Œ</span><br><span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([<span class="hljs-title function_">fetchA</span>(), <span class="hljs-title function_">fetchB</span>()]);<br></code></pre></td></tr></table></figure><h2 id="å…­ã€Promise-é“¾å¼è°ƒç”¨"><a href="#å…­ã€Promise-é“¾å¼è°ƒç”¨" class="headerlink" title="å…­ã€Promise é“¾å¼è°ƒç”¨"></a>å…­ã€Promise é“¾å¼è°ƒç”¨</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>))<br>  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x + <span class="hljs-number">1</span>)<br>  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x * <span class="hljs-number">3</span>)<br>  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x)); <span class="hljs-comment">// è¾“å‡º 6</span><br></code></pre></td></tr></table></figure><p>æ¯ä¸ª then éƒ½è¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œå› æ­¤å¯ä»¥é“¾å¼è°ƒç”¨ã€‚</p><h2 id="ä¸ƒã€å¸¸è§å‘"><a href="#ä¸ƒã€å¸¸è§å‘" class="headerlink" title="ä¸ƒã€å¸¸è§å‘"></a>ä¸ƒã€å¸¸è§å‘</h2><p>ä¸è¦åœ¨ forEach ä¸­ä½¿ç”¨ awaitï¼š<br>forEach ä¸ä¼šç­‰å¾…å›è°ƒä¸­çš„å¼‚æ­¥æ“ä½œï¼›<br>å®ƒåªæ˜¯æŒ‰é¡ºåºç«‹å³è°ƒç”¨æ‰€æœ‰å›è°ƒå‡½æ•°ï¼›<br>å¦‚æœå›è°ƒæ˜¯ asyncï¼Œé‚£å®ƒä¼šè¿”å› Promiseï¼Œä½† forEach ä¸ä¼šå¤„ç†å®ƒã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">arr.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">async</span> item =&gt; &#123;<br>  <span class="hljs-keyword">await</span> <span class="hljs-title function_">doSomething</span>(item); <span class="hljs-comment">// âŒ å¤–éƒ¨ä¸ä¼šç­‰å¾…</span><br>&#125;);<br></code></pre></td></tr></table></figure><p>æ­£ç¡®å†™æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> arr) &#123;<br>  <span class="hljs-keyword">await</span> <span class="hljs-title function_">doSomething</span>(item);<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ–å¹¶è¡Œæ‰§è¡Œï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(arr.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-title function_">doSomething</span>(item)));<br></code></pre></td></tr></table></figure><hr><h2 id="âœ…-ä¸€å¥è¯æ€»ç»“"><a href="#âœ…-ä¸€å¥è¯æ€»ç»“" class="headerlink" title="âœ… ä¸€å¥è¯æ€»ç»“"></a>âœ… ä¸€å¥è¯æ€»ç»“</h2><ul><li><code>async</code> æ ‡è®°çš„å‡½æ•° â†’ <strong>è¿”å› Promise å¯¹è±¡</strong>ï¼›</li><li><code>await</code> â†’ <strong>ç­‰å¾… Promise å¯¹è±¡</strong>ï¼›</li><li><code>Promise.all()</code> â†’ <strong>æ¥å— Promise å¯¹è±¡æ•°ç»„</strong>ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>Webå‰ç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¼‚æ­¥</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Docker ç¦»çº¿å®‰è£…ä¸æ ¹ç›®å½•è¿ç§»å¼•å‘çš„æ€è€ƒ</title>
    <link href="/2025/10/12/Docker-%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E4%B8%8E%E6%A0%B9%E7%9B%AE%E5%BD%95%E8%BF%81%E7%A7%BB%E5%BC%95%E5%8F%91%E7%9A%84%E6%80%9D%E8%80%83/"/>
    <url>/2025/10/12/Docker-%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E4%B8%8E%E6%A0%B9%E7%9B%AE%E5%BD%95%E8%BF%81%E7%A7%BB%E5%BC%95%E5%8F%91%E7%9A%84%E6%80%9D%E8%80%83/</url>
    
    <content type="html"><![CDATA[<p>åœ¨ä¸€äº› <strong>å†…ç½‘æˆ–éš”ç¦»ç¯å¢ƒ</strong>ï¼ˆå¦‚æ”¿ä¼æœåŠ¡å™¨ã€ç§‘ç ”å†…ç½‘ï¼‰ä¸­ï¼Œæ— æ³•ç›´æ¥è”ç½‘æ‰§è¡Œ <code>apt install docker</code> æˆ– <code>yum install docker</code>ã€‚<br>è¿™æ—¶å°±éœ€è¦é€šè¿‡ <strong>ç¦»çº¿å®‰è£… Docker</strong> çš„æ–¹å¼æ¥éƒ¨ç½²å®¹å™¨ç¯å¢ƒã€‚<br>æœ¬æ–‡è®°å½•äº†æˆ‘åœ¨ç¦»çº¿å®‰è£… Docker å¹¶è¿ç§»æ ¹ç›®å½•ï¼ˆ&#x2F;var&#x2F;lib&#x2F;dockerï¼‰åçš„ç»éªŒä¸è¸©å‘æ€»ç»“ ğŸ§ </p><hr><h2 id="ğŸ§©-ä¸€ã€æŸ¥çœ‹ç³»ç»Ÿç¯å¢ƒ"><a href="#ğŸ§©-ä¸€ã€æŸ¥çœ‹ç³»ç»Ÿç¯å¢ƒ" class="headerlink" title="ğŸ§© ä¸€ã€æŸ¥çœ‹ç³»ç»Ÿç¯å¢ƒ"></a>ğŸ§© ä¸€ã€æŸ¥çœ‹ç³»ç»Ÿç¯å¢ƒ</h2><p>é¦–å…ˆç¡®å®šç³»ç»Ÿæ¶æ„å’Œç‰ˆæœ¬ï¼Œé¿å…ä¸‹è½½é”™è¯¯çš„äºŒè¿›åˆ¶åŒ…ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹ç³»ç»Ÿæ¶æ„ï¼ˆå¦‚ x86_64 æˆ– aarch64ï¼‰</span><br><span class="hljs-built_in">uname</span> -m<br><br><span class="hljs-comment"># æŸ¥çœ‹æ˜¯å¦å·²æœ‰ Docker ç‰ˆæœ¬</span><br>docker -v<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ“¦-äºŒã€ä¸‹è½½-Docker-ç¦»çº¿åŒ…"><a href="#ğŸ“¦-äºŒã€ä¸‹è½½-Docker-ç¦»çº¿åŒ…" class="headerlink" title="ğŸ“¦ äºŒã€ä¸‹è½½ Docker ç¦»çº¿åŒ…"></a>ğŸ“¦ äºŒã€ä¸‹è½½ Docker ç¦»çº¿åŒ…</h2><p>åœ¨å¯è”ç½‘çš„æœºå™¨ä¸Šè®¿é—®å®˜æ–¹ä¸‹è½½é¡µï¼š</p><p>ğŸ‘‰ <a href="https://download.docker.com/linux/static/stable/">https://download.docker.com/linux/static/stable/</a></p><p>æ ¹æ®ç³»ç»Ÿæ¶æ„é€‰æ‹©åˆé€‚çš„ tar åŒ…ï¼ˆä¾‹å¦‚ <code>docker-18.06.3-ce.tgz</code>ï¼‰<br>ç„¶åå°†å…¶æ‹·è´åˆ°ç›®æ ‡æœåŠ¡å™¨ä¸Šï¼ˆä½¿ç”¨ scpã€U ç›˜ç­‰æ–¹å¼ï¼‰ã€‚</p><hr><h2 id="ğŸ”§-ä¸‰ã€ç¦»çº¿å®‰è£…æ­¥éª¤"><a href="#ğŸ”§-ä¸‰ã€ç¦»çº¿å®‰è£…æ­¥éª¤" class="headerlink" title="ğŸ”§ ä¸‰ã€ç¦»çº¿å®‰è£…æ­¥éª¤"></a>ğŸ”§ ä¸‰ã€ç¦»çº¿å®‰è£…æ­¥éª¤</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è§£å‹äºŒè¿›åˆ¶æ–‡ä»¶</span><br>tar -zxvf docker-18.06.3-ce.tgz<br><br><span class="hljs-comment"># å°†å¯æ‰§è¡Œæ–‡ä»¶å¤åˆ¶åˆ°ç³»ç»Ÿè·¯å¾„</span><br><span class="hljs-built_in">cp</span> ./docker/* /usr/bin/<br></code></pre></td></tr></table></figure><p>æ¥ç€åˆ›å»ºå¹¶ç¼–è¾‘ Docker çš„ systemd å¯åŠ¨æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /etc/systemd/system/<br><span class="hljs-built_in">touch</span> docker.service<br></code></pre></td></tr></table></figure><hr><h2 id="âš™ï¸-å››ã€ç¼–è¾‘-docker-service"><a href="#âš™ï¸-å››ã€ç¼–è¾‘-docker-service" class="headerlink" title="âš™ï¸ å››ã€ç¼–è¾‘ docker.service"></a>âš™ï¸ å››ã€ç¼–è¾‘ <code>docker.service</code></h2><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[Unit]</span><br><span class="hljs-attr">Description</span>=Docker Application Container Engine<br><span class="hljs-attr">Documentation</span>=https://docs.docker.com<br><span class="hljs-attr">After</span>=network-<span class="hljs-literal">on</span>line.target firewalld.service<br><span class="hljs-attr">Wants</span>=network-<span class="hljs-literal">on</span>line.target<br><br><span class="hljs-section">[Service]</span><br><span class="hljs-attr">Type</span>=notify<br><span class="hljs-attr">ExecStart</span>=/usr/bin/dockerd --selinux-enabled=<span class="hljs-literal">false</span> --insecure-registry=<span class="hljs-number">192.168</span>.<span class="hljs-number">205.230</span><br><span class="hljs-attr">ExecReload</span>=/bin/kill -s HUP <span class="hljs-variable">$MAINPID</span><br><span class="hljs-attr">LimitNOFILE</span>=infinity<br><span class="hljs-attr">LimitNPROC</span>=infinity<br><span class="hljs-attr">LimitCORE</span>=infinity<br><span class="hljs-attr">TimeoutStartSec</span>=<span class="hljs-number">0</span><br><span class="hljs-attr">Delegate</span>=<span class="hljs-literal">yes</span><br><span class="hljs-attr">KillMode</span>=process<br><span class="hljs-attr">Restart</span>=<span class="hljs-literal">on</span>-failure<br><span class="hljs-attr">StartLimitBurst</span>=<span class="hljs-number">3</span><br><span class="hljs-attr">StartLimitInterval</span>=<span class="hljs-number">60</span>s<br><br><span class="hljs-section">[Install]</span><br><span class="hljs-attr">WantedBy</span>=multi-user.target<br></code></pre></td></tr></table></figure><p>ä¿å­˜é€€å‡ºåï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chmod</span> +x docker.service<br>systemctl daemon-reload<br>systemctl start docker<br>systemctl status docker<br>docker -v<br>systemctl <span class="hljs-built_in">enable</span> docker.service<br></code></pre></td></tr></table></figure><p>âœ… å¦‚æœèƒ½æ­£å¸¸æ˜¾ç¤ºç‰ˆæœ¬å·ï¼Œè¯´æ˜å®‰è£…æˆåŠŸã€‚</p><hr><h2 id="ğŸ“‚-äº”ã€Docker-æ ¹ç›®å½•è¿ç§»ï¼ˆ-var-lib-dockerï¼‰"><a href="#ğŸ“‚-äº”ã€Docker-æ ¹ç›®å½•è¿ç§»ï¼ˆ-var-lib-dockerï¼‰" class="headerlink" title="ğŸ“‚ äº”ã€Docker æ ¹ç›®å½•è¿ç§»ï¼ˆ&#x2F;var&#x2F;lib&#x2F;dockerï¼‰"></a>ğŸ“‚ äº”ã€Docker æ ¹ç›®å½•è¿ç§»ï¼ˆ&#x2F;var&#x2F;lib&#x2F;dockerï¼‰</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒDocker çš„æ•°æ®æ ¹ç›®å½•ä¸ºï¼š</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">/<span class="hljs-keyword">var</span>/lib/docker<br></code></pre></td></tr></table></figure><p>å½“ç³»ç»Ÿç›˜ç©ºé—´è¾ƒå°æˆ–éœ€è¦æŒ‚è½½ç‹¬ç«‹ç£ç›˜æ—¶ï¼Œå¯ä»¥å°†å…¶è¿ç§»åˆ°å…¶ä»–ç›®å½•ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åœæ­¢ Docker</span><br>systemctl stop docker<br><br><span class="hljs-comment"># ç§»åŠ¨ç›®å½•åˆ°æ–°ä½ç½®ï¼ˆä¾‹å¦‚ /data/dockerï¼‰</span><br><span class="hljs-built_in">mv</span> /var/lib/docker /data/docker<br><br><span class="hljs-comment"># ä¿®æ”¹ daemon.json</span><br>vi /etc/docker/daemon.json<br></code></pre></td></tr></table></figure><p>æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;data-root&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/data/docker&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>é‡æ–°åŠ è½½ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl daemon-reload<br>systemctl start docker<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ§ -å…­ã€å…³äºæ ¹ç›®å½•è¿ç§»çš„æ€§èƒ½æ€è€ƒ"><a href="#ğŸ§ -å…­ã€å…³äºæ ¹ç›®å½•è¿ç§»çš„æ€§èƒ½æ€è€ƒ" class="headerlink" title="ğŸ§  å…­ã€å…³äºæ ¹ç›®å½•è¿ç§»çš„æ€§èƒ½æ€è€ƒ"></a>ğŸ§  å…­ã€å…³äºæ ¹ç›®å½•è¿ç§»çš„æ€§èƒ½æ€è€ƒ</h2><p>åœ¨ Linux ç³»ç»Ÿä¸­ï¼ŒDocker é»˜è®¤ä½¿ç”¨ <strong>overlay2 è”åˆæ–‡ä»¶ç³»ç»Ÿ</strong> æ¥ç®¡ç†é•œåƒä¸å®¹å™¨å±‚ã€‚<br>overlay2 çš„ä¼˜åŠ¿åœ¨äºï¼š</p><ul><li>æ–‡ä»¶å…±äº«é«˜æ•ˆ</li><li>è¯»å†™é€Ÿåº¦å¿«</li><li>æ”¯æŒå†™æ—¶å¤åˆ¶ï¼ˆCopy-on-Writeï¼‰</li></ul><p>ä½†å½“ä½ å°†æ ¹ç›®å½•è¿ç§»åˆ° <strong>NFS æˆ–ç½‘ç»œå­˜å‚¨æŒ‚è½½ç›®å½•</strong> æ—¶ï¼ŒDocker <strong>è‡ªåŠ¨é™çº§ä¸º vfs æ¨¡å¼</strong>ã€‚</p><p>âš ï¸ é—®é¢˜æ¥äº†ï¼š</p><blockquote><p>vfs ä¸å†å…·å¤‡å†™æ—¶å¤åˆ¶ã€å±‚åˆå¹¶ç­‰ä¼˜åŒ–æœºåˆ¶ï¼Œé•œåƒå¯¼å…¥ä¸å®¹å™¨å¯åŠ¨ä¼šæ˜¾è‘—å˜æ…¢ï¼ˆå¯èƒ½æ…¢æ•°åå€ï¼‰ã€‚</p></blockquote><hr><h2 id="ğŸ’¬-ä¸ƒã€æ€»ç»“ä¸å»ºè®®"><a href="#ğŸ’¬-ä¸ƒã€æ€»ç»“ä¸å»ºè®®" class="headerlink" title="ğŸ’¬ ä¸ƒã€æ€»ç»“ä¸å»ºè®®"></a>ğŸ’¬ ä¸ƒã€æ€»ç»“ä¸å»ºè®®</h2><table><thead><tr><th>æ“ä½œ</th><th>å»ºè®®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç¦»çº¿å®‰è£…</td><td>âœ… å®˜æ–¹é™æ€äºŒè¿›åˆ¶åŒ…</td><td>è½»é‡ç¨³å®šï¼Œé¿å…ä¾èµ–å†²çª</td></tr><tr><td>æ ¹ç›®å½•è¿ç§»</td><td>âœ… å¯è¡Œï¼Œä½†éœ€ä½¿ç”¨æœ¬åœ°ç£ç›˜</td><td>é¿å… NFS &#x2F; vfs é™çº§</td></tr><tr><td>overlay2</td><td>ğŸš€ æ€§èƒ½ä¼˜é€‰</td><td>æœ¬åœ° ext4&#x2F;xfs æ–‡ä»¶ç³»ç»Ÿä¸‹æ•ˆæœæœ€ä½³</td></tr><tr><td>vfs</td><td>âš ï¸ ä»…åœ¨å¿…è¦æ—¶ä½¿ç”¨</td><td>ä¼šæå¤§é™ä½æ€§èƒ½</td></tr></tbody></table><hr><h2 id="ğŸ§­-å…«ã€å‚è€ƒèµ„æ–™"><a href="#ğŸ§­-å…«ã€å‚è€ƒèµ„æ–™" class="headerlink" title="ğŸ§­ å…«ã€å‚è€ƒèµ„æ–™"></a>ğŸ§­ å…«ã€å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://docs.docker.com/engine/install/">Docker å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://blog.csdn.net/chexlong/article/details/127932711">CSDN: Linux ç¦»çº¿å®‰è£… Docker</a></li><li><a href="https://docs.docker.com/storage/storagedriver/">Docker å­˜å‚¨é©±åŠ¨è¯´æ˜</a></li></ul><hr><p>ğŸ’¡ <strong>æ€è€ƒä¸€å¥è¯æ€»ç»“ï¼š</strong></p><blockquote><p>ç¦»çº¿ç¯å¢ƒä¸æ˜¯éšœç¢ï¼ŒçœŸæ­£çš„æŒ‘æˆ˜æ˜¯ç†è§£ Docker èƒŒåçš„å­˜å‚¨ä¸æ€§èƒ½æœºåˆ¶ã€‚</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>DevOps &amp; äº‘åŸç”Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>React å­¦ä¹ ç¬”è®°(å››): å˜é‡ç®¡ç† useRef + useMemo + useState</title>
    <link href="/2025/09/20/React-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9B%9B-%E5%8F%98%E9%87%8F%E7%AE%A1%E7%90%86useRef-useMemo-useState/"/>
    <url>/2025/09/20/React-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9B%9B-%E5%8F%98%E9%87%8F%E7%AE%A1%E7%90%86useRef-useMemo-useState/</url>
    
    <content type="html"><![CDATA[<h1 id="âš›ï¸-React-Hook-å­¦ä¹ ç¬”è®°ï¼šuseRef-vs-useMemo-vs-useState"><a href="#âš›ï¸-React-Hook-å­¦ä¹ ç¬”è®°ï¼šuseRef-vs-useMemo-vs-useState" class="headerlink" title="âš›ï¸ React Hook å­¦ä¹ ç¬”è®°ï¼šuseRef vs useMemo vs useState"></a>âš›ï¸ React Hook å­¦ä¹ ç¬”è®°ï¼š<code>useRef</code> vs <code>useMemo</code> vs <code>useState</code></h1><p>è¿™ä¸‰ä¸ª Hook éƒ½æ˜¯ React ä¸­çš„â€œçŠ¶æ€ç®¡ç† &amp; æ€§èƒ½ä¼˜åŒ–â€æ ¸å¿ƒå·¥å…·ã€‚<br>ä½†å®ƒä»¬çš„ç”¨é€”å®Œå…¨ä¸åŒ ğŸ‘‡</p><hr><h2 id="ğŸ§©-ä¸€ã€useState-â€”â€”-ç®¡ç†ç»„ä»¶çŠ¶æ€ï¼ˆå¯è§¦å‘æ¸²æŸ“ï¼‰"><a href="#ğŸ§©-ä¸€ã€useState-â€”â€”-ç®¡ç†ç»„ä»¶çŠ¶æ€ï¼ˆå¯è§¦å‘æ¸²æŸ“ï¼‰" class="headerlink" title="ğŸ§© ä¸€ã€useState â€”â€” ç®¡ç†ç»„ä»¶çŠ¶æ€ï¼ˆå¯è§¦å‘æ¸²æŸ“ï¼‰"></a>ğŸ§© ä¸€ã€<code>useState</code> â€”â€” ç®¡ç†ç»„ä»¶çŠ¶æ€ï¼ˆå¯è§¦å‘æ¸²æŸ“ï¼‰</h2><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);<br><br><span class="hljs-keyword">return</span> (<br>  <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç‚¹å‡»æ¬¡æ•°ï¼š&#123;count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/&gt;</span></span><br>);<br></code></pre></td></tr></table></figure><h3 id="âœ…-ç‰¹ç‚¹"><a href="#âœ…-ç‰¹ç‚¹" class="headerlink" title="âœ… ç‰¹ç‚¹"></a>âœ… ç‰¹ç‚¹</h3><ul><li><strong>ç”¨äºä¿å­˜â€œä¼šå½±å“ UIâ€çš„çŠ¶æ€</strong></li><li><strong>æ›´æ–°ä¼šè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“</strong></li><li><strong>å€¼åœ¨æ¯æ¬¡æ¸²æŸ“ä¸­éƒ½æ˜¯ç‹¬ç«‹çš„</strong></li></ul><h3 id="âš ï¸-æ³¨æ„"><a href="#âš ï¸-æ³¨æ„" class="headerlink" title="âš ï¸ æ³¨æ„"></a>âš ï¸ æ³¨æ„</h3><ul><li>æ¯æ¬¡ <code>setCount</code> éƒ½ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚</li><li>ä¸é€‚åˆå­˜å‚¨ä¸ä¼šæ˜¾ç¤ºåœ¨é¡µé¢ä¸Šçš„æ•°æ®ã€‚</li></ul><hr><h2 id="ğŸ§ -äºŒã€useRef-â€”â€”-ä¿å­˜å¼•ç”¨ï¼ˆä¸ä¼šè§¦å‘æ¸²æŸ“ï¼‰"><a href="#ğŸ§ -äºŒã€useRef-â€”â€”-ä¿å­˜å¼•ç”¨ï¼ˆä¸ä¼šè§¦å‘æ¸²æŸ“ï¼‰" class="headerlink" title="ğŸ§  äºŒã€useRef â€”â€” ä¿å­˜å¼•ç”¨ï¼ˆä¸ä¼šè§¦å‘æ¸²æŸ“ï¼‰"></a>ğŸ§  äºŒã€<code>useRef</code> â€”â€” ä¿å­˜å¼•ç”¨ï¼ˆä¸ä¼šè§¦å‘æ¸²æŸ“ï¼‰</h2><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> inputRef = useRef&lt;<span class="hljs-title class_">HTMLInputElement</span>&gt;(<span class="hljs-literal">null</span>);<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">focusInput</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  inputRef.<span class="hljs-property">current</span>?.<span class="hljs-title function_">focus</span>();<br>&#125;;<br><br><span class="hljs-keyword">return</span> (<br>  <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;inputRef&#125;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;ç‚¹æˆ‘èšç„¦è¯•è¯•&quot;</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;focusInput&#125;</span>&gt;</span>èšç„¦è¾“å…¥æ¡†<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/&gt;</span></span><br>);<br></code></pre></td></tr></table></figure><h3 id="âœ…-ç‰¹ç‚¹-1"><a href="#âœ…-ç‰¹ç‚¹-1" class="headerlink" title="âœ… ç‰¹ç‚¹"></a>âœ… ç‰¹ç‚¹</h3><ul><li>ä¿å­˜ä¸€ä¸ª<strong>å¯å˜çš„å¼•ç”¨å€¼</strong>ï¼Œè·¨æ¸²æŸ“å‘¨æœŸä¸å˜ã€‚</li><li><strong>ä¿®æ”¹ <code>.current</code> ä¸ä¼šè§¦å‘æ¸²æŸ“</strong>ã€‚</li><li>å¸¸ç”¨äºï¼š<ul><li>è®¿é—® DOM å…ƒç´ ï¼ˆå¦‚ä¸Šä¾‹ï¼‰</li><li>ä¿å­˜ä¸Šä¸€æ¬¡çš„å€¼ã€å®šæ—¶å™¨ ID ç­‰</li></ul></li></ul><h3 id="âš ï¸-æ³¨æ„-1"><a href="#âš ï¸-æ³¨æ„-1" class="headerlink" title="âš ï¸ æ³¨æ„"></a>âš ï¸ æ³¨æ„</h3><p><code>useRef</code> æ˜¯â€œé™æ€çš„â€ï¼Œå€¼å˜åŒ–ä¸ä¼šæ›´æ–° UIã€‚</p><hr><h2 id="ğŸš€-ä¸‰ã€useMemo-â€”â€”-æ€§èƒ½ä¼˜åŒ–ï¼ˆç¼“å­˜è®¡ç®—ç»“æœï¼‰"><a href="#ğŸš€-ä¸‰ã€useMemo-â€”â€”-æ€§èƒ½ä¼˜åŒ–ï¼ˆç¼“å­˜è®¡ç®—ç»“æœï¼‰" class="headerlink" title="ğŸš€ ä¸‰ã€useMemo â€”â€” æ€§èƒ½ä¼˜åŒ–ï¼ˆç¼“å­˜è®¡ç®—ç»“æœï¼‰"></a>ğŸš€ ä¸‰ã€<code>useMemo</code> â€”â€” æ€§èƒ½ä¼˜åŒ–ï¼ˆç¼“å­˜è®¡ç®—ç»“æœï¼‰</h2><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> expensiveValue = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;è®¡ç®—ä¸­...&quot;</span>);<br>  <span class="hljs-keyword">return</span> data.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> d.<span class="hljs-property">active</span>).<span class="hljs-property">length</span>;<br>&#125;, [data]);<br></code></pre></td></tr></table></figure><h3 id="âœ…-ç‰¹ç‚¹-2"><a href="#âœ…-ç‰¹ç‚¹-2" class="headerlink" title="âœ… ç‰¹ç‚¹"></a>âœ… ç‰¹ç‚¹</h3><ul><li>ç¼“å­˜â€œ<strong>è®¡ç®—ç»“æœ</strong>â€ï¼Œé¿å…æ¯æ¬¡æ¸²æŸ“éƒ½é‡å¤æ‰§è¡Œã€‚</li><li>ä»…å½“ä¾èµ–é¡¹ <code>[data]</code> å˜åŒ–æ—¶æ‰é‡æ–°è®¡ç®—ã€‚</li></ul><h3 id="âš™ï¸-å¸¸è§ç”¨é€”"><a href="#âš™ï¸-å¸¸è§ç”¨é€”" class="headerlink" title="âš™ï¸ å¸¸è§ç”¨é€”"></a>âš™ï¸ å¸¸è§ç”¨é€”</h3><ul><li>è®¡ç®—å¤æ‚æ•°æ®ï¼ˆå¦‚æ’åºã€è¿‡æ»¤ï¼‰</li><li>é¿å…å­ç»„ä»¶é‡å¤æ¸²æŸ“ï¼ˆæ­é… <code>React.memo</code>ï¼‰</li></ul><h3 id="âš ï¸-æ³¨æ„-2"><a href="#âš ï¸-æ³¨æ„-2" class="headerlink" title="âš ï¸ æ³¨æ„"></a>âš ï¸ æ³¨æ„</h3><ul><li><strong>ä¸ä¼šä¿å­˜å¼•ç”¨æˆ–çŠ¶æ€ï¼Œåªç¼“å­˜ç»“æœã€‚</strong></li><li>ä¾èµ–é¡¹ä¸€å®šè¦å†™å¯¹ï¼Œå¦åˆ™ç¼“å­˜æ— æ•ˆæˆ–é”™è¯¯ã€‚</li></ul><hr><h2 id="ğŸ§­-å››ã€ä¸‰è€…å¯¹æ¯”æ€»ç»“"><a href="#ğŸ§­-å››ã€ä¸‰è€…å¯¹æ¯”æ€»ç»“" class="headerlink" title="ğŸ§­ å››ã€ä¸‰è€…å¯¹æ¯”æ€»ç»“"></a>ğŸ§­ å››ã€ä¸‰è€…å¯¹æ¯”æ€»ç»“</h2><table><thead><tr><th>Hook</th><th>æ˜¯å¦è§¦å‘æ¸²æŸ“</th><th>ç”¨é€”</th><th>ç¤ºä¾‹åœºæ™¯</th></tr></thead><tbody><tr><td><code>useState</code></td><td>âœ… ä¼š</td><td>ç®¡ç†é¡µé¢çŠ¶æ€</td><td>æŒ‰é’®è®¡æ•°ã€è¡¨å•è¾“å…¥</td></tr><tr><td><code>useRef</code></td><td>âŒ ä¸ä¼š</td><td>ä¿å­˜å¼•ç”¨æˆ–ä¸´æ—¶å˜é‡</td><td>è·å– DOMã€ä¿å­˜ timer</td></tr><tr><td><code>useMemo</code></td><td>âš™ï¸ ä¸ä¼šï¼ˆç¼“å­˜ç»“æœï¼‰</td><td>æ€§èƒ½ä¼˜åŒ–ï¼ˆé¿å…é‡å¤è®¡ç®—ï¼‰</td><td>è¿‡æ»¤ã€æ’åºã€å¤§è®¡ç®—é‡å‡½æ•°</td></tr></tbody></table><hr><h2 id="ğŸ’¡-å°ç»“"><a href="#ğŸ’¡-å°ç»“" class="headerlink" title="ğŸ’¡ å°ç»“"></a>ğŸ’¡ å°ç»“</h2><ul><li>ğŸ‘‰ æƒ³â€œä¿å­˜æ•°æ®å¹¶æ›´æ–°ç•Œé¢â€ â†’ <code>useState</code>  </li><li>ğŸ‘‰ æƒ³â€œä¿å­˜æ•°æ®ä½†ä¸æ¸²æŸ“â€ â†’ <code>useRef</code>  </li><li>ğŸ‘‰ æƒ³â€œç¼“å­˜è®¡ç®—ç»“æœâ€ â†’ <code>useMemo</code></li></ul>]]></content>
    
    
    <categories>
      
      <category>Webå‰ç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>React å­¦ä¹ ç¬”è®°(ä¸‰): çŠ¶æ€ç®¡ç† useContext + useReducer + useEffect</title>
    <link href="/2025/09/15/React-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%89-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86useContext-useReducer-useEffect/"/>
    <url>/2025/09/15/React-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%89-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86useContext-useReducer-useEffect/</url>
    
    <content type="html"><![CDATA[<p>åœ¨ React ä¸­ï¼Œå¦‚æœä½ æƒ³åœ¨ç»„ä»¶æ ‘ä¸­<strong>å…±äº«çŠ¶æ€</strong>ï¼ˆæ¯”å¦‚ç”¨æˆ·ä¿¡æ¯ã€ç™»å½•çŠ¶æ€ç­‰ï¼‰ï¼Œå°±å¯ä»¥ç”¨ã€Œ<code>useContext</code> + <code>useReducer</code> + <code>useEffect</code>ã€è¿™ç»„ç»„åˆæ‹³ ğŸ¥Šã€‚</p><p>æ•´ä½“æµç¨‹å¤§è‡´æ˜¯è¿™æ ·çš„ğŸ‘‡ï¼š</p><blockquote><p><strong>å‰ç«¯ dispatch â†’ reducer å“åº” action â†’ æ§åˆ¶çŠ¶æ€å¦‚ä½•å˜åŒ–</strong></p></blockquote><p>è¿™å°±åƒæ˜¯ä¸€ä¸ª<strong>ç®€åŒ–ç‰ˆ Redux</strong>ï¼Œä½†ä¸éœ€è¦é¢å¤–çš„åº“ã€‚</p><hr><h2 id="ğŸ§©-ä¸€ã€context-tsx"><a href="#ğŸ§©-ä¸€ã€context-tsx" class="headerlink" title="ğŸ§© ä¸€ã€context.tsx"></a>ğŸ§© ä¸€ã€context.tsx</h2><p>åˆ›å»ºä¸Šä¸‹æ–‡ï¼ˆContextï¼‰ï¼Œç”¨æ¥ä¿å­˜å…¨å±€çš„ç”¨æˆ·çŠ¶æ€ä»¥åŠæ›´æ–°çŠ¶æ€çš„å‡½æ•° <code>dispatch</code>ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; createContext, useContext, <span class="hljs-keyword">type</span> <span class="hljs-title class_">Dispatch</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> &#123; <span class="hljs-title class_">UserState</span>, <span class="hljs-title class_">UserAction</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;~/types/user&quot;</span>;<br><br><span class="hljs-comment">// ğŸ¯ å®šä¹‰ä¸Šä¸‹æ–‡ä¸­åŒ…å«çš„å†…å®¹</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserContextType</span> &#123;<br>    <span class="hljs-attr">state</span>: <span class="hljs-title class_">UserState</span>;<br>    <span class="hljs-attr">dispatch</span>: <span class="hljs-title class_">Dispatch</span>&lt;<span class="hljs-title class_">UserAction</span>&gt;;<br>&#125;<br><br><span class="hljs-comment">// ğŸŒ åˆ›å»ºä¸Šä¸‹æ–‡å˜é‡ï¼ˆåˆå§‹å€¼ä¸º undefinedï¼‰</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">UserContext</span> = createContext&lt;<span class="hljs-title class_">UserContextType</span> | <span class="hljs-literal">undefined</span>&gt;(<span class="hljs-literal">undefined</span>);<br></code></pre></td></tr></table></figure><blockquote><p>ğŸ§  å°ç»“ï¼š</p><ul><li>stateï¼šå­˜å‚¨ç”¨æˆ·ä¿¡æ¯</li><li>dispatchï¼šè§¦å‘çŠ¶æ€æ”¹å˜çš„å‡½æ•°</li><li>UserContextï¼šä¸€ä¸ªå…¨å±€å…±äº«çš„æ•°æ®æºå®¹å™¨</li></ul></blockquote><h2 id="ğŸ§±-äºŒã€provider-tsx"><a href="#ğŸ§±-äºŒã€provider-tsx" class="headerlink" title="ğŸ§± äºŒã€provider.tsx"></a>ğŸ§± äºŒã€provider.tsx</h2><p><code>Provider</code> å°±åƒä¸€ä¸ªâ€œå¤–å±‚åŒ…è£¹å™¨â€ğŸ“¦ï¼Œè´Ÿè´£æä¾›ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®ï¼ˆstateï¼‰å’Œæ“ä½œæ–¹æ³•ï¼ˆdispatchï¼‰ç»™æ•´ä¸ªåº”ç”¨ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useContext, useEffect, useReducer &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">UserContext</span>, <span class="hljs-keyword">type</span> <span class="hljs-title class_">UserContextType</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./context&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; userReducer &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./reducer&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> &#123; <span class="hljs-title class_">UserState</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;~/types/user&quot;</span>;<br></code></pre></td></tr></table></figure><h3 id="ğŸŒ±-åˆå§‹åŒ–ç”¨æˆ·çŠ¶æ€"><a href="#ğŸŒ±-åˆå§‹åŒ–ç”¨æˆ·çŠ¶æ€" class="headerlink" title="ğŸŒ± åˆå§‹åŒ–ç”¨æˆ·çŠ¶æ€"></a>ğŸŒ± åˆå§‹åŒ–ç”¨æˆ·çŠ¶æ€</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">let</span> <span class="hljs-attr">initialState</span>: <span class="hljs-title class_">UserState</span> = &#123;<br><span class="hljs-attr">authenticated</span>: <span class="hljs-literal">false</span>,<br><span class="hljs-attr">user</span>: &#123;<br><span class="hljs-attr">id</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">name</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">phone</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">province</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">city</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">email</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">title</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">organization</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">introduction</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">roleId</span>: <span class="hljs-number">2</span>,<br><span class="hljs-attr">roleName</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">roleDesc</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">maxCpu</span>: <span class="hljs-number">2</span>,<br><span class="hljs-attr">maxStorage</span>: <span class="hljs-number">5</span>,<br><span class="hljs-attr">maxJob</span>: <span class="hljs-number">3</span>,<br><span class="hljs-attr">isSuperAdmin</span>: <span class="hljs-literal">false</span>,<br>&#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="ğŸ§©-åˆ›å»ºè‡ªå®šä¹‰-Hook"><a href="#ğŸ§©-åˆ›å»ºè‡ªå®šä¹‰-Hook" class="headerlink" title="ğŸ§© åˆ›å»ºè‡ªå®šä¹‰ Hook"></a>ğŸ§© åˆ›å»ºè‡ªå®šä¹‰ Hook</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useUserContext</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> context = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">UserContext</span>);<br><span class="hljs-keyword">if</span> (!context)<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;useUserContext å¿…é¡»åœ¨ UserProvider ä¸­ä½¿ç”¨ï¼&quot;</span>);<br><span class="hljs-keyword">return</span> context;<br>&#125;;<br></code></pre></td></tr></table></figure><blockquote><p>ğŸ“Œ è¿™æ ·ä»»ä½•ç»„ä»¶éƒ½å¯ä»¥é€šè¿‡ useUserContext() æ¥è·å–å…¨å±€ç”¨æˆ·çŠ¶æ€ã€‚</p></blockquote><h3 id="ğŸ’¡-UserProvider-ç»„ä»¶"><a href="#ğŸ’¡-UserProvider-ç»„ä»¶" class="headerlink" title="ğŸ’¡ UserProvider ç»„ä»¶"></a>ğŸ’¡ UserProvider ç»„ä»¶</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">UserProvider</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;&#123; <span class="hljs-attr">children</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span> &#125;&gt; = <span class="hljs-function">(<span class="hljs-params">&#123; children &#125;</span>) =&gt;</span> &#123;<br><span class="hljs-keyword">const</span> [state, dispatch] = <span class="hljs-title function_">useReducer</span>(userReducer, initialState, <span class="hljs-function">(<span class="hljs-params">init</span>) =&gt;</span> &#123;<br><span class="hljs-comment">// ğŸ§­ LAZY INITIALIZERï¼šä» localStorage è¯»å–ç”¨æˆ·çŠ¶æ€</span><br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-keyword">const</span> storedUser = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&quot;user&quot;</span>);<br><span class="hljs-keyword">const</span> userId = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&quot;userId&quot;</span>);<br><span class="hljs-keyword">if</span> (userId &amp;&amp; storedUser) &#123;<br><span class="hljs-keyword">return</span> &#123;<br><span class="hljs-attr">authenticated</span>: <span class="hljs-literal">true</span>,<br><span class="hljs-attr">user</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(storedUser),<br>&#125;;<br>&#125;<br>&#125; <span class="hljs-keyword">catch</span> (e) &#123;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(e);<br>&#125;<br><span class="hljs-keyword">return</span> init; <span class="hljs-comment">// é»˜è®¤åˆå§‹å€¼</span><br>&#125;);<br><br><span class="hljs-comment">// âœ… å‰¯ä½œç”¨ï¼šåŒæ­¥ localStorageï¼ˆæŒä¹…åŒ–ç”¨æˆ·çŠ¶æ€ï¼‰</span><br><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-keyword">if</span> (state.<span class="hljs-property">authenticated</span>) &#123;<br><span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&quot;user&quot;</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(state.<span class="hljs-property">user</span>));<br><span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&quot;userId&quot;</span>, state.<span class="hljs-property">user</span>.<span class="hljs-property">id</span>);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">&quot;user&quot;</span>);<br><span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">&quot;userId&quot;</span>);<br>&#125;<br>&#125;, [state]);<br><br><span class="hljs-comment">// ğŸŒ æä¾›ä¸Šä¸‹æ–‡ï¼ˆstate + dispatchï¼‰</span><br><span class="hljs-keyword">return</span> (<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">state</span>, <span class="hljs-attr">dispatch</span> &#125;&#125;&gt;</span></span><br><span class="language-xml">&#123;children&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">UserContext.Provider</span>&gt;</span></span><br>);<br>&#125;;<br></code></pre></td></tr></table></figure><blockquote><p>ğŸ§  è¿™é‡Œåšäº†ä¸‰ä»¶äº‹ï¼š</p><ul><li>ä½¿ç”¨ useReducer ç®¡ç†çŠ¶æ€ï¼›</li><li>ç”¨ useEffect å®ç°æœ¬åœ°æŒä¹…åŒ–ï¼ˆåŒæ­¥åˆ° localStorageï¼‰ï¼›</li><li>ç”¨ &lt;UserContext.Provider&gt; å°† state å’Œ dispatch å‘å…¨å±€æä¾›ã€‚</li></ul></blockquote><h2 id="âš™ï¸-ä¸‰ã€reducer-tsx"><a href="#âš™ï¸-ä¸‰ã€reducer-tsx" class="headerlink" title="âš™ï¸ ä¸‰ã€reducer.tsx"></a>âš™ï¸ ä¸‰ã€reducer.tsx</h2><p><code>reducer</code> æ˜¯çŠ¶æ€çš„â€œå¤§è„‘â€ ğŸ§ ï¼Œ<br>å†³å®šåœ¨ä¸åŒçš„ action ä¸‹çŠ¶æ€å¦‚ä½•å˜åŒ–ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> &#123; <span class="hljs-title class_">UserState</span>, <span class="hljs-title class_">UserAction</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;~/types/user&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">userReducer</span>(<span class="hljs-params"><span class="hljs-attr">state</span>: <span class="hljs-title class_">UserState</span>, <span class="hljs-attr">action</span>: <span class="hljs-title class_">UserAction</span></span>): <span class="hljs-title class_">UserState</span> &#123;<br><span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) &#123;<br><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;LOGIN&quot;</span>:<br><span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">authenticated</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">user</span>: action.<span class="hljs-property">payload</span> &#125;;<br><br><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;LOGOUT&quot;</span>:<br><span class="hljs-keyword">return</span> &#123;<br><span class="hljs-attr">authenticated</span>: <span class="hljs-literal">false</span>,<br><span class="hljs-attr">user</span>: &#123;<br><span class="hljs-attr">id</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">name</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">phone</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">province</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">city</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">email</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">title</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">organization</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">introduction</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">roleId</span>: <span class="hljs-number">2</span>,<br><span class="hljs-attr">roleName</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">roleDesc</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">maxCpu</span>: <span class="hljs-number">2</span>,<br><span class="hljs-attr">maxStorage</span>: <span class="hljs-number">5</span>,<br><span class="hljs-attr">maxJob</span>: <span class="hljs-number">3</span>,<br><span class="hljs-attr">isSuperAdmin</span>: <span class="hljs-literal">false</span>,<br>&#125;,<br>&#125;;<br><br><span class="hljs-attr">default</span>:<br><span class="hljs-keyword">return</span> state;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>ğŸ“˜ å°è´´å£«ï¼š</p><ul><li>action.type è¡¨ç¤ºåŠ¨ä½œç±»å‹ï¼Œæ¯”å¦‚ â€œLOGINâ€ã€â€LOGOUTâ€</li><li>action.payload æ˜¯æºå¸¦çš„æ•°æ®</li><li>reducer å¿…é¡»æ˜¯çº¯å‡½æ•°ï¼ˆä¸èƒ½ç›´æ¥ä¿®æ”¹ stateï¼‰</li></ul></blockquote><h2 id="ğŸ¨-å››ã€ä½¿ç”¨ç¤ºä¾‹"><a href="#ğŸ¨-å››ã€ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ğŸ¨ å››ã€ä½¿ç”¨ç¤ºä¾‹"></a>ğŸ¨ å››ã€ä½¿ç”¨ç¤ºä¾‹</h2><p>æœ‰äº†ä¸Šé¢çš„ Providerï¼Œæˆ‘ä»¬åœ¨é¡µé¢ä¸­å¯ä»¥è¿™æ ·ç”¨ğŸ‘‡ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">LoginButton</span>(<span class="hljs-params"></span>) &#123;<br><span class="hljs-keyword">const</span> &#123; dispatch &#125; = <span class="hljs-title function_">useUserContext</span>();<br><br><span class="hljs-keyword">return</span> (<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span></span><br><span class="language-xml">dispatch(&#123; type: &quot;LOGIN&quot;, payload: &#123; id: &quot;1&quot;, name: &quot;Paxton&quot; &#125; &#125;)</span><br><span class="language-xml">&#125;</span><br><span class="language-xml">&gt;</span><br><span class="language-xml">ç™»å½•</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>);<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">UserInfo</span>(<span class="hljs-params"></span>) &#123;<br><span class="hljs-keyword">const</span> &#123; state &#125; = <span class="hljs-title function_">useUserContext</span>();<br><br><span class="hljs-keyword">return</span> (<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">&#123;state.authenticated ? (</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ¬¢è¿å›æ¥ï¼Œ&#123;state.user.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">) : (</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¯·å…ˆç™»å½• ğŸ™ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">)&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>);<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶ååœ¨æœ€å¤–å±‚åŒ…è£¹åº”ç”¨ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript">&lt;<span class="hljs-title class_">UserProvider</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span><br>&lt;/<span class="hljs-title class_">UserProvider</span>&gt;<br></code></pre></td></tr></table></figure><p>è¿™æ · <code>App</code> ä¸­çš„æ‰€æœ‰ç»„ä»¶éƒ½èƒ½å…±äº«ç™»å½•çŠ¶æ€ âœ…ã€‚</p><h2 id="ğŸ§­-æ•´ä½“å…³ç³»å›¾"><a href="#ğŸ§­-æ•´ä½“å…³ç³»å›¾" class="headerlink" title="ğŸ§­ æ•´ä½“å…³ç³»å›¾"></a>ğŸ§­ æ•´ä½“å…³ç³»å›¾</h2><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs scss">ç»„ä»¶ â†’ <span class="hljs-built_in">dispatch</span>(action)<br>        â†“<br>     <span class="hljs-built_in">reducer</span>(state, action)<br>        â†“<br>     æ–°çš„ state<br>        â†“<br>   Context Provider<br>        â†“<br> æ‰€æœ‰ <span class="hljs-built_in">useUserContext</span>() çš„ç»„ä»¶æ›´æ–°<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Webå‰ç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>React å­¦ä¹ ç¬”è®°(äºŒ): Reacté¡¹ç›®æ¡†æ¶æ„å»º</title>
    <link href="/2025/09/08/React-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%BA%8C-React%E9%A1%B9%E7%9B%AE%E6%A1%86%E6%9E%B6%E6%9E%84%E5%BB%BA/"/>
    <url>/2025/09/08/React-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%BA%8C-React%E9%A1%B9%E7%9B%AE%E6%A1%86%E6%9E%B6%E6%9E%84%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="1ï¸âƒ£-åˆ›å»ºé¡¹ç›®"><a href="#1ï¸âƒ£-åˆ›å»ºé¡¹ç›®" class="headerlink" title="1ï¸âƒ£ åˆ›å»ºé¡¹ç›®"></a>1ï¸âƒ£ åˆ›å»ºé¡¹ç›®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ç”±reactå®˜æ–¹æ¨èçš„react router v7åˆ›å»ºé¡¹ç›®</span><br>npx create-react-router@latest<br><span class="hljs-comment"># å®‰è£…eslintæ’ä»¶</span><br>npm install --save-dev eslint-config-react-app eslint@^8.0.0<br><span class="hljs-comment"># å®‰è£…antd UIåº“</span><br>npm i antd --save<br><span class="hljs-comment"># å®‰è£…antdé’ˆå¯¹react 19çš„å…¼å®¹åŒ…</span><br>npm install @ant-design/v5-patch-for-react-19 --save <br><span class="hljs-comment"># å®‰è£…tailwindæ’ä»¶</span><br>npm i tailwind-scrollbar-hide<br><span class="hljs-comment"># è¿è¡Œé¡¹ç›®</span><br>npm run dev<br></code></pre></td></tr></table></figure><h2 id="2ï¸âƒ£-é¡µé¢æ¡†æ¶æ­å»º"><a href="#2ï¸âƒ£-é¡µé¢æ¡†æ¶æ­å»º" class="headerlink" title="2ï¸âƒ£ é¡µé¢æ¡†æ¶æ­å»º"></a>2ï¸âƒ£ é¡µé¢æ¡†æ¶æ­å»º</h2><h3 id="ç›®å½•æ„å»º"><a href="#ç›®å½•æ„å»º" class="headerlink" title="ç›®å½•æ„å»º"></a>ç›®å½•æ„å»º</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs stylus">â”œâ”€â”€ Dockerfile<br>â”œâ”€â”€ README<span class="hljs-selector-class">.md</span><br>â”œâ”€â”€ app<br>â”‚   â”œâ”€â”€ app<span class="hljs-selector-class">.css</span><br>â”‚   â”œâ”€â”€ assets<br>â”‚   â”‚   â”œâ”€â”€ menu-logo-slim<span class="hljs-selector-class">.svg</span><br>â”‚   â”‚   â””â”€â”€ menu-logo<span class="hljs-selector-class">.svg</span><br>â”‚   â”œâ”€â”€ components<br>â”‚   â”œâ”€â”€ layouts<br>â”‚   â”‚   â”œâ”€â”€ scripts<br>â”‚   â”‚   â”‚   â””â”€â”€ menus<span class="hljs-selector-class">.tsx</span><br>â”‚   â”‚   â””â”€â”€ vertical-dashboard<span class="hljs-selector-class">.tsx</span><br>â”‚   â”œâ”€â”€ pages<br>â”‚   â”œâ”€â”€ root<span class="hljs-selector-class">.tsx</span><br>â”‚   â”œâ”€â”€ routes<br>â”‚   â”‚   â”œâ”€â”€ dashboard<span class="hljs-selector-class">.tsx</span><br>â”‚   â”‚   â””â”€â”€ home<span class="hljs-selector-class">.tsx</span><br>â”‚   â”œâ”€â”€ routes<span class="hljs-selector-class">.ts</span><br>â”‚   â””â”€â”€ welcome<br>â”‚       â”œâ”€â”€ logo-dark<span class="hljs-selector-class">.svg</span><br>â”‚       â”œâ”€â”€ logo-light<span class="hljs-selector-class">.svg</span><br>â”‚       â””â”€â”€ welcome<span class="hljs-selector-class">.tsx</span><br>â”œâ”€â”€ package-lock<span class="hljs-selector-class">.json</span><br>â”œâ”€â”€ package<span class="hljs-selector-class">.json</span><br>â”œâ”€â”€ public<br>â”‚   â””â”€â”€ favicon<span class="hljs-selector-class">.ico</span><br>â”œâ”€â”€ react-router<span class="hljs-selector-class">.config</span><span class="hljs-selector-class">.ts</span><br>â”œâ”€â”€ tsconfig<span class="hljs-selector-class">.json</span><br>â””â”€â”€ vite<span class="hljs-selector-class">.config</span>.ts<br></code></pre></td></tr></table></figure><h3 id="åŸºæœ¬é…ç½®"><a href="#åŸºæœ¬é…ç½®" class="headerlink" title="åŸºæœ¬é…ç½®"></a>åŸºæœ¬é…ç½®</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-comment">// react-router.config.ts</span><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> &#123; <span class="hljs-title class_">Config</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@react-router/dev/config&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-comment">// Config options...</span><br>  <span class="hljs-comment">// Server-side render by default, to enable SPA mode set this to `false`</span><br>  <span class="hljs-attr">ssr</span>: <span class="hljs-literal">false</span>,<br>&#125; <span class="hljs-keyword">satisfies</span> <span class="hljs-title class_">Config</span>;<br><br><span class="hljs-comment">// .prettierrc</span><br>&#123;<br>    <span class="hljs-string">&quot;tabWidth&quot;</span>: <span class="hljs-number">4</span>,<br>    <span class="hljs-string">&quot;useTabs&quot;</span>: <span class="hljs-literal">true</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="è·¯ç”±é…ç½®"><a href="#è·¯ç”±é…ç½®" class="headerlink" title="è·¯ç”±é…ç½®"></a>è·¯ç”±é…ç½®</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-comment">// app/routes.ts</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-keyword">type</span> <span class="hljs-title class_">RouteConfig</span>, index, route &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@react-router/dev/routes&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [<br>    <span class="hljs-comment">// å¯¹åº”æ–‡ä»¶ä¸èƒ½ç”¨å…·åå¯¼å‡º</span><br>    <span class="hljs-title function_">route</span>(<span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-string">&quot;routes/dashboard.tsx&quot;</span>, [<br>        <span class="hljs-title function_">index</span>(<span class="hljs-string">&quot;routes/home.tsx&quot;</span>),<br>        <span class="hljs-title function_">route</span>(<span class="hljs-string">&quot;dashboard&quot;</span>, <span class="hljs-string">&quot;welcome/welcome.tsx&quot;</span>),<br>        <span class="hljs-title function_">route</span>(<span class="hljs-string">&quot;user&quot;</span>, <span class="hljs-string">&quot;welcome/welcome.tsx&quot;</span>)<br>    ]),<br>] <span class="hljs-keyword">satisfies</span> <span class="hljs-title class_">RouteConfig</span>;<br></code></pre></td></tr></table></figure><h3 id="Layouté…ç½®"><a href="#Layouté…ç½®" class="headerlink" title="Layouté…ç½®"></a>Layouté…ç½®</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-comment">// ------app/root.tsxæ·»åŠ ï¼š------</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;@ant-design/v5-patch-for-react-19&quot;</span>;<br><br><span class="hljs-comment">// ------app/layouts/vertical-dashboard.tsx------</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useMemo, useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> &#123;<br><span class="hljs-title class_">VerticalRightOutlined</span>,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@ant-design/icons&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> &#123; <span class="hljs-title class_">MenuProps</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;antd&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Breadcrumb</span>, <span class="hljs-title class_">Layout</span>, <span class="hljs-title class_">Menu</span>, theme, <span class="hljs-title class_">Tooltip</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;antd&quot;</span>;<br><span class="hljs-keyword">import</span> menuLogo <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;~/assets/menu-logo.svg&quot;</span>;<br><span class="hljs-keyword">import</span> menuLogoSlim <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;~/assets/menu-logo-slim.svg&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Outlet</span>, useLocation, useNavigate &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-router&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; items &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./scripts/menus&quot;</span>;<br><span class="hljs-keyword">const</span> &#123; <span class="hljs-title class_">Header</span>, <span class="hljs-title class_">Content</span>, <span class="hljs-title class_">Footer</span>, <span class="hljs-title class_">Sider</span> &#125; = <span class="hljs-title class_">Layout</span>;<br><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">VerticalDashboardLayout</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-keyword">const</span> [collapsed, setCollapsed] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);<br><span class="hljs-keyword">const</span> &#123;<br><span class="hljs-attr">token</span>: &#123; colorBgContainer, borderRadiusLG &#125;,<br>&#125; = theme.<span class="hljs-title function_">useToken</span>();<br><span class="hljs-keyword">const</span> location = <span class="hljs-title function_">useLocation</span>();<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">selectedMenuItems</span>: <span class="hljs-built_in">string</span>[] = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-keyword">return</span> [location.<span class="hljs-property">pathname</span>];<br>&#125;, [location.<span class="hljs-property">pathname</span>]);<br><span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">handleMenuClick</span>: <span class="hljs-title class_">MenuProps</span>[<span class="hljs-string">&quot;onClick&quot;</span>] = <span class="hljs-function">(<span class="hljs-params">&#123; key &#125;</span>) =&gt;</span> &#123;<br><span class="hljs-title function_">navigate</span>(key);<br>&#125;;<br><br><span class="hljs-keyword">return</span> (<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Layout</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;h-screen&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Sider</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">trigger</span>=<span class="hljs-string">&#123;null&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">collapsible</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">width</span>=<span class="hljs-string">&#123;250&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">collapsed</span>=<span class="hljs-string">&#123;collapsed&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">className</span>=<span class="hljs-string">&quot;h-screen overflow-y-auto scrollbar-hide&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;demo-logo-vertical relative pb-1 pt-1&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">className</span>=<span class="hljs-string">&#123;</span>`<span class="hljs-attr">absolute</span> <span class="hljs-attr">top-0.5</span> <span class="hljs-attr">right-0.5</span> <span class="hljs-attr">text-</span>[#<span class="hljs-attr">e8e8e8</span>] <span class="hljs-attr">cursor-pointer</span> $&#123;<span class="hljs-attr">collapsed</span> &amp;&amp; &quot;<span class="hljs-attr">hidden</span>&quot;&#125;`&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">VerticalRightOutlined</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setCollapsed(true)&#125;</span><br><span class="language-xml">/&gt;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">src</span>=<span class="hljs-string">&#123;menuLogo&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;React Router&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">className</span>=<span class="hljs-string">&#123;</span>`<span class="hljs-attr">block</span> <span class="hljs-attr">w-full</span> $&#123;<span class="hljs-attr">collapsed</span> &amp;&amp; &quot;<span class="hljs-attr">hidden</span>&quot;&#125;`&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">/&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Tooltip</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;Expand Menu&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">src</span>=<span class="hljs-string">&#123;menuLogoSlim&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;React Router&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">className</span>=<span class="hljs-string">&#123;</span>`<span class="hljs-attr">block</span> <span class="hljs-attr">w-full</span> $&#123;<span class="hljs-attr">collapsed</span> || &quot;<span class="hljs-attr">hidden</span>&quot;&#125; <span class="hljs-attr">cursor-pointer</span>`&#125;</span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setCollapsed(false)&#125;</span><br><span class="language-xml">/&gt;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">Tooltip</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Menu</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">theme</span>=<span class="hljs-string">&quot;dark&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">selectedKeys</span>=<span class="hljs-string">&#123;selectedMenuItems&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">defaultSelectedKeys</span>=<span class="hljs-string">&#123;[</span>&quot;/<span class="hljs-attr">dashboard</span>&quot;]&#125;</span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;inline&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">items</span>=<span class="hljs-string">&#123;items&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;handleMenuClick&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">/&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">Sider</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Layout</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;h-screen overflow-auto&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Header</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">padding:</span> <span class="hljs-attr">0</span>, <span class="hljs-attr">background:</span> <span class="hljs-attr">colorBgContainer</span> &#125;&#125; /&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Content</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">margin:</span> &quot;<span class="hljs-attr">0</span> <span class="hljs-attr">16px</span>&quot;, <span class="hljs-attr">paddingTop:</span> &quot;<span class="hljs-attr">16px</span>&quot; &#125;&#125;&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">padding:</span> <span class="hljs-attr">24</span>,</span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">minHeight:</span> <span class="hljs-attr">360</span>,</span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">background:</span> <span class="hljs-attr">colorBgContainer</span>,</span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">borderRadius:</span> <span class="hljs-attr">borderRadiusLG</span>,</span></span><br><span class="hljs-tag"><span class="language-xml">&#125;&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Outlet</span> /&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">Content</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Footer</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">textAlign:</span> &quot;<span class="hljs-attr">center</span>&quot; &#125;&#125;&gt;</span></span><br><span class="language-xml">Copyright Â©&#123;new Date().getFullYear()&#125; Created by OpenGMS</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">Footer</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">Layout</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">Layout</span>&gt;</span></span><br>);<br>&#125;;<br><br><span class="hljs-comment">// ------app/layouts/scripts/menus.tsx------</span><br><span class="hljs-keyword">import</span> &#123;<br><span class="hljs-title class_">SettingOutlined</span>,<br><span class="hljs-title class_">TeamOutlined</span>,<br><span class="hljs-title class_">AuditOutlined</span>,<br><span class="hljs-title class_">UserOutlined</span>,<br><span class="hljs-title class_">DatabaseOutlined</span>,<br><span class="hljs-title class_">ConsoleSqlOutlined</span>,<br><span class="hljs-title class_">ControlOutlined</span>,<br><span class="hljs-title class_">FileProtectOutlined</span>,<br><span class="hljs-title class_">GlobalOutlined</span>,<br><span class="hljs-title class_">BlockOutlined</span>,<br><span class="hljs-title class_">ClearOutlined</span>,<br><span class="hljs-title class_">ProductOutlined</span>,<br><span class="hljs-title class_">DashboardOutlined</span>,<br><span class="hljs-title class_">VerticalRightOutlined</span>,<br><span class="hljs-title class_">InboxOutlined</span>,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@ant-design/icons&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> &#123; <span class="hljs-title class_">MenuProps</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;antd&quot;</span>;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">MenuItem</span> = <span class="hljs-title class_">Required</span>&lt;<span class="hljs-title class_">MenuProps</span>&gt;[<span class="hljs-string">&quot;items&quot;</span>][<span class="hljs-built_in">number</span>];<br><br><span class="hljs-comment">// å…·åå¯¼å‡º</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">items</span>: <span class="hljs-title class_">MenuItem</span>[] = [<br>&#123;<br><span class="hljs-attr">key</span>: <span class="hljs-string">&quot;/dashboard&quot;</span>, <span class="hljs-comment">// å¦‚æœä¸åŠ /å°±ä¼šæŒ‰ç›¸å¯¹è·¯å¾„è§£æ</span><br><span class="hljs-attr">label</span>: <span class="hljs-string">&quot;å·¥ä½œå°&quot;</span>,<br><span class="hljs-attr">icon</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">DashboardOutlined</span> /&gt;</span></span>,<br>&#125;,<br>&#123;<br><span class="hljs-attr">key</span>: <span class="hljs-string">&quot;1&quot;</span>,<br><span class="hljs-attr">label</span>: <span class="hljs-string">&quot;ç”¨æˆ·&quot;</span>,<br><span class="hljs-attr">type</span>: <span class="hljs-string">&quot;group&quot;</span>,<br><span class="hljs-attr">children</span>: [<br>&#123;<br><span class="hljs-attr">key</span>: <span class="hljs-string">&quot;/user&quot;</span>,<br><span class="hljs-attr">label</span>: <span class="hljs-string">&quot;ç”¨æˆ·ç®¡ç†&quot;</span>,<br><span class="hljs-attr">icon</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserOutlined</span> /&gt;</span></span>,<br>&#125;,<br>&#123;<br><span class="hljs-attr">key</span>: <span class="hljs-string">&quot;/role&quot;</span>,<br><span class="hljs-attr">label</span>: <span class="hljs-string">&quot;è§’è‰²ç®¡ç†&quot;</span>,<br><span class="hljs-attr">icon</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">TeamOutlined</span> /&gt;</span></span>,<br>&#125;,<br>&#123;<br><span class="hljs-attr">key</span>: <span class="hljs-string">&quot;/permission&quot;</span>,<br><span class="hljs-attr">label</span>: <span class="hljs-string">&quot;æƒé™é…ç½®&quot;</span>,<br><span class="hljs-attr">icon</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">AuditOutlined</span> /&gt;</span></span>,<br>&#125;,<br>],<br>&#125;,<br>&#123;<br><span class="hljs-attr">key</span>: <span class="hljs-string">&quot;2&quot;</span>,<br><span class="hljs-attr">label</span>: <span class="hljs-string">&quot;æ•°æ®&quot;</span>,<br><span class="hljs-attr">type</span>: <span class="hljs-string">&quot;group&quot;</span>,<br><span class="hljs-attr">children</span>: [<br>&#123;<br><span class="hljs-attr">key</span>: <span class="hljs-string">&quot;/sensor&quot;</span>,<br><span class="hljs-attr">label</span>: <span class="hljs-string">&quot;ä¼ æ„Ÿå™¨ä¿¡æ¯ç®¡ç†&quot;</span>,<br><span class="hljs-attr">icon</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">GlobalOutlined</span> /&gt;</span></span>,<br>&#125;,<br>&#123;<br><span class="hljs-attr">key</span>: <span class="hljs-string">&quot;/product&quot;</span>,<br><span class="hljs-attr">label</span>: <span class="hljs-string">&quot;äº§å“ä¿¡æ¯ç®¡ç†&quot;</span>,<br><span class="hljs-attr">icon</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">InboxOutlined</span> /&gt;</span></span>,<br>&#125;,<br>&#123;<br><span class="hljs-attr">key</span>: <span class="hljs-string">&quot;/satellite&quot;</span>,<br><span class="hljs-attr">label</span>: <span class="hljs-string">&quot;é¥æ„Ÿæ•°æ®ç®¡ç†&quot;</span>,<br><span class="hljs-attr">icon</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">DatabaseOutlined</span> /&gt;</span></span>,<br>&#125;,<br>&#123;<br><span class="hljs-attr">key</span>: <span class="hljs-string">&quot;/vector&quot;</span>,<br><span class="hljs-attr">label</span>: <span class="hljs-string">&quot;çŸ¢é‡æ•°æ®ç®¡ç†&quot;</span>,<br><span class="hljs-attr">icon</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">BlockOutlined</span> /&gt;</span></span>,<br>&#125;,<br>&#123;<br><span class="hljs-attr">key</span>: <span class="hljs-string">&quot;/theme&quot;</span>,<br><span class="hljs-attr">label</span>: <span class="hljs-string">&quot;æ …æ ¼äº§å“ç®¡ç†&quot;</span>,<br><span class="hljs-attr">icon</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ProductOutlined</span> /&gt;</span></span>,<br>&#125;,<br>],<br>&#125;,<br>&#123;<br><span class="hljs-attr">key</span>: <span class="hljs-string">&quot;3&quot;</span>,<br><span class="hljs-attr">label</span>: <span class="hljs-string">&quot;è¿ç»´&quot;</span>,<br><span class="hljs-attr">type</span>: <span class="hljs-string">&quot;group&quot;</span>,<br><span class="hljs-attr">children</span>: [<br>&#123;<br><span class="hljs-attr">key</span>: <span class="hljs-string">&quot;/cache&quot;</span>,<br><span class="hljs-attr">label</span>: <span class="hljs-string">&quot;ç¼“å­˜ç®¡ç†&quot;</span>,<br><span class="hljs-attr">icon</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ClearOutlined</span> /&gt;</span></span>,<br>&#125;,<br>&#123;<br><span class="hljs-attr">key</span>: <span class="hljs-string">&quot;/sql&quot;</span>,<br><span class="hljs-attr">label</span>: <span class="hljs-string">&quot;SQLç›‘æ§&quot;</span>,<br><span class="hljs-attr">icon</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ConsoleSqlOutlined</span> /&gt;</span></span>,<br>&#125;,<br>&#123;<br><span class="hljs-attr">key</span>: <span class="hljs-string">&quot;/audit&quot;</span>,<br><span class="hljs-attr">label</span>: <span class="hljs-string">&quot;æ—¥å¿—å®¡æŸ¥&quot;</span>,<br><span class="hljs-attr">icon</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">FileProtectOutlined</span> /&gt;</span></span>,<br>&#125;,<br>&#123;<br><span class="hljs-attr">key</span>: <span class="hljs-string">&quot;/task&quot;</span>,<br><span class="hljs-attr">label</span>: <span class="hljs-string">&quot;ä»»åŠ¡ç®¡ç†&quot;</span>,<br><span class="hljs-attr">icon</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ControlOutlined</span> /&gt;</span></span>,<br>&#125;,<br>],<br>&#125;,<br>&#123;<br><span class="hljs-attr">key</span>: <span class="hljs-string">&quot;4&quot;</span>,<br><span class="hljs-attr">label</span>: <span class="hljs-string">&quot;é…ç½®&quot;</span>,<br><span class="hljs-attr">type</span>: <span class="hljs-string">&quot;group&quot;</span>,<br><span class="hljs-attr">children</span>: [<br>&#123;<br><span class="hljs-attr">key</span>: <span class="hljs-string">&quot;/config&quot;</span>,<br><span class="hljs-attr">label</span>: <span class="hljs-string">&quot;ç³»ç»Ÿå‚æ•°&quot;</span>,<br><span class="hljs-attr">icon</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">SettingOutlined</span> /&gt;</span></span>,<br>&#125;,<br>],<br>&#125;,<br>];<br><br><span class="hljs-comment">// ------ app/routes/dashboard.tsx ------</span><br><span class="hljs-comment">// å‘½åå¯¼å…¥</span><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> &#123; <span class="hljs-title class_">Route</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./+types/dashboard&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">VerticalDashboardLayout</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../layouts/vertical-dashboard&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">meta</span>(<span class="hljs-params">&#123;&#125;: <span class="hljs-title class_">Route</span>.<span class="hljs-title class_">MetaArgs</span></span>) &#123;<br>    <span class="hljs-keyword">return</span> [<br>      &#123; <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;ARDåå°ç®¡ç†ç³»ç»Ÿ&quot;</span> &#125;,<br>      &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;description&quot;</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">&quot;Welcome to React Router!&quot;</span> &#125;,<br>    ];<br>  &#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Dashboard</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">VerticalDashboardLayout</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/&gt;</span></span><br>    );<br>&#125;<br><br><span class="hljs-comment">// ------app/routes/home.tsx------</span><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Redirect to Dashboard</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> &#123; <span class="hljs-title class_">Route</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./+types/home&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useNavigate &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-router&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">meta</span>(<span class="hljs-params">&#123;&#125;: <span class="hljs-title class_">Route</span>.<span class="hljs-title class_">MetaArgs</span></span>) &#123;<br><span class="hljs-keyword">return</span> [<br>&#123; <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;New React Router App&quot;</span> &#125;,<br>&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;description&quot;</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">&quot;Welcome to React Router!&quot;</span> &#125;,<br>];<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();<br><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-title function_">navigate</span>(<span class="hljs-string">&quot;/dashboard&quot;</span>)<br>  &#125;);<br><span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3ï¸âƒ£-è¿è¡Œ"><a href="#3ï¸âƒ£-è¿è¡Œ" class="headerlink" title="3ï¸âƒ£ è¿è¡Œ"></a>3ï¸âƒ£ è¿è¡Œ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm run dev -- --host<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Webå‰ç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ray é›†ç¾¤å®¹å™¨åŒ–éƒ¨ç½²</title>
    <link href="/2025/09/08/Ray-%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2/"/>
    <url>/2025/09/08/Ray-%E9%9B%86%E7%BE%A4%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡æ¼”ç¤ºå¦‚ä½•ç”¨ Docker å¯åŠ¨ä¸€ä¸ª Ray é›†ç¾¤ï¼ˆ1 ä¸» + å¤šå·¥ä½œèŠ‚ç‚¹ï¼‰ï¼Œå¹¶è¯´æ˜å…³é”®å‚æ•°ä¸å¸¸è§é—®é¢˜ã€‚é€‚ç”¨äºåœ¨åŒä¸€äºŒå±‚ç½‘ç»œæˆ–ä½¿ç”¨ host ç½‘ç»œçš„åœºæ™¯ã€‚</p></blockquote><h2 id="å‰ç½®æ¡ä»¶"><a href="#å‰ç½®æ¡ä»¶" class="headerlink" title="å‰ç½®æ¡ä»¶"></a>å‰ç½®æ¡ä»¶</h2><ul><li>Docker å·²å®‰è£…å¹¶å¯ç”¨ï¼ˆrootless&#x2F;æ ‡å‡†å‡å¯ï¼‰</li><li>å¯è®¿é—®çš„é•œåƒ <code>model-server:0812</code>ï¼ˆåŒ…å« Ray åŠä½ çš„æœåŠ¡ï¼‰</li><li>æ‰€æœ‰èŠ‚ç‚¹æ—¶é—´åŒæ­¥ã€ç½‘ç»œäº’é€šï¼ˆå°¤å…¶æ˜¯ 6379ã€8265ã€ä½ çš„æœåŠ¡ç«¯å£ï¼‰</li><li>èµ„æºè§„åˆ’ï¼šCPU&#x2F;å†…å­˜&#x2F;å…±äº«å†…å­˜ï¼ˆ&#x2F;dev&#x2F;shmï¼‰</li></ul><h2 id="å¯åŠ¨ä¸»èŠ‚ç‚¹ï¼ˆHeadï¼‰"><a href="#å¯åŠ¨ä¸»èŠ‚ç‚¹ï¼ˆHeadï¼‰" class="headerlink" title="å¯åŠ¨ä¸»èŠ‚ç‚¹ï¼ˆHeadï¼‰"></a>å¯åŠ¨ä¸»èŠ‚ç‚¹ï¼ˆHeadï¼‰</h2><p>é€šè¿‡ <code>ray start</code> å¯åŠ¨ä¸»èŠ‚ç‚¹å®¹å™¨ï¼Œå¹¶å¼€å¯ Dashboard ä¸èµ„æºé™åˆ¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å¯åŠ¨ä¸»èŠ‚ç‚¹ï¼ˆHeadï¼‰</span><br>docker run -d --name ray-head \<br>  -p 5000:5000 \            <span class="hljs-comment"># æ˜ å°„è‡ªå®šä¹‰ API æœåŠ¡ç«¯å£ï¼ˆç¤ºä¾‹ï¼‰</span><br>  -p 6379:6379 \             <span class="hljs-comment"># Ray é›†ç¾¤å†…éƒ¨é€šä¿¡ç«¯å£ï¼ˆGCSï¼‰</span><br>  -p 8265:8265 \             <span class="hljs-comment"># Ray Dashboard ç«¯å£</span><br>  -v /mnt/volumes/modelServer:/usr/resource \  <span class="hljs-comment"># ä¸šåŠ¡èµ„æºæŒ‚è½½</span><br>  --network=host \           <span class="hljs-comment"># ä¸å®¿ä¸»æœºå…±äº«ç½‘ç»œï¼ˆè§ä¸‹æ–¹æ³¨æ„äº‹é¡¹ï¼‰</span><br>  -w /usr/resource \          <span class="hljs-comment"># å·¥ä½œç›®å½•</span><br>  --restart=always \          <span class="hljs-comment"># å¼‚å¸¸é€€å‡ºè‡ªåŠ¨é‡å¯</span><br>  --privileged=<span class="hljs-literal">true</span> \         <span class="hljs-comment"># ï¼ˆå¦‚éå¿…è¦å¯ç§»é™¤ï¼‰</span><br>  --shm-size=13gb \           <span class="hljs-comment"># å…±äº«å†…å­˜ï¼Œéœ€ &gt; object-store-memory</span><br>  model-server:0812 bash -c \<br>  <span class="hljs-string">&quot;ray start \</span><br><span class="hljs-string">    --include-dashboard=True \</span><br><span class="hljs-string">    --head \</span><br><span class="hljs-string">    --node-ip-address=0.0.0.0 \           # ç›‘å¬åœ°å€</span><br><span class="hljs-string">    --port=6379 \                          # GCS ç«¯å£</span><br><span class="hljs-string">    --dashboard-host=0.0.0.0 \             # Dashboard ç»‘å®šåœ°å€</span><br><span class="hljs-string">    --num-cpus=36 \                        # æ­¤èŠ‚ç‚¹å¯ç”¨ CPU æ•°</span><br><span class="hljs-string">    --memory=80000000000 \                 # å¯ç”¨å†…å­˜ï¼ˆbytesï¼‰</span><br><span class="hljs-string">    --object-store-memory=12000000000 \    # å¯¹è±¡å­˜å‚¨å†…å­˜ï¼ˆbytesï¼‰</span><br><span class="hljs-string">    &amp;&amp; python -m dataProcessing.server&quot;</span>     <span class="hljs-comment"># å¯åŠ¨ä½ çš„ä¸šåŠ¡æœåŠ¡</span><br><br><span class="hljs-comment"># æ£€æŸ¥å¯åŠ¨æ—¥å¿—</span><br>docker logs ray-head<br></code></pre></td></tr></table></figure><ul><li><strong>ç«¯å£è¯´æ˜</strong>ï¼š<ul><li><strong>5000</strong>ï¼šç¤ºä¾‹ä¸­çš„ä¸šåŠ¡ API æœåŠ¡ï¼ˆå¯æŒ‰éœ€è°ƒæ•´ï¼‰</li><li><strong>6379</strong>ï¼šRay Head çš„ GCS ç«¯å£ï¼ˆWorker é€šè¿‡æ­¤ç«¯å£åŠ å…¥ï¼‰</li><li><strong>8265</strong>ï¼šRay Dashboardï¼ˆWeb UIï¼‰</li></ul></li><li><strong>ç½‘ç»œæ¨¡å¼</strong>ï¼šç¤ºä¾‹ä½¿ç”¨ <code>--network=host</code>ï¼Œç¡®ä¿æ‰€æœ‰èŠ‚ç‚¹èƒ½ç›´è¿ Head çš„ <code>6379/8265</code>ã€‚åœ¨äº‘ç¯å¢ƒï¼ˆå¦‚å…¬æœ‰äº‘ï¼‰ä¸­ï¼Œhost ç½‘ç»œéœ€è°¨æ…ï¼›</li><li><strong>å…±äº«å†…å­˜</strong>ï¼š<code>--shm-size</code> å¿…é¡»å¤§äº <code>--object-store-memory</code>ï¼Œå¦åˆ™å¯¹è±¡å­˜å‚¨æ˜“ OOM æˆ–æŠ¥é”™ã€‚</li><li><strong>privileged</strong>ï¼šé€šå¸¸ä¸å¿…éœ€ï¼Œå»ºè®®ç§»é™¤ï¼Œé™¤éä½ çš„æœåŠ¡ç¡®å®éœ€è¦ã€‚</li></ul><h2 id="å¯åŠ¨å·¥ä½œèŠ‚ç‚¹ï¼ˆWorkerï¼‰"><a href="#å¯åŠ¨å·¥ä½œèŠ‚ç‚¹ï¼ˆWorkerï¼‰" class="headerlink" title="å¯åŠ¨å·¥ä½œèŠ‚ç‚¹ï¼ˆWorkerï¼‰"></a>å¯åŠ¨å·¥ä½œèŠ‚ç‚¹ï¼ˆWorkerï¼‰</h2><p>æ¯ä¸ª Worker é€šè¿‡ <code>--address=&#39;&lt;HEAD_IP&gt;:6379&#39;</code> åŠ å…¥é›†ç¾¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å¯åŠ¨å·¥ä½œèŠ‚ç‚¹ 1</span><br>docker run -d --name ray-worker_1 \<br>  --shm-size=13gb \<br>  --network=host \<br>  -v /mnt/volumes/modelServer:/usr/resource \<br>  model-server:0812 bash -c \<br>  <span class="hljs-string">&quot;ray start \</span><br><span class="hljs-string">    --address=&#x27;172.31.13.23:6379&#x27; \   # æ›¿æ¢ä¸º Head èŠ‚ç‚¹å®é™… IP:PORT</span><br><span class="hljs-string">    --num-cpus=36 \                   # åˆ†é…ç»™è¯¥ Worker çš„ CPU æ•°</span><br><span class="hljs-string">    --memory=80000000000 \            # è¯¥ Worker å¯ç”¨å†…å­˜ï¼ˆbytesï¼‰</span><br><span class="hljs-string">    --object-store-memory=12000000000 \  # è¯¥ Worker å¯¹è±¡å­˜å‚¨å†…å­˜</span><br><span class="hljs-string">    --block&quot;</span>                          <span class="hljs-comment"># å‰å°é˜»å¡ï¼Œå®¹å™¨ä¿æŒè¿è¡Œ</span><br></code></pre></td></tr></table></figure><ul><li>å¤šä¸ª Worker å¯é‡å¤ä¸Šè¿°å‘½ä»¤ï¼Œä¿®æ”¹å®¹å™¨åä¸èµ„æºå‚æ•°ã€‚</li><li>è‹¥é host ç½‘ç»œï¼Œéœ€ç¡®ä¿å®¹å™¨èƒ½è®¿é—®åˆ° Head çš„ <code>6379</code> ç«¯å£ï¼ˆæ˜ å°„ç«¯å£æˆ–å†…ç½‘è§£æï¼‰ã€‚</li></ul><h2 id="Python-ç«¯è¿æ¥ä¸èµ„æºæ³¨è§£"><a href="#Python-ç«¯è¿æ¥ä¸èµ„æºæ³¨è§£" class="headerlink" title="Python ç«¯è¿æ¥ä¸èµ„æºæ³¨è§£"></a>Python ç«¯è¿æ¥ä¸èµ„æºæ³¨è§£</h2><p>åœ¨ Python ä¸­è¿æ¥å·²å¯åŠ¨çš„ Ray é›†ç¾¤ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> ray<br><br><span class="hljs-comment"># é›†ç¾¤æ¨¡å¼ï¼šä½¿ç”¨å·²å­˜åœ¨çš„ Headï¼ˆray start å¯åŠ¨ï¼‰</span><br>ray.init(address=<span class="hljs-string">&quot;auto&quot;</span>)<br><br><span class="hljs-meta">@ray.remote(<span class="hljs-params">num_cpus=<span class="hljs-number">4</span>, memory=<span class="hljs-number">12</span> * <span class="hljs-number">1024</span>**<span class="hljs-number">3</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">my_task</span>():<br>    ...<br></code></pre></td></tr></table></figure><ul><li><strong>é‡è¦åŒºåˆ«</strong>ï¼š<ul><li>é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œèµ„æºï¼ˆCPU&#x2F;å†…å­˜&#x2F;å¯¹è±¡å­˜å‚¨ï¼‰åº”ä¸»è¦åœ¨ <code>ray start</code> å±‚é¢é…ç½®ã€‚</li><li><code>ray.init(_memory=...)</code> æ›´é€‚ç”¨äºå•æœºè°ƒè¯•ï¼ˆä¸é€šè¿‡ <code>ray start</code> æ‰‹åŠ¨èµ·èŠ‚ç‚¹ï¼‰ï¼Œåœ¨é›†ç¾¤ä¸­ä¸ç”Ÿæ•ˆæˆ–ä¸å»ºè®®ä¾èµ–ã€‚</li></ul></li></ul><h2 id="éªŒè¯ä¸å¯è§†åŒ–"><a href="#éªŒè¯ä¸å¯è§†åŒ–" class="headerlink" title="éªŒè¯ä¸å¯è§†åŒ–"></a>éªŒè¯ä¸å¯è§†åŒ–</h2><ul><li>è®¿é—® Dashboardï¼š<code>http://172.31.13.23:8265</code>ï¼ˆæ›¿æ¢ä¸º Head IPï¼‰</li><li>åœ¨ Python ä¸­éªŒè¯ï¼š</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> ray<br><span class="hljs-built_in">print</span>(ray.is_initialized())<br><span class="hljs-built_in">print</span>(ray.available_resources())<br></code></pre></td></tr></table></figure><h2 id="å¸¸è§é—®é¢˜ä¸ä¿®æ­£å»ºè®®"><a href="#å¸¸è§é—®é¢˜ä¸ä¿®æ­£å»ºè®®" class="headerlink" title="å¸¸è§é—®é¢˜ä¸ä¿®æ­£å»ºè®®"></a>å¸¸è§é—®é¢˜ä¸ä¿®æ­£å»ºè®®</h2><ul><li>æ³¨æ„ï¼š<code>--network=host</code> ä¸ <code>-p</code> åŒæ—¶ä½¿ç”¨åœ¨å¤§å¤šæ•° Docker ç‰ˆæœ¬ä¸­æ— æ•ˆï¼ˆhost æ¨¡å¼ä¼šå¿½ç•¥ <code>-p</code>ï¼‰ã€‚</li><li>èµ„æºå•ä½ä¸ºå­—èŠ‚ï¼Œå®¹æ˜“å†™é”™ã€‚ç¤ºä¾‹ä¸­ <code>--memory=80000000000</code> &#x3D; 80 GB â‰ˆ 74.5 GiBï¼Œ<code>--object-store-memory=12000000000</code> â‰ˆ 11.2 GiBï¼Œè¯·æŒ‰ç‰©ç†èµ„æºè°ƒæ•´ã€‚</li><li><code>--privileged=true</code> éå¿…è¦ï¼Œå»ºè®®ç§»é™¤ä»¥é™ä½å®‰å…¨é£é™©ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>DevOps &amp; äº‘åŸç”Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
      <tag>Ray</tag>
      
      <tag>åˆ†å¸ƒå¼è®¡ç®—</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>React å­¦ä¹ ç¬”è®°(ä¸€): èµ·æ­¥çš„ä¸€äº›é—®é¢˜è®°å½•</title>
    <link href="/2025/09/07/React-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80-%E8%B5%B7%E6%AD%A5%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/"/>
    <url>/2025/09/07/React-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80-%E8%B5%B7%E6%AD%A5%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h2 id="1ï¸âƒ£-js-é€»è¾‘ä¸"><a href="#1ï¸âƒ£-js-é€»è¾‘ä¸" class="headerlink" title="1ï¸âƒ£ js é€»è¾‘ä¸ &amp;&amp;"></a>1ï¸âƒ£ js é€»è¾‘ä¸ <code>&amp;&amp;</code></h2><ul><li>å¼ºç±»å‹è¯­è¨€ï¼Œä¸€å®šä¼šè¿”å›<code>true</code>æˆ–<code>false</code></li><li>å¼±ç±»å‹è¯­è¨€ï¼Œä¾‹å¦‚pythonå’Œjsï¼ŒæŒ‰ç…§<strong>çŸ­è·¯æ±‚å€¼</strong>å’Œ<strong>çœŸå€¼&#x2F;å‡å€¼</strong>æœºåˆ¶ï¼Œè¿”å›å…¶ä¸­ä¸€ä¸ªæ“ä½œæ•°ï¼Œè€Œä¸æ˜¯å¼ºåˆ¶å¸ƒå°”å€¼ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-string">&quot;hi&quot;</span> &amp;&amp; <span class="hljs-number">123</span>   <span class="hljs-comment">// =&gt; 123</span><br><span class="hljs-number">0</span> &amp;&amp; <span class="hljs-string">&quot;hi&quot;</span>     <span class="hljs-comment">// =&gt; 0</span><br><span class="hljs-literal">false</span> &amp;&amp; <span class="hljs-string">&quot;hi&quot;</span> <span class="hljs-comment">// =&gt; false</span><br></code></pre></td></tr></table></figure><p>æ‰€ä»¥ä»¥ä¸‹ä¸¤ç§å†™æ³•ç­‰ä»·ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;&gt;<br>&#123;<br>isLoggedIn ? (<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">AdminPanel</span> /&gt;</span></span>) : (<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">LoginPanel</span> /&gt;</span></span>)<br>&#125;<br>&lt;/&gt;<br><br><span class="hljs-comment">// å½“ä½ ä¸éœ€è¦elseåˆ†æ”¯æ—¶ï¼š</span><br><span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">&#123; isLoggedIn &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">AdminPanel</span> /&gt;</span> &#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/&gt;</span></span><br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„âš ï¸ï¼š åœ¨Reactä¸­ï¼Œå¿½ç•¥ <code>false</code>ã€<code>null</code>ã€<code>undefined</code> â†’ ä¸æ¸²æŸ“ä»»ä½•ä¸œè¥¿ï¼›</p></blockquote><h2 id="2ï¸âƒ£-React-æ¸²æŸ“é€»è¾‘"><a href="#2ï¸âƒ£-React-æ¸²æŸ“é€»è¾‘" class="headerlink" title="2ï¸âƒ£ React æ¸²æŸ“é€»è¾‘"></a>2ï¸âƒ£ React æ¸²æŸ“é€»è¾‘</h2><p><code>&lt;AdminPanel /&gt;</code> ä¼šè¢«Reactç¼–è¯‘ï¼Œè¿”å›ä¸€ä¸ªReactå…ƒç´ æè¿°å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä»¥è°ƒç”¨å‡½æ•°çš„å½¢å¼ç›´æ¥è¿è¡Œç»„ä»¶å‡½æ•°ã€‚</p><p>ä¾‹å¦‚ç¼–è¯‘å‰ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">AdminPanel</span> /&gt;</span></span><br>&lt;/&gt;<br></code></pre></td></tr></table></figure><p>ç¼–è¯‘åï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">AdminPanel</span>, <span class="hljs-literal">null</span>);<br><br><span class="hljs-comment">// React 17åï¼š</span><br><span class="hljs-keyword">import</span> &#123; jsx <span class="hljs-keyword">as</span> _jsx &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react/jsx-runtime&quot;</span>;<br><span class="hljs-title function_">_jsx</span>(<span class="hljs-title class_">AdminPanel</span>, &#123;&#125;);<br><br><span class="hljs-comment">// è¿”å›å€¼ï¼Œä¹Ÿå³Reactå…ƒç´ å¯¹è±¡é•¿è¿™æ ·ï¼š</span><br>&#123;<br>  <span class="hljs-attr">type</span>: <span class="hljs-title class_">AdminPanel</span>,<br>  <span class="hljs-attr">props</span>: &#123;&#125;,<br>  <span class="hljs-attr">key</span>: <span class="hljs-literal">null</span>,<br>  <span class="hljs-attr">ref</span>: <span class="hljs-literal">null</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3ï¸âƒ£-React-duplicate-route-id"><a href="#3ï¸âƒ£-React-duplicate-route-id" class="headerlink" title="3ï¸âƒ£ React duplicate route id"></a>3ï¸âƒ£ React duplicate route id</h2><h3 id="ğŸ›-å†™æ³•-A"><a href="#ğŸ›-å†™æ³•-A" class="headerlink" title="ğŸ› å†™æ³• A"></a>ğŸ› å†™æ³• A</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [<br>    <span class="hljs-title function_">index</span>(<span class="hljs-string">&quot;routes/home.tsx&quot;</span>),      <span class="hljs-comment">// é»˜è®¤è·¯ç”± /</span><br>    <span class="hljs-title function_">route</span>(<span class="hljs-string">&quot;home&quot;</span>, <span class="hljs-string">&quot;routes/home.tsx&quot;</span>) <span class="hljs-comment">// /home</span><br>] <span class="hljs-keyword">satisfies</span> <span class="hljs-title class_">RouteConfig</span>;<br></code></pre></td></tr></table></figure><blockquote><p>å†™æ³•A åšäº†ä»€ä¹ˆ?</p></blockquote><ul><li><p>å†…éƒ¨ç”Ÿæˆçš„ routeId &#x3D; æ–‡ä»¶è·¯å¾„ â†’ â€œroutes&#x2F;homeâ€</p></li><li><p>æ•…reactæŠ¥é”™duplicate route id</p></li></ul><h3 id="âœ…-å†™æ³•-B-æ­£ç¡®ç¤ºä¾‹"><a href="#âœ…-å†™æ³•-B-æ­£ç¡®ç¤ºä¾‹" class="headerlink" title="âœ… å†™æ³• B æ­£ç¡®ç¤ºä¾‹"></a>âœ… å†™æ³• B æ­£ç¡®ç¤ºä¾‹</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [<br>    <span class="hljs-title function_">route</span>(<span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-string">&quot;routes/home.tsx&quot;</span>, &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;your-route-id&quot;</span>&#125;),    <span class="hljs-comment">// /</span><br>    <span class="hljs-title function_">route</span>(<span class="hljs-string">&quot;home&quot;</span>, <span class="hljs-string">&quot;routes/home.tsx&quot;</span>)  <span class="hljs-comment">// /home</span><br>] <span class="hljs-keyword">satisfies</span> <span class="hljs-title class_">RouteConfig</span>;<br></code></pre></td></tr></table></figure><h2 id="4ï¸âƒ£-é»˜è®¤å¯¼å‡ºä¸å…·åå¯¼å‡º"><a href="#4ï¸âƒ£-é»˜è®¤å¯¼å‡ºä¸å…·åå¯¼å‡º" class="headerlink" title="4ï¸âƒ£ é»˜è®¤å¯¼å‡ºä¸å…·åå¯¼å‡º"></a>4ï¸âƒ£ é»˜è®¤å¯¼å‡ºä¸å…·åå¯¼å‡º</h2><h3 id="é»˜è®¤å¯¼å‡º"><a href="#é»˜è®¤å¯¼å‡º" class="headerlink" title="é»˜è®¤å¯¼å‡º"></a>é»˜è®¤å¯¼å‡º</h3><ul><li><p>ä¸€ä¸ªæ–‡ä»¶åªèƒ½æœ‰ ä¸€ä¸ªé»˜è®¤å¯¼å‡º</p></li><li><p>å¯¼å…¥æ—¶å¯ä»¥éšæ„å‘½å</p></li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-comment">// MyComponent.tsx</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">MyComponent</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Hello Default Export<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;<br>&#125;;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">MyComponent</span>;<br><br><span class="hljs-comment">// App.tsx</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">AnyName</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./MyComponent&quot;</span>; <span class="hljs-comment">// å¯ä»¥éšæ„å‘½å</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">AnyName</span> /&gt;</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>âœ… ç‰¹ç‚¹ï¼š</p><ul><li><p>å¯¼å…¥åç§°å¯ä»¥è‡ªå®šä¹‰</p></li><li><p>åªèƒ½å¯¼å‡ºä¸€ä¸ªé»˜è®¤å€¼</p><blockquote><p>æ³¨æ„âš ï¸ routes.tsä¸­å¯¼å…¥çš„è·¯ç”±æ–‡ä»¶åªèƒ½é»˜è®¤å¯¼å‡ºã€‚ä¾‹å¦‚routes&#x2F;home.tsxå¿…é¡»ç”¨é»˜è®¤å¯¼å‡ºæ–¹å¼</p></blockquote></li></ul><h3 id="å…·åå¯¼å‡ºï¼ˆnamed-exportï¼‰"><a href="#å…·åå¯¼å‡ºï¼ˆnamed-exportï¼‰" class="headerlink" title="å…·åå¯¼å‡ºï¼ˆnamed exportï¼‰"></a>å…·åå¯¼å‡ºï¼ˆnamed exportï¼‰</h3><ul><li><p>ä¸€ä¸ªæ–‡ä»¶å¯ä»¥æœ‰ å¤šä¸ªå…·åå¯¼å‡º</p></li><li><p>å¯¼å…¥æ—¶å¿…é¡»ä½¿ç”¨ èŠ±æ‹¬å· {} å¹¶ä¸”åç§°å¿…é¡»åŒ¹é…</p></li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-comment">// MyComponent.tsx</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">Header</span> = (<span class="hljs-params"></span>) =&gt; <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Header<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">Footer</span> = (<span class="hljs-params"></span>) =&gt; <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>Footer<span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span></span>;<br><br><span class="hljs-comment">// App.tsx</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Header</span>, <span class="hljs-title class_">Footer</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./MyComponent&quot;</span>; <span class="hljs-comment">// å¿…é¡»ç”¨åŸåç§°</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Footer</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>âœ… ç‰¹ç‚¹ï¼š</p><ul><li><p>å¯ä»¥å¯¼å‡ºå¤šä¸ªå‡½æ•°&#x2F;ç»„ä»¶&#x2F;å˜é‡</p></li><li><p>å¯¼å…¥æ—¶åç§°å¿…é¡»å’Œå¯¼å‡ºæ—¶ä¸€è‡´ï¼ˆå¯ä»¥ç”¨ as æ”¹åï¼‰</p></li></ul><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Header</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Top</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./MyComponent&quot;</span>;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Top</span> /&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="5ï¸âƒ£-è·¯ç”±çš„ç»å¯¹è·¯å¾„ä¸ç›¸å¯¹è·¯å¾„"><a href="#5ï¸âƒ£-è·¯ç”±çš„ç»å¯¹è·¯å¾„ä¸ç›¸å¯¹è·¯å¾„" class="headerlink" title="5ï¸âƒ£ è·¯ç”±çš„ç»å¯¹è·¯å¾„ä¸ç›¸å¯¹è·¯å¾„"></a>5ï¸âƒ£ è·¯ç”±çš„ç»å¯¹è·¯å¾„ä¸ç›¸å¯¹è·¯å¾„</h2><blockquote><p>âš ï¸ ç»å¯¹è·¯å¾„ä»¥<code>/</code>å¼€å¤´ï¼Œç›¸å¯¹è·¯å¾„ä¸ä»¥<code>/</code>å¼€å¤´</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Webå‰ç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å…¨æ ˆæŠ€æœ¯å‘˜çŸ¥è¯†å›¾</title>
    <link href="/2025/09/07/%E5%85%A8%E6%A0%88%E6%8A%80%E6%9C%AF%E5%91%98%E7%9F%A5%E8%AF%86%E5%9B%BE/"/>
    <url>/2025/09/07/%E5%85%A8%E6%A0%88%E6%8A%80%E6%9C%AF%E5%91%98%E7%9F%A5%E8%AF%86%E5%9B%BE/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰ç«¯å¼€å‘"><a href="#å‰ç«¯å¼€å‘" class="headerlink" title="å‰ç«¯å¼€å‘"></a>å‰ç«¯å¼€å‘</h2><ul><li>åŸºç¡€ï¼šHTML &#x2F; CSS &#x2F; JavaScript</li><li>æ¡†æ¶ä¸åº“ï¼šVueã€Reactã€Angularã€Svelte</li><li>UI æ¡†æ¶ï¼šElement Plusã€Ant Designã€Tailwind CSSã€Vuetify</li><li>å‰ç«¯å·¥ç¨‹åŒ–ï¼šViteã€Webpackã€Rollupã€Babelã€ESLint</li><li>å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼šé¦–å±ä¼˜åŒ–ã€æ‡’åŠ è½½ã€Tree-shakingã€ç¼“å­˜æœºåˆ¶</li><li>è·¨ç«¯å¼€å‘ï¼šFlutterã€React Nativeã€Electron</li></ul><h2 id="åç«¯å¼€å‘"><a href="#åç«¯å¼€å‘" class="headerlink" title="åç«¯å¼€å‘"></a>åç«¯å¼€å‘</h2><ul><li>è¯­è¨€ä¸æ¡†æ¶ï¼šNode.jsï¼ˆExpressã€NestJSã€Koaï¼‰ã€Javaï¼ˆSpring Bootï¼‰ã€Pythonï¼ˆDjangoã€FastAPIï¼‰ã€Go</li><li>æ•°æ®åº“ï¼šMySQLã€PostgreSQLã€MongoDBã€Redis</li><li>ORM ä¸æ•°æ®è®¿é—®ï¼šMyBatisã€TypeORMã€Prismaã€SQLAlchemy</li><li>API è®¾è®¡ï¼šRESTfulã€GraphQLã€gRPC</li><li>è®¤è¯ä¸å®‰å…¨ï¼šJWTã€OAuth2ã€RBACã€CSRF&#x2F;XSS é˜²æŠ¤</li></ul><h2 id="DevOps-äº‘åŸç”Ÿ"><a href="#DevOps-äº‘åŸç”Ÿ" class="headerlink" title="DevOps &amp; äº‘åŸç”Ÿ"></a>DevOps &amp; äº‘åŸç”Ÿ</h2><ul><li>å®¹å™¨åŒ–ï¼šDockerã€Podman</li><li>ç¼–æ’ï¼šKubernetesã€Helm</li><li>CI&#x2F;CDï¼šGitHub Actionsã€GitLab CIã€Jenkins</li><li>ç›‘æ§ä¸æ—¥å¿—ï¼šPrometheusã€Grafanaã€ELKã€Loki</li><li>äº‘æœåŠ¡ï¼šAWSã€Azureã€é˜¿é‡Œäº‘ã€è…¾è®¯äº‘</li></ul><h2 id="å…¨æ ˆè¿›é˜¶"><a href="#å…¨æ ˆè¿›é˜¶" class="headerlink" title="å…¨æ ˆè¿›é˜¶"></a>å…¨æ ˆè¿›é˜¶</h2><ul><li>æ¶æ„è®¾è®¡ï¼šå¾®æœåŠ¡ã€å•ä½“ã€Serverlessã€CQRS</li><li>è®¾è®¡æ¨¡å¼ï¼šMVCã€MVVMã€DDD</li><li>æ¶ˆæ¯é˜Ÿåˆ—ï¼šKafkaã€RabbitMQã€RocketMQ</li><li>æœç´¢ä¸ç¼“å­˜ï¼šElasticsearchã€Redisã€Memcached</li><li>æ•°æ®å¯è§†åŒ–ï¼šEChartsã€D3.jsã€OpenLayersã€Mapbox</li></ul><h2 id="å·¥å…·ä¸æ•ˆç‡"><a href="#å·¥å…·ä¸æ•ˆç‡" class="headerlink" title="å·¥å…·ä¸æ•ˆç‡"></a>å·¥å…·ä¸æ•ˆç‡</h2><ul><li>ç‰ˆæœ¬æ§åˆ¶ï¼šGitã€GitHub&#x2F;GitLabã€Git Flow</li><li>å¼€å‘å·¥å…·ï¼šVS Codeã€JetBrains ç³»åˆ—ã€å‘½ä»¤è¡Œå·¥å…·</li><li>è‡ªåŠ¨åŒ–æµ‹è¯•ï¼šJestã€Mochaã€Cypressã€Playwright</li><li>è°ƒè¯•ä¸æ’é”™ï¼šChrome DevToolsã€Postmanã€Wireshark</li></ul><h2 id="é¡¹ç›®ä¸å®è·µ"><a href="#é¡¹ç›®ä¸å®è·µ" class="headerlink" title="é¡¹ç›®ä¸å®è·µ"></a>é¡¹ç›®ä¸å®è·µ</h2><ul><li>ä¸ªäººé¡¹ç›®å®æˆ˜ï¼šä»é›¶æ­å»ºåšå®¢ç³»ç»Ÿã€å›¾ç‰‡ç®¡ç†ç³»ç»Ÿã€èŠå¤©åº”ç”¨</li><li>ä¼ä¸šçº§é¡¹ç›®ç»éªŒï¼šå¾®æœåŠ¡æ¶æ„ã€åˆ†å¸ƒå¼å­˜å‚¨ã€æƒé™ç®¡ç†</li><li>æœ€ä½³å®è·µæ€»ç»“ï¼šä»£ç è§„èŒƒã€éƒ¨ç½²æ–¹æ¡ˆã€æ€§èƒ½ä¼˜åŒ–</li><li>å¼€å‘è¸©å‘è®°å½•ï¼šé”™è¯¯æ’æŸ¥ã€å‘ç‚¹æ€»ç»“ã€è¿ç§»ç»éªŒ</li></ul><h2 id="èŒä¸šæˆé•¿"><a href="#èŒä¸šæˆé•¿" class="headerlink" title="èŒä¸šæˆé•¿"></a>èŒä¸šæˆé•¿</h2><ul><li>å­¦ä¹ ç¬”è®°ï¼šä¹¦ç±ã€è¯¾ç¨‹ã€æŠ€æœ¯å¤§ä¼š</li><li>é¢è¯•ä¸æ±‚èŒï¼šç®—æ³•ä¸æ•°æ®ç»“æ„ã€ç³»ç»Ÿè®¾è®¡ã€çœŸå®é¢è¯•é¢˜</li><li>èŒä¸šè§„åˆ’ï¼šå…¨æ ˆæˆé•¿è·¯å¾„ã€è½¯æŠ€èƒ½ã€å›¢é˜Ÿåä½œ</li><li>è¡Œä¸šè¶‹åŠ¿ï¼šAI ä¸ Web èåˆã€WebAssemblyã€è¾¹ç¼˜è®¡ç®—</li></ul><h2 id="ç”Ÿæ´»éšç¬”ï¼ˆé€‰å¡«ï¼‰"><a href="#ç”Ÿæ´»éšç¬”ï¼ˆé€‰å¡«ï¼‰" class="headerlink" title="ç”Ÿæ´»éšç¬”ï¼ˆé€‰å¡«ï¼‰"></a>ç”Ÿæ´»éšç¬”ï¼ˆé€‰å¡«ï¼‰</h2><ul><li>æ—¥å¸¸è®°å½•ï¼šæ—…è¡Œã€æ‘„å½±ã€ç”Ÿæ´»æ„Ÿæ‚Ÿ</li><li>æ•ˆç‡æ–¹æ³•è®ºï¼šæ—¶é—´ç®¡ç†ã€å­¦ä¹ æ–¹æ³•</li><li>æ€è€ƒä¸åˆ†äº«ï¼šå¯¹æŠ€æœ¯è¶‹åŠ¿çš„æ€è€ƒã€ä¸ªäººæˆé•¿æ•…äº‹</li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>å­¦ä¹ è·¯çº¿</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MinIOæ•°æ®è¿ç§»rcloneå®è·µ</title>
    <link href="/2025/09/06/MinIO%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BBrclone%E5%AE%9E%E8%B7%B5/"/>
    <url>/2025/09/06/MinIO%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BBrclone%E5%AE%9E%E8%B7%B5/</url>
    
    <content type="html"><![CDATA[<p>ç¬”è€…ä¹‹å‰é‡‡ç”¨MinIOå®˜æ–¹å·¥å…·mcè¿›è¡Œæ•°æ®è¿ç§»ï¼Œå¯èƒ½æ˜¯ç”±äºç½‘ç»œæ³¢åŠ¨ï¼Œç»å¸¸ä¼šå‡ºç°åŒæ­¥çš„æ•°æ®ä¸å…¨ã€æ•°æ®éƒ¨åˆ†ç¼ºå¤±çš„æƒ…å†µ</p><h2 id="1ï¸âƒ£-å…³äº-rclone-çš„å¯é æ€§"><a href="#1ï¸âƒ£-å…³äº-rclone-çš„å¯é æ€§" class="headerlink" title="1ï¸âƒ£ å…³äº rclone çš„å¯é æ€§"></a>1ï¸âƒ£ å…³äº rclone çš„å¯é æ€§</h2><p>rclone æœ¬èº«æ˜¯ä¸€ä¸ªæˆç†Ÿçš„å¼€æºå·¥å…·ï¼Œæ”¯æŒå¤šç§å­˜å‚¨åç«¯ï¼ˆåŒ…æ‹¬ MinIO&#x2F;S3 å…¼å®¹ï¼‰ã€‚å®ƒå¯ä»¥ï¼š</p><ul><li><p><strong>å®Œæ•´å¤åˆ¶</strong>æ–‡ä»¶ï¼ˆæ”¯æŒæ ¡éªŒï¼‰ã€‚</p></li><li><p><strong>å¢é‡åŒæ­¥</strong>ï¼Œåªä¼ æ–°æ–‡ä»¶æˆ–ä¿®æ”¹æ–‡ä»¶ã€‚</p></li><li><p>æ”¯æŒ <strong>æ–­ç‚¹ç»­ä¼ </strong>ã€‚</p></li><li><p>æ”¯æŒ <strong>å¤šå¹³å°</strong>è¿è¡Œï¼šLinuxã€Windowsã€MacOS å‡åŸç”Ÿæ”¯æŒã€‚</p></li></ul><p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p><ul><li><p>rclone é»˜è®¤ä½¿ç”¨ MD5 æˆ– SHA1 å“ˆå¸Œæ¥æ ¡éªŒæºæ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶ï¼Œå¯ä»¥ç¡®ä¿æ–‡ä»¶å®Œæ•´æ€§ã€‚</p></li><li><p>å¯¹äºå¤§æ–‡ä»¶ï¼Œrclone ä¼šåˆ†å—ä¸Šä¼ ï¼Œå‡ºç°ä¸­æ–­å¯ä»¥è‡ªåŠ¨ç»­ä¼ ã€‚</p></li><li><p>ä½†å¦‚æœè¿ç§»è¿‡ç¨‹ä¸­å‡ºç°ç³»ç»Ÿ crashã€ç½‘ç»œä¸­æ–­æˆ–è€…è¯¯æ“ä½œï¼Œä»å¯èƒ½å‡ºç°â€œéƒ¨åˆ†æ–‡ä»¶æœªåŒæ­¥â€ã€‚å› æ­¤ï¼Œå¿…é¡»åœ¨æ–¹æ¡ˆä¸­åŠ å…¥å¤šæ¬¡æ ¡éªŒæœºåˆ¶ã€‚</p></li></ul><h2 id="2ï¸âƒ£-æ•°æ®è¿ç§»å¯é æ–¹æ¡ˆ"><a href="#2ï¸âƒ£-æ•°æ®è¿ç§»å¯é æ–¹æ¡ˆ" class="headerlink" title="2ï¸âƒ£ æ•°æ®è¿ç§»å¯é æ–¹æ¡ˆ"></a>2ï¸âƒ£ æ•°æ®è¿ç§»å¯é æ–¹æ¡ˆ</h2><h3 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a><strong>å‰æ</strong></h3><ul><li><p>æ—§ MinIO å•èŠ‚ç‚¹ï¼š<code>source</code></p></li><li><p>æ–° MinIO é›†ç¾¤ï¼š<code>target</code></p></li><li><p>ä½¿ç”¨ rclone è®¿é—® S3 APIï¼Œä¿è¯ <code>access_key</code>ã€<code>secret_key</code> æ­£ç¡®ã€‚</p></li><li><p>å‡è®¾æ•°æ®å­˜æ”¾åœ¨ <code>bucket-name</code> æ¡¶é‡Œã€‚</p></li></ul><hr><h3 id="æ–¹æ¡ˆæ­¥éª¤"><a href="#æ–¹æ¡ˆæ­¥éª¤" class="headerlink" title="æ–¹æ¡ˆæ­¥éª¤"></a><strong>æ–¹æ¡ˆæ­¥éª¤</strong></h3><h4 id="Step-1ï¼šé…ç½®-rclone"><a href="#Step-1ï¼šé…ç½®-rclone" class="headerlink" title="Step 1ï¼šé…ç½® rclone"></a><strong>Step 1ï¼šé…ç½® rclone</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">rclone config <br><span class="hljs-comment"># åˆ›å»º source å’Œ target remote </span><br><span class="hljs-comment"># type: s3 </span><br><span class="hljs-comment"># provider: MinIO </span><br><span class="hljs-comment"># access_key_id &amp; secret_access_key </span><br><span class="hljs-comment"># endpoint: http://old-minio:9000 / http://new-minio:9000</span><br></code></pre></td></tr></table></figure><hr><h4 id="Step-2ï¼šå…¨é‡è¿ç§»ï¼ˆç¬¬ä¸€æ¬¡ï¼‰"><a href="#Step-2ï¼šå…¨é‡è¿ç§»ï¼ˆç¬¬ä¸€æ¬¡ï¼‰" class="headerlink" title="Step 2ï¼šå…¨é‡è¿ç§»ï¼ˆç¬¬ä¸€æ¬¡ï¼‰"></a><strong>Step 2ï¼šå…¨é‡è¿ç§»ï¼ˆç¬¬ä¸€æ¬¡ï¼‰</strong></h4><p>ä½¿ç”¨ <code>rclone sync</code> æˆ– <code>rclone copy</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rclone <span class="hljs-built_in">sync</span> <span class="hljs-built_in">source</span>:bucket-name target:bucket-name --progress    --checksum   --transfers=8   --checkers=16    --verbose  --retries=10<br></code></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><ul><li><p><code>--checksum</code>ï¼šé€šè¿‡ hash æ ¡éªŒæ–‡ä»¶å®Œæ•´æ€§ï¼Œè€Œä¸ä»…ä»…æ˜¯æ—¶é—´æˆ³ã€‚</p></li><li><p><code>--transfers</code>ã€<code>--checkers</code>ï¼šå¹¶å‘æ•°é‡ï¼Œå¯æ ¹æ®ç½‘ç»œè°ƒæ•´ã€‚</p></li><li><p><code>--retries</code>ï¼šå¤±è´¥è‡ªåŠ¨é‡è¯•ã€‚</p></li><li><p><code>sync</code> vs <code>copy</code>ï¼š</p><ul><li><p><code>copy</code>ï¼šä¸ä¼šåˆ é™¤ç›®æ ‡æ¡¶å·²æœ‰æ–‡ä»¶ã€‚</p></li><li><p><code>sync</code>ï¼šä¿è¯æºå’Œç›®æ ‡å®Œå…¨ä¸€è‡´ï¼Œç›®æ ‡å¤šä½™æ–‡ä»¶ä¼šè¢«åˆ é™¤ã€‚<strong>è°¨æ…ä½¿ç”¨</strong>ï¼Œç”Ÿäº§ç¯å¢ƒæ¨èå…ˆç”¨ <code>copy</code> åšè¿ç§»ï¼Œå†ç”¨ <code>sync</code> åšæ ¡éªŒã€‚</p></li></ul></li></ul><hr><h4 id="Step-3ï¼šæ ¡éªŒå®Œæ•´æ€§"><a href="#Step-3ï¼šæ ¡éªŒå®Œæ•´æ€§" class="headerlink" title="Step 3ï¼šæ ¡éªŒå®Œæ•´æ€§"></a><strong>Step 3ï¼šæ ¡éªŒå®Œæ•´æ€§</strong></h4><ol><li>ä½¿ç”¨ rclone çš„ <code>check</code> å‘½ä»¤ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rclone check <span class="hljs-built_in">source</span>:bucket-name target:bucket-name --one-way --size-only<br></code></pre></td></tr></table></figure><ul><li><p><code>--one-way</code>ï¼šåªæ£€æŸ¥ç›®æ ‡ç¼ºå¤±æˆ–ä¸ä¸€è‡´çš„æ–‡ä»¶ã€‚</p></li><li><p><code>--size-only</code> æˆ– <code>--checksum</code>ï¼šå»ºè®®ä½¿ç”¨ <code>--checksum</code> åšä¸¥æ ¼æ ¡éªŒã€‚</p></li></ul><p><strong>é€»è¾‘</strong>ï¼š</p><ul><li><p>æ£€æŸ¥ç»“æœä¸ºç©º â†’ è¡¨ç¤ºæ‰€æœ‰æ–‡ä»¶ä¼ è¾“å®Œæ•´ã€‚</p></li><li><p>æœ‰æ–‡ä»¶ç¼ºå¤± â†’ å†æ¬¡ä½¿ç”¨ <code>rclone copy</code> è¡¥ä¼ ã€‚</p></li></ul><hr><h4 id="Step-4ï¼šå¢é‡åŒæ­¥"><a href="#Step-4ï¼šå¢é‡åŒæ­¥" class="headerlink" title="Step 4ï¼šå¢é‡åŒæ­¥"></a><strong>Step 4ï¼šå¢é‡åŒæ­¥</strong></h4><p>åœ¨åˆæ¬¡å…¨é‡è¿ç§»åï¼Œæ—§ MinIO å¯èƒ½ä»åœ¨å†™æ–°æ–‡ä»¶ã€‚æ­¤æ—¶é‡‡ç”¨å¢é‡åŒæ­¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rclone copy <span class="hljs-built_in">source</span>:bucket-name target:bucket-name \     --checksum \     --update \     --progress \     --retries=10<br></code></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><ul><li><p><code>--update</code>ï¼šåªåŒæ­¥æºä¸­æ–°æˆ–è¢«ä¿®æ”¹çš„æ–‡ä»¶ã€‚</p></li><li><p>å¯å®šæœŸï¼ˆå¦‚æ¯å°æ—¶ã€æ¯å¤©ï¼‰æ‰§è¡Œã€‚</p></li><li><p>æ¯æ¬¡å¢é‡åŒæ­¥åï¼Œå†ç”¨ <code>rclone check</code> åšå®Œæ•´æ€§æ ¡éªŒã€‚</p></li></ul><hr><h4 id="Step-5ï¼šæœ€ç»ˆç¡®è®¤"><a href="#Step-5ï¼šæœ€ç»ˆç¡®è®¤" class="headerlink" title="Step 5ï¼šæœ€ç»ˆç¡®è®¤"></a><strong>Step 5ï¼šæœ€ç»ˆç¡®è®¤</strong></h4><ol><li>å…¨é‡+å¢é‡åŒæ­¥å®Œæˆåï¼Œå†æ¬¡æ‰§è¡Œï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rclone check <span class="hljs-built_in">source</span>:bucket-name target:bucket-name --checksum<br></code></pre></td></tr></table></figure><p>ç¡®ä¿æ— å·®å¼‚ã€‚<br>2. å¯é€‰ï¼šåœ¨ç›®æ ‡ MinIO ä¸Šå¼€å¯ <strong>æ¡¶ç‰ˆæœ¬æ§åˆ¶</strong>ï¼Œä»¥é˜²è¯¯åˆ ã€‚</p><hr><h3 id="Step-6ï¼šè‡ªåŠ¨åŒ–ä¸æ—¥å¿—"><a href="#Step-6ï¼šè‡ªåŠ¨åŒ–ä¸æ—¥å¿—" class="headerlink" title="Step 6ï¼šè‡ªåŠ¨åŒ–ä¸æ—¥å¿—"></a><strong>Step 6ï¼šè‡ªåŠ¨åŒ–ä¸æ—¥å¿—</strong></h3><ul><li><p>åœ¨ Linux ä¸Šå¯ä»¥ç”¨ cron å®šæ—¶åŒæ­¥å¢é‡ã€‚</p></li><li><p>æ—¥å¿—å»ºè®®å†™åˆ°æ–‡ä»¶ï¼š</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rclone copy ... &gt;&gt; /var/log/rclone_migration.log 2&gt;&amp;1<br></code></pre></td></tr></table></figure><ul><li>å¯¹é‡è¦æ•°æ®ï¼Œå»ºè®®åœ¨è¿ç§»å®Œæˆååšä¸€æ¬¡<strong>MD5&#x2F;SHA256 æ ¡éªŒ</strong>ï¼Œå¯ç”¨ <code>rclone md5sum</code> æˆ– <code>sha256sum</code>ã€‚</li></ul><hr><h2 id="3ï¸âƒ£-è·¨å¹³å°å¯è¡Œæ€§"><a href="#3ï¸âƒ£-è·¨å¹³å°å¯è¡Œæ€§" class="headerlink" title="3ï¸âƒ£ è·¨å¹³å°å¯è¡Œæ€§"></a>3ï¸âƒ£ è·¨å¹³å°å¯è¡Œæ€§</h2><p>rclone å®˜æ–¹æ”¯æŒï¼š</p><ul><li><p><strong>Linux</strong>ï¼šäºŒè¿›åˆ¶ã€Snapã€åŒ…ç®¡ç†å™¨å®‰è£…ã€‚</p></li><li><p><strong>Windows</strong>ï¼šå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆexeï¼‰ã€‚</p></li><li><p><strong>MacOS</strong>ï¼šHomebrew å®‰è£…æˆ–ç›´æ¥ä¸‹è½½äºŒè¿›åˆ¶ã€‚</p></li><li><p>åŒä¸€å‘½ä»¤è¡Œè¯­æ³•ä¸€è‡´ï¼Œæ— éœ€æ”¹åŠ¨ã€‚</p></li></ul><p>æ‰€ä»¥ä½ çš„è¿ç§»ç­–ç•¥å¯ä»¥åœ¨ä¸‰å¹³å°é€šç”¨ã€‚</p><hr><h2 id="4ï¸âƒ£-æ€»ç»“"><a href="#4ï¸âƒ£-æ€»ç»“" class="headerlink" title="4ï¸âƒ£ æ€»ç»“"></a>4ï¸âƒ£ æ€»ç»“</h2><p>ä¸ºäº†ä¿è¯â€œä¸€æ¡æ•°æ®éƒ½ä¸æ¼ï¼Œæ¯æ¡éƒ½å®Œæ•´â€ï¼š</p><ol><li><p><strong>ç¬¬ä¸€æ¬¡å…¨é‡è¿ç§»</strong> â†’ <code>rclone sync</code> &#x2F; <code>rclone copy</code> + <code>--checksum</code></p></li><li><p><strong>æ ¡éªŒå®Œæ•´æ€§</strong> â†’ <code>rclone check</code>ï¼ˆæˆ– md5sumï¼‰</p></li><li><p><strong>å¢é‡åŒæ­¥</strong> â†’ å®šæœŸ <code>rclone copy --update --checksum</code></p></li><li><p><strong>æœ€ç»ˆç¡®è®¤</strong> â†’ å†æ¬¡ <code>rclone check</code></p></li><li><p><strong>å¯é€‰</strong>ï¼šå¼€å¯ç‰ˆæœ¬æ§åˆ¶æˆ–æ—¥å¿—å®¡è®¡</p></li></ol><p>ä½¿ç”¨ rclone å¯ä»¥ä¿è¯<strong>æ•°æ®å®Œæ•´ã€æ–­ç‚¹ç»­ä¼ ã€è·¨å¹³å°</strong>ï¼Œåªè¦ä¸¥æ ¼æ‰§è¡Œâ€œå…¨é‡â†’æ ¡éªŒâ†’å¢é‡â†’æ ¡éªŒâ€çš„æµç¨‹ï¼Œå°±å¯ä»¥åšåˆ°é›¶æ¼æ•°æ®ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å·¥å…·ä¸æ•ˆç‡</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MinIO rclone æ•°æ®è¿ç§»</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MinIO åˆ†å¸ƒå¼éƒ¨ç½²ï¼ˆKubernetesï¼‰</title>
    <link href="/2025/09/05/MinIO-%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2%EF%BC%88Kubernetes%EF%BC%89/"/>
    <url>/2025/09/05/MinIO-%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2%EF%BC%88Kubernetes%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="ğŸ“‹-ç›®å½•"><a href="#ğŸ“‹-ç›®å½•" class="headerlink" title="ğŸ“‹ ç›®å½•"></a>ğŸ“‹ ç›®å½•</h2><ul><li><a href="#%E9%83%A8%E7%BD%B2%E5%89%8D%E5%87%86%E5%A4%87">éƒ¨ç½²å‰å‡†å¤‡</a></li><li><a href="#kubernetes-%E9%83%A8%E7%BD%B2%E6%9E%B6%E6%9E%84">Kubernetes éƒ¨ç½²æ¶æ„</a></li><li><a href="#yaml-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3">YAML é…ç½®æ–‡ä»¶è¯¦è§£</a></li><li><a href="#%E9%83%A8%E7%BD%B2%E6%AD%A5%E9%AA%A4">éƒ¨ç½²æ­¥éª¤</a></li><li><a href="#docker-vs-kubernetes-%E5%AF%B9%E6%AF%94">Docker vs Kubernetes å¯¹æ¯”</a></li><li><a href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹</a></li><li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">å‚è€ƒèµ„æ–™</a></li></ul><h2 id="éƒ¨ç½²å‰å‡†å¤‡"><a href="#éƒ¨ç½²å‰å‡†å¤‡" class="headerlink" title="éƒ¨ç½²å‰å‡†å¤‡"></a>éƒ¨ç½²å‰å‡†å¤‡</h2><h3 id="æ£€æŸ¥å­˜å‚¨ç±»"><a href="#æ£€æŸ¥å­˜å‚¨ç±»" class="headerlink" title="æ£€æŸ¥å­˜å‚¨ç±»"></a>æ£€æŸ¥å­˜å‚¨ç±»</h3><p>åœ¨å¼€å§‹éƒ¨ç½²ä¹‹å‰ï¼Œç¡®ä¿ä½ çš„ Kubernetes é›†ç¾¤æœ‰å¯ç”¨çš„å­˜å‚¨ç±»ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">kubectl get storageclass<br></code></pre></td></tr></table></figure><blockquote><p>âš ï¸ <strong>é‡è¦</strong>ï¼šå¦‚æœæ²¡æœ‰é»˜è®¤çš„å­˜å‚¨ç±»ï¼ŒPVC å°†æ— æ³•ç»‘å®šï¼Œå¯¼è‡´ Pod å¯åŠ¨å¤±è´¥</p></blockquote><h3 id="ç³»ç»Ÿè¦æ±‚"><a href="#ç³»ç»Ÿè¦æ±‚" class="headerlink" title="ç³»ç»Ÿè¦æ±‚"></a>ç³»ç»Ÿè¦æ±‚</h3><ul><li>Kubernetes é›†ç¾¤ï¼ˆå»ºè®® 1.20+ï¼‰</li><li>å¯ç”¨çš„å­˜å‚¨ç±»ï¼ˆå¦‚ NFSã€Ceph ç­‰ï¼‰</li><li>è‡³å°‘ 4 ä¸ªèŠ‚ç‚¹ä»¥è·å¾—æœ€ä½³æ€§èƒ½</li><li>è¶³å¤Ÿçš„å­˜å‚¨ç©ºé—´ï¼ˆå»ºè®®æ¯ä¸ªèŠ‚ç‚¹ 5GB+ï¼‰</li></ul><h2 id="Kubernetes-éƒ¨ç½²æ¶æ„"><a href="#Kubernetes-éƒ¨ç½²æ¶æ„" class="headerlink" title="Kubernetes éƒ¨ç½²æ¶æ„"></a>Kubernetes éƒ¨ç½²æ¶æ„</h2><h3 id="ç»„ä»¶è¯´æ˜"><a href="#ç»„ä»¶è¯´æ˜" class="headerlink" title="ç»„ä»¶è¯´æ˜"></a>ç»„ä»¶è¯´æ˜</h3><table><thead><tr><th>ç»„ä»¶</th><th>ä½œç”¨</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>StatefulSet</strong></td><td>ç®¡ç†æœ‰çŠ¶æ€ Pod</td><td>å›ºå®šç½‘ç»œèº«ä»½ã€æœ‰åºéƒ¨ç½²</td></tr><tr><td><strong>Headless Service</strong></td><td>Pod é—´æœåŠ¡å‘ç°</td><td>æ—  ClusterIPï¼Œæä¾› DNS è§£æ</td></tr><tr><td><strong>NodePort Service</strong></td><td>å¯¹å¤–æš´éœ²æœåŠ¡</td><td>é€šè¿‡èŠ‚ç‚¹ç«¯å£è®¿é—®</td></tr><tr><td><strong>PVC</strong></td><td>æŒä¹…åŒ–å­˜å‚¨</td><td>è‡ªåŠ¨ç»‘å®šï¼Œæ•°æ®æŒä¹…åŒ–</td></tr></tbody></table><h2 id="YAML-é…ç½®æ–‡ä»¶è¯¦è§£"><a href="#YAML-é…ç½®æ–‡ä»¶è¯¦è§£" class="headerlink" title="YAML é…ç½®æ–‡ä»¶è¯¦è§£"></a>YAML é…ç½®æ–‡ä»¶è¯¦è§£</h2><h3 id="1ï¸âƒ£-Headless-Service"><a href="#1ï¸âƒ£-Headless-Service" class="headerlink" title="1ï¸âƒ£ Headless Service"></a>1ï¸âƒ£ Headless Service</h3><p><strong>ä½œç”¨</strong>ï¼šä¸º StatefulSet æä¾›å›ºå®šåŸŸåè§£æï¼Œå®ç° Pod é—´æœåŠ¡å‘ç°</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">minio-hl-svc</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">satellite-micro</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">clusterIP:</span> <span class="hljs-string">None</span>   <span class="hljs-comment"># å…³é”®ï¼šHeadless Service</span><br>  <span class="hljs-attr">publishNotReadyAddresses:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">minio</span><br>  <span class="hljs-attr">ports:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">api</span><br>      <span class="hljs-attr">port:</span> <span class="hljs-number">9000</span><br>      <span class="hljs-attr">targetPort:</span> <span class="hljs-number">9000</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">console</span><br>      <span class="hljs-attr">port:</span> <span class="hljs-number">9001</span><br>      <span class="hljs-attr">targetPort:</span> <span class="hljs-number">9001</span><br></code></pre></td></tr></table></figure><p><strong>å…³é”®é…ç½®è¯´æ˜</strong>ï¼š</p><ul><li><code>clusterIP: None</code>ï¼šåˆ›å»º Headless Service</li><li><code>publishNotReadyAddresses: true</code>ï¼šå³ä½¿ Pod æœªå°±ç»ªä¹Ÿå‘å¸ƒåœ°å€</li></ul><h3 id="2ï¸âƒ£-NodePort-Service"><a href="#2ï¸âƒ£-NodePort-Service" class="headerlink" title="2ï¸âƒ£ NodePort Service"></a>2ï¸âƒ£ NodePort Service</h3><p><strong>ä½œç”¨</strong>ï¼šå¯¹å¤–æš´éœ² MinIO æœåŠ¡ï¼Œæä¾›å¤–éƒ¨è®¿é—®å…¥å£</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">minio-svc</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">satellite-micro</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">NodePort</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">minio</span><br>  <span class="hljs-attr">ports:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">api</span><br>      <span class="hljs-attr">port:</span> <span class="hljs-number">9000</span><br>      <span class="hljs-attr">targetPort:</span> <span class="hljs-number">9000</span><br>      <span class="hljs-attr">nodePort:</span> <span class="hljs-number">30900</span>   <span class="hljs-comment"># è‡ªå®šä¹‰èŠ‚ç‚¹ç«¯å£</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">console</span><br>      <span class="hljs-attr">port:</span> <span class="hljs-number">9001</span><br>      <span class="hljs-attr">targetPort:</span> <span class="hljs-number">9001</span><br>      <span class="hljs-attr">nodePort:</span> <span class="hljs-number">30901</span>   <span class="hljs-comment"># è‡ªå®šä¹‰èŠ‚ç‚¹ç«¯å£</span><br></code></pre></td></tr></table></figure><p><strong>ç«¯å£æ˜ å°„</strong>ï¼š</p><ul><li><code>30900</code>ï¼šMinIO API æ¥å£</li><li><code>30901</code>ï¼šMinIO ç®¡ç†æ§åˆ¶å°</li></ul><h3 id="3ï¸âƒ£-StatefulSet"><a href="#3ï¸âƒ£-StatefulSet" class="headerlink" title="3ï¸âƒ£ StatefulSet"></a>3ï¸âƒ£ StatefulSet</h3><p><strong>ä½œç”¨</strong>ï¼šç®¡ç† MinIO Pod å’Œ PVCï¼Œç¡®ä¿æœ‰çŠ¶æ€æœåŠ¡çš„ç¨³å®šæ€§</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">StatefulSet</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">minio</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">satellite-micro</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">serviceName:</span> <span class="hljs-string">minio-hl-svc</span><br>  <span class="hljs-attr">replicas:</span> <span class="hljs-number">4</span>  <span class="hljs-comment"># å››ä¸ªèŠ‚ç‚¹</span><br>  <span class="hljs-attr">podManagementPolicy:</span> <span class="hljs-string">Parallel</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">matchLabels:</span><br>      <span class="hljs-attr">app:</span> <span class="hljs-string">minio</span><br>  <span class="hljs-attr">template:</span><br>    <span class="hljs-attr">metadata:</span><br>      <span class="hljs-attr">labels:</span><br>        <span class="hljs-attr">app:</span> <span class="hljs-string">minio</span><br>    <span class="hljs-attr">spec:</span><br>      <span class="hljs-attr">securityContext:</span><br>        <span class="hljs-attr">fsGroup:</span> <span class="hljs-number">1000</span><br>      <span class="hljs-attr">affinity:</span><br>        <span class="hljs-attr">podAntiAffinity:</span>   <span class="hljs-comment"># å°½é‡æŠŠ Pod åˆ†æ•£åˆ°ä¸åŒèŠ‚ç‚¹</span><br>          <span class="hljs-attr">preferredDuringSchedulingIgnoredDuringExecution:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-attr">weight:</span> <span class="hljs-number">100</span><br>              <span class="hljs-attr">podAffinityTerm:</span><br>                <span class="hljs-attr">labelSelector:</span><br>                  <span class="hljs-attr">matchExpressions:</span><br>                    <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">app</span><br>                      <span class="hljs-attr">operator:</span> <span class="hljs-string">In</span><br>                      <span class="hljs-attr">values:</span> [<span class="hljs-string">&quot;minio&quot;</span>]<br>                <span class="hljs-attr">topologyKey:</span> <span class="hljs-string">kubernetes.io/hostname</span><br>      <span class="hljs-attr">containers:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">minio</span><br>          <span class="hljs-attr">image:</span> <span class="hljs-number">223.2</span><span class="hljs-number">.44</span><span class="hljs-number">.251</span><span class="hljs-string">/satellite/minio:latest</span><br>          <span class="hljs-attr">imagePullPolicy:</span> <span class="hljs-string">IfNotPresent</span><br>          <span class="hljs-attr">args:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">server</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">--address=:9000</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">--console-address=:9001</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">http://minio-&#123;0...3&#125;.minio-hl-svc.satellite-micro.svc.cluster.local:9000/data</span><br>          <span class="hljs-attr">env:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">MINIO_ROOT_USER</span><br>              <span class="hljs-attr">value:</span> <span class="hljs-string">&quot;minioadmin&quot;</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">MINIO_ROOT_PASSWORD</span><br>              <span class="hljs-attr">value:</span> <span class="hljs-string">&quot;minioadmin&quot;</span><br>          <span class="hljs-attr">ports:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">api</span><br>              <span class="hljs-attr">containerPort:</span> <span class="hljs-number">9000</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">console</span><br>              <span class="hljs-attr">containerPort:</span> <span class="hljs-number">9001</span><br>          <span class="hljs-attr">volumeMounts:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">data</span><br>              <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/data</span><br>          <span class="hljs-attr">readinessProbe:</span><br>            <span class="hljs-attr">httpGet:</span><br>              <span class="hljs-attr">path:</span> <span class="hljs-string">/minio/health/ready</span><br>              <span class="hljs-attr">port:</span> <span class="hljs-number">9000</span><br>            <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">20</span><br>            <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">10</span><br>          <span class="hljs-attr">livenessProbe:</span><br>            <span class="hljs-attr">httpGet:</span><br>              <span class="hljs-attr">path:</span> <span class="hljs-string">/minio/health/live</span><br>              <span class="hljs-attr">port:</span> <span class="hljs-number">9000</span><br>            <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">120</span><br>            <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">20</span><br>  <span class="hljs-attr">volumeClaimTemplates:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">metadata:</span><br>        <span class="hljs-attr">name:</span> <span class="hljs-string">data</span><br>      <span class="hljs-attr">spec:</span><br>        <span class="hljs-attr">accessModes:</span> [<span class="hljs-string">&quot;ReadWriteOnce&quot;</span>]<br>        <span class="hljs-attr">storageClassName:</span> <span class="hljs-string">nfs-client</span>   <span class="hljs-comment"># ä½¿ç”¨ä½ çš„å­˜å‚¨ç±»</span><br>        <span class="hljs-attr">resources:</span><br>          <span class="hljs-attr">requests:</span><br>            <span class="hljs-attr">storage:</span> <span class="hljs-string">5Gi</span><br></code></pre></td></tr></table></figure><h3 id="å…³é”®é…ç½®è§£æ"><a href="#å…³é”®é…ç½®è§£æ" class="headerlink" title="å…³é”®é…ç½®è§£æ"></a>å…³é”®é…ç½®è§£æ</h3><h4 id="ç½‘ç»œé…ç½®"><a href="#ç½‘ç»œé…ç½®" class="headerlink" title="ç½‘ç»œé…ç½®"></a>ç½‘ç»œé…ç½®</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># åˆ†å¸ƒå¼èŠ‚ç‚¹åœ°å€ï¼ˆ0-3 é¡ºåºä¸è¦éšæ„æ”¹ï¼‰</span><br><span class="hljs-string">http://minio-&#123;0...3&#125;.minio-hl-svc.satellite-micro.svc.cluster.local:9000/data</span><br></code></pre></td></tr></table></figure><h4 id="å¥åº·æ£€æŸ¥"><a href="#å¥åº·æ£€æŸ¥" class="headerlink" title="å¥åº·æ£€æŸ¥"></a>å¥åº·æ£€æŸ¥</h4><ul><li><strong>å°±ç»ªæ¢é’ˆ</strong>ï¼šæ£€æŸ¥æœåŠ¡æ˜¯å¦å‡†å¤‡å¥½æ¥æ”¶æµé‡</li><li><strong>å­˜æ´»æ¢é’ˆ</strong>ï¼šæ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ</li></ul><h4 id="å­˜å‚¨é…ç½®"><a href="#å­˜å‚¨é…ç½®" class="headerlink" title="å­˜å‚¨é…ç½®"></a>å­˜å‚¨é…ç½®</h4><ul><li><strong>PVC æ¨¡æ¿</strong>ï¼šè‡ªåŠ¨ä¸ºæ¯ä¸ª Pod åˆ›å»ºç‹¬ç«‹çš„å­˜å‚¨å·</li><li><strong>å­˜å‚¨ç±»</strong>ï¼šæ ¹æ®ä½ çš„é›†ç¾¤ç¯å¢ƒé€‰æ‹©åˆé€‚çš„å­˜å‚¨ç±»</li></ul><h2 id="éƒ¨ç½²æ­¥éª¤"><a href="#éƒ¨ç½²æ­¥éª¤" class="headerlink" title="éƒ¨ç½²æ­¥éª¤"></a>éƒ¨ç½²æ­¥éª¤</h2><h3 id="1-åˆ›å»ºé…ç½®æ–‡ä»¶"><a href="#1-åˆ›å»ºé…ç½®æ–‡ä»¶" class="headerlink" title="1. åˆ›å»ºé…ç½®æ–‡ä»¶"></a>1. åˆ›å»ºé…ç½®æ–‡ä»¶</h3><p>å°†ä¸Šè¿° YAML å†…å®¹åˆ†åˆ«ä¿å­˜ä¸ºï¼š</p><ul><li><code>01-minio-headless-svc.yaml</code></li><li><code>02-minio-svc.yaml</code></li><li><code>03-minio-statefulset.yaml</code></li></ul><h3 id="2-æŒ‰é¡ºåºéƒ¨ç½²"><a href="#2-æŒ‰é¡ºåºéƒ¨ç½²" class="headerlink" title="2. æŒ‰é¡ºåºéƒ¨ç½²"></a>2. æŒ‰é¡ºåºéƒ¨ç½²</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. åˆ›å»º Headless Service</span><br>kubectl apply -f 01-minio-headless-svc.yaml<br><br><span class="hljs-comment"># 2. åˆ›å»º NodePort Service</span><br>kubectl apply -f 02-minio-svc.yaml<br><br><span class="hljs-comment"># 3. åˆ›å»º StatefulSet</span><br>kubectl apply -f 03-minio-statefulset.yaml<br></code></pre></td></tr></table></figure><h3 id="3-éªŒè¯éƒ¨ç½²"><a href="#3-éªŒè¯éƒ¨ç½²" class="headerlink" title="3. éªŒè¯éƒ¨ç½²"></a>3. éªŒè¯éƒ¨ç½²</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ£€æŸ¥ Pod çŠ¶æ€</span><br>kubectl get pods -n satellite-micro<br><br><span class="hljs-comment"># æ£€æŸ¥ Service</span><br>kubectl get svc -n satellite-micro<br><br><span class="hljs-comment"># æ£€æŸ¥ PVC</span><br>kubectl get pvc -n satellite-micro<br><br><span class="hljs-comment"># æŸ¥çœ‹ Pod æ—¥å¿—</span><br>kubectl logs -f minio-0 -n satellite-micro<br></code></pre></td></tr></table></figure><h3 id="4-è®¿é—®æœåŠ¡"><a href="#4-è®¿é—®æœåŠ¡" class="headerlink" title="4. è®¿é—®æœåŠ¡"></a>4. è®¿é—®æœåŠ¡</h3><p>éƒ¨ç½²å®Œæˆåï¼Œé€šè¿‡ä»¥ä¸‹æ–¹å¼è®¿é—®ï¼š</p><ul><li><strong>API æ¥å£</strong>ï¼š<code>http://your-node-ip:30900</code></li><li><strong>ç®¡ç†æ§åˆ¶å°</strong>ï¼š<code>http://your-node-ip:30901</code></li></ul><h2 id="Docker-vs-Kubernetes-å¯¹æ¯”"><a href="#Docker-vs-Kubernetes-å¯¹æ¯”" class="headerlink" title="Docker vs Kubernetes å¯¹æ¯”"></a>Docker vs Kubernetes å¯¹æ¯”</h2><h3 id="1ï¸âƒ£-Docker-åˆ†å¸ƒå¼æ¨¡å¼"><a href="#1ï¸âƒ£-Docker-åˆ†å¸ƒå¼æ¨¡å¼" class="headerlink" title="1ï¸âƒ£ Docker åˆ†å¸ƒå¼æ¨¡å¼"></a>1ï¸âƒ£ Docker åˆ†å¸ƒå¼æ¨¡å¼</h3><p><strong>ç‰¹ç‚¹</strong>ï¼šéœ€è¦æ‰‹åŠ¨é…ç½®ç½‘ç»œå’Œå­˜å‚¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># éœ€è¦æ‰‹åŠ¨é…ç½® hosts æ–‡ä»¶</span><br>minio-0 10.0.0.1<br>minio-1 10.0.0.2<br>minio-2 10.0.0.3<br>minio-3 10.0.0.4<br><br><span class="hljs-comment"># å¯åŠ¨å‘½ä»¤</span><br>minio server http://minio-0/data http://minio-1/data http://minio-2/data http://minio-3/data<br></code></pre></td></tr></table></figure><p><strong>ç¼ºç‚¹</strong>ï¼š</p><ul><li>éœ€è¦æ‰‹åŠ¨ç®¡ç†ç½‘ç»œé…ç½®</li><li>å­˜å‚¨ç®¡ç†å¤æ‚</li><li>æ‰©ç¼©å®¹å›°éš¾</li><li>ç¼ºä¹è‡ªåŠ¨æ•…éšœæ¢å¤</li></ul><h3 id="2ï¸âƒ£-Kubernetes-StatefulSet-æ¨¡å¼"><a href="#2ï¸âƒ£-Kubernetes-StatefulSet-æ¨¡å¼" class="headerlink" title="2ï¸âƒ£ Kubernetes StatefulSet æ¨¡å¼"></a>2ï¸âƒ£ Kubernetes StatefulSet æ¨¡å¼</h3><p><strong>ç‰¹ç‚¹</strong>ï¼šè‡ªåŠ¨åŒ–ç®¡ç†ï¼Œé«˜å¯ç”¨æ€§</p><h4 id="è‡ªåŠ¨æœåŠ¡å‘ç°"><a href="#è‡ªåŠ¨æœåŠ¡å‘ç°" class="headerlink" title="è‡ªåŠ¨æœåŠ¡å‘ç°"></a>è‡ªåŠ¨æœåŠ¡å‘ç°</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># Pod å›ºå®šå‘½å</span><br><span class="hljs-string">minio-0,</span> <span class="hljs-string">minio-1,</span> <span class="hljs-string">minio-2,</span> <span class="hljs-string">minio-3</span><br><br><span class="hljs-comment"># DNS è‡ªåŠ¨è§£æ</span><br><span class="hljs-string">minio-0.minio-hl-svc.satellite-micro.svc.cluster.local</span><br><span class="hljs-string">minio-1.minio-hl-svc.satellite-micro.svc.cluster.local</span><br><span class="hljs-comment"># ...</span><br></code></pre></td></tr></table></figure><h4 id="ä¼˜åŠ¿å¯¹æ¯”"><a href="#ä¼˜åŠ¿å¯¹æ¯”" class="headerlink" title="ä¼˜åŠ¿å¯¹æ¯”"></a>ä¼˜åŠ¿å¯¹æ¯”</h4><table><thead><tr><th>ç‰¹æ€§</th><th>Docker</th><th>Kubernetes</th></tr></thead><tbody><tr><td><strong>æœåŠ¡å‘ç°</strong></td><td>æ‰‹åŠ¨é…ç½® hosts</td><td>DNS è‡ªåŠ¨è§£æ</td></tr><tr><td><strong>å­˜å‚¨ç®¡ç†</strong></td><td>æ‰‹åŠ¨æŒ‚è½½</td><td>PVC è‡ªåŠ¨ç»‘å®š</td></tr><tr><td><strong>æ‰©ç¼©å®¹</strong></td><td>å¤æ‚</td><td>ç®€å•ï¼ˆä¿®æ”¹ replicasï¼‰</td></tr><tr><td><strong>æ•…éšœæ¢å¤</strong></td><td>æ‰‹åŠ¨å¤„ç†</td><td>è‡ªåŠ¨é‡å¯</td></tr><tr><td><strong>è´Ÿè½½å‡è¡¡</strong></td><td>éœ€è¦ Nginx</td><td>Service è‡ªåŠ¨å¤„ç†</td></tr><tr><td><strong>ç›‘æ§</strong></td><td>éœ€è¦é¢å¤–å·¥å…·</td><td>åŸç”Ÿæ”¯æŒ</td></tr></tbody></table><h2 id="å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹"><a href="#å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹" class="headerlink" title="å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹"></a>å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹</h2><h3 id="âš ï¸-é‡è¦æé†’"><a href="#âš ï¸-é‡è¦æé†’" class="headerlink" title="âš ï¸ é‡è¦æé†’"></a>âš ï¸ é‡è¦æé†’</h3><ol><li><strong>èŠ‚ç‚¹é¡ºåº</strong>ï¼š<code>minio-&#123;0...3&#125;</code> ä¸­çš„ 0-3 é¡ºåºä¸è¦éšæ„æ”¹åŠ¨</li><li><strong>å­˜å‚¨ç±»</strong>ï¼šç¡®ä¿ <code>storageClassName</code> ä¸ä½ çš„é›†ç¾¤ç¯å¢ƒåŒ¹é…</li><li><strong>å‘½åç©ºé—´</strong>ï¼šæ‰€æœ‰èµ„æºå¿…é¡»åœ¨åŒä¸€ä¸ªå‘½åç©ºé—´ä¸­</li><li><strong>ç½‘ç»œç­–ç•¥</strong>ï¼šç¡®ä¿ Pod é—´ç½‘ç»œé€šä¿¡æ­£å¸¸</li></ol><h3 id="ğŸ”§-æ•…éšœæ’æŸ¥"><a href="#ğŸ”§-æ•…éšœæ’æŸ¥" class="headerlink" title="ğŸ”§ æ•…éšœæ’æŸ¥"></a>ğŸ”§ æ•…éšœæ’æŸ¥</h3><h4 id="Pod-å¯åŠ¨å¤±è´¥"><a href="#Pod-å¯åŠ¨å¤±è´¥" class="headerlink" title="Pod å¯åŠ¨å¤±è´¥"></a>Pod å¯åŠ¨å¤±è´¥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ£€æŸ¥ Pod çŠ¶æ€</span><br>kubectl describe pod minio-0 -n satellite-micro<br><br><span class="hljs-comment"># æŸ¥çœ‹äº‹ä»¶</span><br>kubectl get events -n satellite-micro --sort-by=<span class="hljs-string">&#x27;.lastTimestamp&#x27;</span><br></code></pre></td></tr></table></figure><h4 id="PVC-ç»‘å®šå¤±è´¥"><a href="#PVC-ç»‘å®šå¤±è´¥" class="headerlink" title="PVC ç»‘å®šå¤±è´¥"></a>PVC ç»‘å®šå¤±è´¥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ£€æŸ¥å­˜å‚¨ç±»</span><br>kubectl get storageclass<br><br><span class="hljs-comment"># æ£€æŸ¥ PVC çŠ¶æ€</span><br>kubectl describe pvc data-minio-0 -n satellite-micro<br></code></pre></td></tr></table></figure><h4 id="ç½‘ç»œè¿æ¥é—®é¢˜"><a href="#ç½‘ç»œè¿æ¥é—®é¢˜" class="headerlink" title="ç½‘ç»œè¿æ¥é—®é¢˜"></a>ç½‘ç»œè¿æ¥é—®é¢˜</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æµ‹è¯• Pod é—´ç½‘ç»œ</span><br>kubectl <span class="hljs-built_in">exec</span> -it minio-0 -n satellite-micro -- nslookup minio-1.minio-hl-svc.satellite-micro.svc.cluster.local<br></code></pre></td></tr></table></figure><h3 id="ğŸ“Š-æ€§èƒ½ä¼˜åŒ–å»ºè®®"><a href="#ğŸ“Š-æ€§èƒ½ä¼˜åŒ–å»ºè®®" class="headerlink" title="ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®"></a>ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3><ol><li><strong>èŠ‚ç‚¹åˆ†å¸ƒ</strong>ï¼šä½¿ç”¨ <code>podAntiAffinity</code> ç¡®ä¿ Pod åˆ†å¸ƒåœ¨ä¸åŒèŠ‚ç‚¹</li><li><strong>å­˜å‚¨ä¼˜åŒ–</strong>ï¼šæ ¹æ® I&#x2F;O éœ€æ±‚é€‰æ‹©åˆé€‚çš„å­˜å‚¨ç±»</li><li><strong>èµ„æºé™åˆ¶</strong>ï¼šä¸ºå®¹å™¨è®¾ç½®åˆé€‚çš„ CPU å’Œå†…å­˜é™åˆ¶</li><li><strong>ç½‘ç»œä¼˜åŒ–</strong>ï¼šä½¿ç”¨ CNI æ’ä»¶ä¼˜åŒ–ç½‘ç»œæ€§èƒ½</li></ol><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://www.cnblogs.com/Leonardo-li/p/18743772">k8sç¦»çº¿éƒ¨ç½²minioé›†ç¾¤</a></li><li><a href="https://cloud.tencent.com/developer/article/2246499">kuberneteså®‰è£…minioé›†ç¾¤</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>DevOps &amp; äº‘åŸç”Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MinIO</tag>
      
      <tag>åˆ†å¸ƒå¼å­˜å‚¨</tag>
      
      <tag>Kubernetes</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MinIO åˆ†å¸ƒå¼éƒ¨ç½²ï¼ˆDockerï¼‰</title>
    <link href="/2025/09/05/MinIO-%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2%EF%BC%88Docker%EF%BC%89/"/>
    <url>/2025/09/05/MinIO-%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2%EF%BC%88Docker%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>MinIOé›†ç¾¤æ„å»º + Dockerå®¹å™¨åŒ–éƒ¨ç½² + Nginxè´Ÿè½½å‡è¡¡</p><blockquote><p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šMinIO å®˜æ–¹æ¨è Kubernetes äº‘åŸç”Ÿéƒ¨ç½²æ–¹å¼ï¼Œä¸æä¾›ä¹Ÿä¸æ”¯æŒé‡‡ç”¨å„ç§å®¹å™¨åŒ–éƒ¨ç½²é›†ç¾¤çš„é€”å¾„ã€‚</p></blockquote><h2 id="ğŸ“‹-ç›®å½•"><a href="#ğŸ“‹-ç›®å½•" class="headerlink" title="ğŸ“‹ ç›®å½•"></a>ğŸ“‹ ç›®å½•</h2><ul><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2">ä¸ºä»€ä¹ˆé€‰æ‹©åˆ†å¸ƒå¼éƒ¨ç½²ï¼Ÿ</a></li><li><a href="#%E9%83%A8%E7%BD%B2%E5%89%8D%E5%87%86%E5%A4%87">éƒ¨ç½²å‰å‡†å¤‡</a></li><li><a href="#minio-%E5%88%86%E5%B8%83%E5%BC%8F%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2">MinIO åˆ†å¸ƒå¼å®¹å™¨åŒ–éƒ¨ç½²</a></li><li><a href="#nginx-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E9%85%8D%E7%BD%AE">Nginx è´Ÿè½½å‡è¡¡é…ç½®</a></li><li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">å‚è€ƒèµ„æ–™</a></li></ul><h2 id="ä¸ºä»€ä¹ˆé€‰æ‹©åˆ†å¸ƒå¼éƒ¨ç½²ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆé€‰æ‹©åˆ†å¸ƒå¼éƒ¨ç½²ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰æ‹©åˆ†å¸ƒå¼éƒ¨ç½²ï¼Ÿ"></a>ä¸ºä»€ä¹ˆé€‰æ‹©åˆ†å¸ƒå¼éƒ¨ç½²ï¼Ÿ</h2><p>MinIO å•ä½“åº”ç”¨å¹¶ä¸èƒ½å‘æŒ¥ MinIO è‡ªå¸¦åˆ†å¸ƒå¼å­˜å‚¨çš„ä¼˜åŠ¿ï¼š</p><ul><li>âœ… <strong>æ•°æ®å®¹ç¾</strong>ï¼šå¤šèŠ‚ç‚¹å¤‡ä»½ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±</li><li>âœ… <strong>è´Ÿè½½å‡è¡¡</strong>ï¼šåˆ†æ•£è¯·æ±‚å‹åŠ›ï¼Œæé«˜æ€§èƒ½</li><li>âœ… <strong>é«˜å¯ç”¨æ€§</strong>ï¼šé¿å…å•ç‚¹æ•…éšœï¼Œç¡®ä¿æœåŠ¡ç¨³å®šè¿è¡Œ</li></ul><blockquote><p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šå•èŠ‚ç‚¹éƒ¨ç½²éš¾å…ä¼šå‡ºç°å•ç‚¹æ•…éšœï¼Œæ— æ³•åšåˆ°æœåŠ¡çš„é«˜å¯ç”¨</p></blockquote><h2 id="éƒ¨ç½²å‰å‡†å¤‡"><a href="#éƒ¨ç½²å‰å‡†å¤‡" class="headerlink" title="éƒ¨ç½²å‰å‡†å¤‡"></a>éƒ¨ç½²å‰å‡†å¤‡</h2><h3 id="ç³»ç»Ÿè¦æ±‚"><a href="#ç³»ç»Ÿè¦æ±‚" class="headerlink" title="ç³»ç»Ÿè¦æ±‚"></a>ç³»ç»Ÿè¦æ±‚</h3><ul><li>MinIO å®˜æ–¹å»ºè®®é‡‡ç”¨ <strong>Kubernetes</strong> éƒ¨ç½²</li><li>ç¡®ä¿æ‰€æœ‰èŠ‚ç‚¹çš„ <strong>MinIO ç‰ˆæœ¬ä¸€è‡´</strong></li><li>å»ºè®®ä½¿ç”¨ 4 ä¸ªæˆ–æ›´å¤šèŠ‚ç‚¹ä»¥è·å¾—æœ€ä½³æ€§èƒ½</li></ul><h3 id="ç½‘ç»œé…ç½®"><a href="#ç½‘ç»œé…ç½®" class="headerlink" title="ç½‘ç»œé…ç½®"></a>ç½‘ç»œé…ç½®</h3><h4 id="1-è·å–èŠ‚ç‚¹-IP-åœ°å€"><a href="#1-è·å–èŠ‚ç‚¹-IP-åœ°å€" class="headerlink" title="1. è·å–èŠ‚ç‚¹ IP åœ°å€"></a>1. è·å–èŠ‚ç‚¹ IP åœ°å€</h4><p>åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è·å–å†…ç½‘ IPï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ip addr<br></code></pre></td></tr></table></figure><blockquote><p>ğŸ’¡ <strong>æç¤º</strong>ï¼šé˜¿é‡Œäº‘æœåŠ¡å™¨è¯·å‹¿é‡‡ç”¨å…¬ç½‘ IPï¼Œä½¿ç”¨å†…ç½‘ IP æ›´å®‰å…¨ä¸”æ€§èƒ½æ›´å¥½</p></blockquote><h4 id="2-é…ç½®ä¸»æœºåè§£æ"><a href="#2-é…ç½®ä¸»æœºåè§£æ" class="headerlink" title="2. é…ç½®ä¸»æœºåè§£æ"></a>2. é…ç½®ä¸»æœºåè§£æ</h4><p>åœ¨æ¯ä¸ªèŠ‚ç‚¹çš„ <code>/etc/hosts</code> æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">172.17.117.117 minio-1  <br>172.17.117.118 minio-2  <br>172.17.117.119 minio-3  <br>172.17.117.120 minio-4<br></code></pre></td></tr></table></figure><h4 id="3-æµ‹è¯•ç½‘ç»œè¿é€šæ€§"><a href="#3-æµ‹è¯•ç½‘ç»œè¿é€šæ€§" class="headerlink" title="3. æµ‹è¯•ç½‘ç»œè¿é€šæ€§"></a>3. æµ‹è¯•ç½‘ç»œè¿é€šæ€§</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">ping minio-1<br>ping minio-2<br>ping minio-3<br>ping minio-4<br></code></pre></td></tr></table></figure><h2 id="MinIO-åˆ†å¸ƒå¼å®¹å™¨åŒ–éƒ¨ç½²"><a href="#MinIO-åˆ†å¸ƒå¼å®¹å™¨åŒ–éƒ¨ç½²" class="headerlink" title="MinIO åˆ†å¸ƒå¼å®¹å™¨åŒ–éƒ¨ç½²"></a>MinIO åˆ†å¸ƒå¼å®¹å™¨åŒ–éƒ¨ç½²</h2><h3 id="å¯åŠ¨-MinIO-å®¹å™¨"><a href="#å¯åŠ¨-MinIO-å®¹å™¨" class="headerlink" title="å¯åŠ¨ MinIO å®¹å™¨"></a>å¯åŠ¨ MinIO å®¹å™¨</h3><p>åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run -d --name minio --net=host --restart=always --privileged=<span class="hljs-literal">true</span> -v /mnt/minio/data:/data -e MINIO_ROOT_USER=OGMS -e MINIO_ROOT_PASSWORD=ogms250410 minio/minio:latest server http://minio-&#123;1...4&#125;/data --console-address <span class="hljs-string">&quot;0.0.0.0:9101&quot;</span> --address <span class="hljs-string">&quot;0.0.0.0:9100&quot;</span><br></code></pre></td></tr></table></figure><h3 id="å‚æ•°è¯´æ˜"><a href="#å‚æ•°è¯´æ˜" class="headerlink" title="å‚æ•°è¯´æ˜"></a>å‚æ•°è¯´æ˜</h3><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>--net=host</code></td><td>å…±äº«å®¿ä¸»æœºç½‘ç»œå‘½åç©ºé—´</td></tr><tr><td><code>--restart=always</code></td><td>å®¹å™¨è‡ªåŠ¨é‡å¯</td></tr><tr><td><code>--privileged=true</code></td><td>ç»™äºˆå®¹å™¨ç‰¹æƒæ¨¡å¼</td></tr><tr><td><code>-v /mnt/minio/data:/data</code></td><td>æ•°æ®æŒä¹…åŒ–æŒ‚è½½</td></tr><tr><td><code>MINIO_ROOT_USER</code></td><td>MinIO ç®¡ç†å‘˜ç”¨æˆ·å</td></tr><tr><td><code>MINIO_ROOT_PASSWORD</code></td><td>MinIO ç®¡ç†å‘˜å¯†ç </td></tr><tr><td><code>--console-address</code></td><td>æ§åˆ¶å°è®¿é—®åœ°å€</td></tr><tr><td><code>--address</code></td><td>API è®¿é—®åœ°å€</td></tr></tbody></table><h3 id="æ£€æŸ¥å®¹å™¨çŠ¶æ€"><a href="#æ£€æŸ¥å®¹å™¨çŠ¶æ€" class="headerlink" title="æ£€æŸ¥å®¹å™¨çŠ¶æ€"></a>æ£€æŸ¥å®¹å™¨çŠ¶æ€</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker logs minio<br></code></pre></td></tr></table></figure><h2 id="Nginx-è´Ÿè½½å‡è¡¡é…ç½®"><a href="#Nginx-è´Ÿè½½å‡è¡¡é…ç½®" class="headerlink" title="Nginx è´Ÿè½½å‡è¡¡é…ç½®"></a>Nginx è´Ÿè½½å‡è¡¡é…ç½®</h2><h3 id="å¯åŠ¨-Nginx-å®¹å™¨"><a href="#å¯åŠ¨-Nginx-å®¹å™¨" class="headerlink" title="å¯åŠ¨ Nginx å®¹å™¨"></a>å¯åŠ¨ Nginx å®¹å™¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run -d --name minio_nginx --net=host -p 9000:9000 -p 9001:9001 -v /mnt/nginx/conf/nginx.conf:/etc/nginx/nginx.conf --restart=always --privileged=<span class="hljs-literal">true</span> nginx:latest<br><br><span class="hljs-comment"># æˆ–è€…ä½¿ç”¨ ARM ç‰ˆæœ¬</span><br><span class="hljs-comment"># nginx:alpine-arm</span><br></code></pre></td></tr></table></figure><h3 id="Nginx-é…ç½®æ–‡ä»¶"><a href="#Nginx-é…ç½®æ–‡ä»¶" class="headerlink" title="Nginx é…ç½®æ–‡ä»¶"></a>Nginx é…ç½®æ–‡ä»¶</h3><p>åˆ›å»º <code>/mnt/nginx/conf/nginx.conf</code> æ–‡ä»¶ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">worker_processes</span> auto;  <br><br><span class="hljs-section">events</span> &#123;  <br>    <span class="hljs-attribute">worker_connections</span> <span class="hljs-number">1024</span>;  <br>&#125;  <br><br><span class="hljs-section">http</span> &#123;  <br>    <span class="hljs-comment"># API è´Ÿè½½å‡è¡¡  </span><br>    <span class="hljs-section">upstream</span> minio_api &#123;  <br>        ip_hash;   <span class="hljs-comment"># ä½¿ç”¨ ip_hashï¼Œä¿è¯åŒä¸€ä¸ªå®¢æˆ·ç«¯å°½é‡è½åˆ°åŒä¸€èŠ‚ç‚¹ï¼Œé¿å…ä¼šè¯ä¸ä¸€è‡´  </span><br>        <span class="hljs-attribute">server</span> minio-<span class="hljs-number">1</span>:<span class="hljs-number">9100</span> max_fails=<span class="hljs-number">3</span> fail_timeout=<span class="hljs-number">30s</span>;  <br>        <span class="hljs-attribute">server</span> minio-<span class="hljs-number">2</span>:<span class="hljs-number">9100</span> max_fails=<span class="hljs-number">3</span> fail_timeout=<span class="hljs-number">30s</span>;  <br>        <span class="hljs-attribute">server</span> minio-<span class="hljs-number">3</span>:<span class="hljs-number">9100</span> max_fails=<span class="hljs-number">3</span> fail_timeout=<span class="hljs-number">30s</span>;  <br>        <span class="hljs-attribute">server</span> minio-<span class="hljs-number">4</span>:<span class="hljs-number">9100</span> max_fails=<span class="hljs-number">3</span> fail_timeout=<span class="hljs-number">30s</span>;  <br>    &#125;  <br><br>    <span class="hljs-comment"># æ§åˆ¶å°è´Ÿè½½å‡è¡¡  </span><br>    <span class="hljs-section">upstream</span> minio_console &#123;  <br>        <span class="hljs-attribute">server</span> minio-<span class="hljs-number">1</span>:<span class="hljs-number">9101</span>;  <br>        <span class="hljs-attribute">server</span> minio-<span class="hljs-number">2</span>:<span class="hljs-number">9101</span>;  <br>        <span class="hljs-attribute">server</span> minio-<span class="hljs-number">3</span>:<span class="hljs-number">9101</span>;  <br>        <span class="hljs-attribute">server</span> minio-<span class="hljs-number">4</span>:<span class="hljs-number">9101</span>;  <br>    &#125;  <br><br>    <span class="hljs-comment"># MinIO API æœåŠ¡</span><br>    <span class="hljs-section">server</span> &#123;  <br>        <span class="hljs-attribute">listen</span> <span class="hljs-number">9000</span>;  <br>        <span class="hljs-attribute">server_name</span> _;  <br><br>        <span class="hljs-attribute">client_max_body_size</span> <span class="hljs-number">0</span>;  <br>        <span class="hljs-attribute">proxy_buffering</span> <span class="hljs-literal">off</span>;  <br>        <span class="hljs-attribute">ignore_invalid_headers</span> <span class="hljs-literal">off</span>;  <br><br>        <span class="hljs-section">location</span> / &#123;  <br>            <span class="hljs-attribute">proxy_set_header</span> Host              <span class="hljs-variable">$http_host</span>;  <br>            <span class="hljs-attribute">proxy_set_header</span> X-Real-IP         <span class="hljs-variable">$remote_addr</span>;  <br>            <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For   <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;  <br>            <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-Proto <span class="hljs-variable">$scheme</span>;  <br><br>            <span class="hljs-attribute">proxy_connect_timeout</span> <span class="hljs-number">300</span>;  <br>            <span class="hljs-attribute">proxy_http_version</span> <span class="hljs-number">1</span>.<span class="hljs-number">1</span>;  <br>            <span class="hljs-attribute">chunked_transfer_encoding</span> <span class="hljs-literal">off</span>;  <br>            <span class="hljs-attribute">proxy_ignore_client_abort</span> <span class="hljs-literal">on</span>;  <br><br>            <span class="hljs-attribute">proxy_pass</span> http://minio_api;  <br>        &#125;  <br>    &#125;  <br><br>    <span class="hljs-comment"># MinIO Console æœåŠ¡</span><br>    <span class="hljs-section">server</span> &#123;  <br>        <span class="hljs-attribute">listen</span> <span class="hljs-number">9001</span>;  <br>        <span class="hljs-attribute">server_name</span> _;  <br><br>        <span class="hljs-section">location</span> / &#123;  <br>            <span class="hljs-attribute">proxy_set_header</span> Host              <span class="hljs-variable">$http_host</span>;  <br>            <span class="hljs-attribute">proxy_set_header</span> X-Real-IP         <span class="hljs-variable">$remote_addr</span>;  <br>            <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-For   <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;  <br>            <span class="hljs-attribute">proxy_set_header</span> X-Forwarded-Proto <span class="hljs-variable">$scheme</span>;  <br><br>            <span class="hljs-attribute">proxy_pass</span> http://minio_console;  <br>        &#125;  <br>    &#125;  <br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é…ç½®è¯´æ˜"><a href="#é…ç½®è¯´æ˜" class="headerlink" title="é…ç½®è¯´æ˜"></a>é…ç½®è¯´æ˜</h3><h4 id="è´Ÿè½½å‡è¡¡ç­–ç•¥"><a href="#è´Ÿè½½å‡è¡¡ç­–ç•¥" class="headerlink" title="è´Ÿè½½å‡è¡¡ç­–ç•¥"></a>è´Ÿè½½å‡è¡¡ç­–ç•¥</h4><ul><li><strong>API æœåŠ¡</strong>ï¼šä½¿ç”¨ <code>ip_hash</code> ç­–ç•¥ï¼Œç¡®ä¿åŒä¸€å®¢æˆ·ç«¯è¯·æ±‚è·¯ç”±åˆ°åŒä¸€èŠ‚ç‚¹</li><li><strong>æ§åˆ¶å°æœåŠ¡</strong>ï¼šä½¿ç”¨è½®è¯¢ç­–ç•¥ï¼Œåˆ†æ•£è®¿é—®å‹åŠ›</li></ul><h4 id="ç«¯å£æ˜ å°„"><a href="#ç«¯å£æ˜ å°„" class="headerlink" title="ç«¯å£æ˜ å°„"></a>ç«¯å£æ˜ å°„</h4><table><thead><tr><th>æœåŠ¡</th><th>ç«¯å£</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>MinIO API</td><td>9000</td><td>å¯¹è±¡å­˜å‚¨ API æ¥å£</td></tr><tr><td>MinIO Console</td><td>9001</td><td>Web ç®¡ç†æ§åˆ¶å°</td></tr></tbody></table><h2 id="ğŸ¯-éƒ¨ç½²å®Œæˆ"><a href="#ğŸ¯-éƒ¨ç½²å®Œæˆ" class="headerlink" title="ğŸ¯ éƒ¨ç½²å®Œæˆ"></a>ğŸ¯ éƒ¨ç½²å®Œæˆ</h2><p>éƒ¨ç½²å®Œæˆåï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¿é—®ï¼š</p><ul><li><strong>API æ¥å£</strong>ï¼š<code>http://your-server:9000</code></li><li><strong>ç®¡ç†æ§åˆ¶å°</strong>ï¼š<code>http://your-server:9001</code></li></ul><p>ä½¿ç”¨é…ç½®çš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•ç®¡ç†æ§åˆ¶å°ï¼Œå¼€å§‹ä½¿ç”¨ MinIO åˆ†å¸ƒå¼å­˜å‚¨æœåŠ¡ï¼</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://www.cnblogs.com/sunxun001/p/17420785.html">MinIO åˆ†å¸ƒå¼éƒ¨ç½²å®è·µ</a></li><li><a href="https://www.cnblogs.com/masonlee/p/12811784.html">MinIO é›†ç¾¤éƒ¨ç½²æŒ‡å—</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>DevOps &amp; äº‘åŸç”Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MinIO</tag>
      
      <tag>Docker</tag>
      
      <tag>åˆ†å¸ƒå¼å­˜å‚¨</tag>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue Composables - ç»„åˆå¼å‡½æ•°çš„åº”ç”¨</title>
    <link href="/2025/08/09/Vue-Composables-%E7%BB%84%E5%90%88%E5%BC%8F%E5%87%BD%E6%95%B0%E7%9A%84%E5%BA%94%E7%94%A8/"/>
    <url>/2025/08/09/Vue-Composables-%E7%BB%84%E5%90%88%E5%BC%8F%E5%87%BD%E6%95%B0%E7%9A%84%E5%BA%94%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>Vue3 å¸¦æ¥æœ€å¤§çš„é©æ–°è«è¿‡äºé€‰é¡¹å¼API (<code>Composition API</code>), å…¶ä¸­ä¸€å¤§ç‰¹æ€§å°±æ˜¯<code>ç»„åˆå¼å‡½æ•°</code>ã€‚åœ¨ Vue ç”Ÿæ€ä¸­ï¼Œcomposables ä¸€èˆ¬ç¿»è¯‘æˆ â€œç»„åˆå¼å‡½æ•°â€ æˆ– â€œå¯ç»„åˆå‡½æ•°â€, æ„æ€æ˜¯æŠŠä¸€æ®µé€»è¾‘ï¼ˆé€šå¸¸æ˜¯å“åº”å¼çŠ¶æ€ã€è®¡ç®—å±æ€§ã€ä¾¦å¬å™¨ç­‰ï¼‰å°è£…æˆä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥åœ¨å¤šä¸ªç»„ä»¶ä¸­å¤ç”¨, ä¹Ÿå¯ä»¥ç”¨äºè§£è€¦è‡ƒè‚¿çš„ä¸šåŠ¡é€»è¾‘ã€‚</p><p><strong>ä½œç”¨ï¼šé€»è¾‘å¤ç”¨ã€ä»£ç ç»„ç»‡æ›´æ¸…æ™°ï¼Œä¸ä¾èµ–ç»„ä»¶ä¸Šä¸‹æ–‡</strong></p><h2 id="ä¸€ä¸ªç®€å•çš„ç»„åˆå¼å‡½æ•°æ ·ä¾‹"><a href="#ä¸€ä¸ªç®€å•çš„ç»„åˆå¼å‡½æ•°æ ·ä¾‹" class="headerlink" title="ä¸€ä¸ªç®€å•çš„ç»„åˆå¼å‡½æ•°æ ·ä¾‹"></a>ä¸€ä¸ªç®€å•çš„ç»„åˆå¼å‡½æ•°æ ·ä¾‹</h2><h3 id="åˆ›å»º-useGrid-ts-æ–‡ä»¶"><a href="#åˆ›å»º-useGrid-ts-æ–‡ä»¶" class="headerlink" title="åˆ›å»º useGrid.ts æ–‡ä»¶"></a>åˆ›å»º useGrid.ts æ–‡ä»¶</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; computed, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Grid</span> = &#123;<br>    <span class="hljs-attr">columnId</span>: <span class="hljs-built_in">number</span>,<br>    <span class="hljs-attr">rowId</span>: <span class="hljs-built_in">number</span>,<br>    <span class="hljs-attr">resolution</span>: <span class="hljs-built_in">number</span><br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useGrid</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> columnId = ref&lt;<span class="hljs-built_in">number</span>&gt;()<br>    <span class="hljs-keyword">const</span> rowId = ref&lt;<span class="hljs-built_in">number</span>&gt;()<br>    <span class="hljs-keyword">const</span> resolution = ref&lt;<span class="hljs-built_in">number</span>&gt;()<br>    <span class="hljs-keyword">const</span> selectedGrid = ref&lt;<span class="hljs-title class_">Grid</span>&gt;()<br><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getAllGrid</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>        <span class="hljs-comment">// åœ¨è¿™é‡Œå°è£…å…·ä½“çš„å‡½æ•°é€»è¾‘</span><br>        ...<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> &#123;<br>        selectedGrid,<br>        getAllGrid<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="åœ¨ä½ çš„ä»£ç ä¸­åº”ç”¨"><a href="#åœ¨ä½ çš„ä»£ç ä¸­åº”ç”¨" class="headerlink" title="åœ¨ä½ çš„ä»£ç ä¸­åº”ç”¨"></a>åœ¨ä½ çš„ä»£ç ä¸­åº”ç”¨</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        ä¸€ä¸ªç®€å•çš„ç»„åˆå¼å‡½æ•°æ ·ä¾‹ğŸš€<br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>å½“å‰é€‰ä¸­çš„æ ¼ç½‘ï¼š&#123;&#123; selectedGrid &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useGrid &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./useGrid.ts&quot;</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> &#123; selectedGrid, getAllGrid &#125; = <span class="hljs-title function_">useGrid</span>() <span class="hljs-comment">// è®°ä½è¿™ç§å†™æ³•ï¼å¯¹è±¡è§£è€¦</span></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="ç­‰åŒäºï¼š"><a href="#ç­‰åŒäºï¼š" class="headerlink" title="ç­‰åŒäºï¼š"></a>ç­‰åŒäºï¼š</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        ä¸€ä¸ªç®€å•çš„éç»„åˆå¼å‡½æ•°æ ·ä¾‹<br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>å½“å‰é€‰ä¸­çš„æ ¼ç½‘ï¼š&#123;&#123; selectedGrid &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; computed, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">type <span class="hljs-title class_">Grid</span> = &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">columnId</span>: number,</span><br><span class="language-javascript">    <span class="hljs-attr">rowId</span>: number,</span><br><span class="language-javascript">    <span class="hljs-attr">resolution</span>: number</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> columnId = ref&lt;number&gt;()</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> rowId = ref&lt;number&gt;()</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> resolution = ref&lt;number&gt;()</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> selectedGrid = ref&lt;<span class="hljs-title class_">Grid</span>&gt;()</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getAllGrid</span> = (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">    <span class="hljs-comment">// åœ¨è¿™é‡Œå°è£…å…·ä½“çš„å‡½æ•°é€»è¾‘</span></span><br><span class="language-javascript">    ...</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="ç»„åˆå¼å‡½æ•°çš„å¥½å¤„"><a href="#ç»„åˆå¼å‡½æ•°çš„å¥½å¤„" class="headerlink" title="ç»„åˆå¼å‡½æ•°çš„å¥½å¤„"></a>ç»„åˆå¼å‡½æ•°çš„å¥½å¤„</h2><p>å¤§å®¶å¯ä»¥å‘ç°ï¼Œç»„åˆå¼å‡½æ•°èƒ½å¤Ÿå°†ä½ çš„ä¸šåŠ¡é€»è¾‘ä»åŸæœ¬è‡ƒè‚¿çš„ä»£ç ä¸­æŠ½è±¡è§£æ”¾å‡ºæ¥ï¼ä»¥ä¾¿äºé€»è¾‘å¤ç”¨ï¼ŒåŒæ—¶ä»£ç ç»„ç»‡æ›´åŠ æ¸…æ™°ï¼Œä¸ä¾èµ–ç»„ä»¶ä¸Šä¸‹æ–‡</p><h2 id="ç»„åˆå¼å‡½æ•°çš„â€œé™·é˜±â€"><a href="#ç»„åˆå¼å‡½æ•°çš„â€œé™·é˜±â€" class="headerlink" title="ç»„åˆå¼å‡½æ•°çš„â€œé™·é˜±â€"></a>ç»„åˆå¼å‡½æ•°çš„â€œé™·é˜±â€</h2><h3 id="é€‰é¡¹å¼-API-ä½œç”¨åŸŸèŒƒå›´æ··æ·†â€”â€”æ¡ˆä¾‹1"><a href="#é€‰é¡¹å¼-API-ä½œç”¨åŸŸèŒƒå›´æ··æ·†â€”â€”æ¡ˆä¾‹1" class="headerlink" title="é€‰é¡¹å¼ API ä½œç”¨åŸŸèŒƒå›´æ··æ·†â€”â€”æ¡ˆä¾‹1"></a>é€‰é¡¹å¼ API ä½œç”¨åŸŸèŒƒå›´æ··æ·†â€”â€”æ¡ˆä¾‹1</h3><p>å¤§å®¶å¯ä»¥æ€è€ƒä¸€ä¸‹ä»¥ä¸‹ä¸¤ç§å†™æ³•æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</p><ul><li>å†™æ³•1</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// useGrid.ts</span><br><span class="hljs-keyword">import</span> &#123; computed, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useGrid</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-comment">// æŠŠå“åº”å¼å˜é‡å°è£…å…¥ç»„åˆå¼å‡½æ•°å†…éƒ¨</span><br>    <span class="hljs-keyword">const</span> columnId = ref&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">0</span>)<br><br>    <span class="hljs-keyword">return</span> &#123;<br>        columnId<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// test.ts</span><br><span class="hljs-keyword">import</span> &#123; useGrid &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./useGrid.ts&quot;</span><br><span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">columnId</span>: columnIdA &#125; = <span class="hljs-title function_">useGrid</span>() <span class="hljs-comment">// :ç›¸å½“äºä»¥columnIdAçš„å˜é‡åå¼•å…¥columnId</span><br><span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">columnId</span>: columnIdB &#125; = <span class="hljs-title function_">useGrid</span>()<br><br>columnIdA.<span class="hljs-property">value</span> ++<br>columnIdB.<span class="hljs-property">value</span> ++<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(columnIdA.<span class="hljs-property">value</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(columnIdB.<span class="hljs-property">value</span>)<br></code></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">1<br>1<br></code></pre></td></tr></table></figure><ul><li>å†™æ³•2</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// useGrid.ts</span><br><span class="hljs-keyword">import</span> &#123; computed, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span><br><br><span class="hljs-keyword">const</span> columnId = ref&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">0</span>)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useGrid</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>        columId<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// test.ts</span><br><span class="hljs-keyword">import</span> &#123; useGrid &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./useGrid.ts&quot;</span><br><span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">columnId</span>: columnIdA &#125; = <span class="hljs-title function_">useGrid</span>() <span class="hljs-comment">// :ç›¸å½“äºä»¥columnIdAçš„å˜é‡åå¼•å…¥columnId</span><br><span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">columnId</span>: columnIdB &#125; = <span class="hljs-title function_">useGrid</span>()<br><br>columnIdA.<span class="hljs-property">value</span> ++<br>columnIdB.<span class="hljs-property">value</span> ++<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(columnIdA.<span class="hljs-property">value</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(columnIdB.<span class="hljs-property">value</span>)<br></code></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">1<br>2<br></code></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆä¼šé€ æˆè¿™ç§å·®å¼‚å‘¢ï¼Ÿ</p><p>å› ä¸ºå†™æ³•1æŠŠcolumnIdè¿™ä¸ªå“åº”å¼å˜é‡ä½œä¸ºäº†ç»„åˆå‡½æ•°å°è£…çš„ä¸€éƒ¨åˆ†ï¼Œè€Œå†™æ³•2åˆ™æŠŠcolumnIdä½œä¸ºäº†å…¨å±€å˜é‡ã€‚åœ¨å†™æ³•1çš„æƒ…å†µä¸‹ï¼Œåˆ©ç”¨useGridå£°æ˜çš„ä¸¤ä¸ªå“åº”å¼å˜é‡æ˜¯åŒèƒèƒå…„å¼Ÿï¼Œå®ƒä»¬æœ¬è´¨ä¸Šæ˜¯ä¸åŒçš„ä¸ªä½“ï¼è€Œå†™æ³•2è™½ç„¶ä¹Ÿå£°æ˜äº†ä¸¤ä¸ªå“åº”å¼å˜é‡ï¼Œä½†æœ¬è´¨ä¸Šä¸¤ä¸ªå“åº”å¼å˜é‡æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå˜é‡ã€‚</p><p>è¿™ä¸¤ç§åšæ³•å„æœ‰ä»€ä¹ˆå®é™…ç”¨å¤„å‘¢ï¼Ÿ</p><p>å†™æ³•1æ›´é€‚ç”¨äºâ€œé€»è¾‘å¤ç”¨â€ï¼Œåœ¨ä¸åŒçš„åœ°æ–¹å£°æ˜useGridï¼Œä¹Ÿå³åœ¨ä¸åŒçš„ä¸šåŠ¡åœºæ™¯åº”ç”¨ç»„åˆå¼å‡½æ•°ï¼Œä»–ä»¬éœ€è¦çš„æ˜¯ç‹¬ç«‹çš„å“åº”å¼å˜é‡ï¼Œä¸éœ€è¦å…±äº«ç»™å…¶ä»–ç»„ä»¶ã€‚<br>è€Œå†™æ³•2æ›´é€‚ç”¨äºâ€œå…±äº«â€ï¼Œåœ¨ä¸åŒçš„åœ°æ–¹å£°æ˜useGridï¼Œå®ƒä»¬å¯ä»¥æ‹¿åˆ°åŒä¸€ä»½å“åº”å¼å˜é‡ï¼Œéœ€è¦çš„æ˜¯èƒ½åœ¨ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ä¸­å…±äº«ä¸€ä»½æ•°æ®ã€‚</p><h3 id="é€‰é¡¹å¼APIä½œç”¨åŸŸèŒƒå›´æ··æ·†â€”â€”æ¡ˆä¾‹2"><a href="#é€‰é¡¹å¼APIä½œç”¨åŸŸèŒƒå›´æ··æ·†â€”â€”æ¡ˆä¾‹2" class="headerlink" title="é€‰é¡¹å¼APIä½œç”¨åŸŸèŒƒå›´æ··æ·†â€”â€”æ¡ˆä¾‹2"></a>é€‰é¡¹å¼APIä½œç”¨åŸŸèŒƒå›´æ··æ·†â€”â€”æ¡ˆä¾‹2</h3><p>å‰æƒ…æè¦ï¼šuseI18næ˜¯ä¸€ä¸ªåªèƒ½ä½œç”¨äºé€‰é¡¹å¼APIèŒƒå›´å†…çš„ç»„åˆå¼å‡½æ•°</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// useA.ts</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useA</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> &#123; t &#125; = <span class="hljs-title function_">useI18n</span>()<br>    ...<br><br>    <span class="hljs-keyword">return</span> &#123;<br>        ...<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//useB.ts</span><br><span class="hljs-keyword">import</span> &#123; useA &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./useA.ts&#x27;</span><br><span class="hljs-keyword">const</span> &#123; ... &#125; = <span class="hljs-title function_">useA</span>()<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useB</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    ...<br>    <span class="hljs-keyword">return</span> &#123;<br>        ...<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>vueç»„ä»¶æµ‹è¯•</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useB &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./useB.ts&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> &#123; ... &#125; = <span class="hljs-title function_">useB</span>()</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿™æ˜¯å¦ä¸€ç§ä½œç”¨åŸŸæ··æ·†é”™è¯¯ï¼Œå› ä¸ºuseAä¸­useI18nåªèƒ½åœ¨é€‰é¡¹å¼APIå†…å£°æ˜ï¼Œè€ŒuseBä¸­å´åœ¨ç»„åˆå¼å‡½æ•°å¤–éƒ¨å£°æ˜useAï¼Œè¿™æœ¬è´¨ä¸Šè„±ç¦»äº†é€‰é¡¹å¼APIçš„ä½œç”¨åŸŸï¼Œæ•…vueç»„ä»¶å°±ä¼šæŠ¥é”™useI18nå¿…é¡»åœ¨é€‰é¡¹å¼APIå†…éƒ¨å£°æ˜ã€‚</p><h3 id="æ³¨æ„è§„é¿å¾ªç¯ä¾èµ–"><a href="#æ³¨æ„è§„é¿å¾ªç¯ä¾èµ–" class="headerlink" title="æ³¨æ„è§„é¿å¾ªç¯ä¾èµ–"></a>æ³¨æ„è§„é¿å¾ªç¯ä¾èµ–</h3><p>æœ‰çš„æ—¶å€™æˆ‘ä»¬å–œæ¬¢æ··ç”¨å„ä¸ªç»„åˆå¼å‡½æ•°ï¼Œç»„åˆå¼å‡½æ•°ä¹‹é—´å¯èƒ½å­˜åœ¨ç›¸äº’å¼•ç”¨çš„å˜é‡ï¼Œå°±ä¼šé€ æˆå¾ªç¯ä¾èµ–ï¼Œæ•…åœ¨è®¾è®¡æ—¶å°±è¦å°†å„ä¸ªæ¨¡å—è§£è€¦å¼€ï¼Œå¦å¤–æ¨èä¸€ç§ç¬”è€…æ¨èçš„å†™æ³•ï¼Œå¯ä»¥æœ‰æ•ˆé¿å…å¾ªç¯ä¾èµ–ï¼š</p><h3 id="ç¬”è€…æ¨èçš„å†™æ³•"><a href="#ç¬”è€…æ¨èçš„å†™æ³•" class="headerlink" title="ç¬”è€…æ¨èçš„å†™æ³•"></a>ç¬”è€…æ¨èçš„å†™æ³•</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åˆ›å»º shared.ts</span><br><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> commonVar = ref&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">0</span>)<br><br><span class="hljs-comment">// useA.ts</span><br><span class="hljs-keyword">import</span> &#123; commonVar &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./shared.ts&#x27;</span><br>... <span class="hljs-comment">// ä½¿ç”¨commonVar</span><br><span class="hljs-comment">// useB.ts</span><br><span class="hljs-keyword">import</span> &#123; commonVar &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./shared.ts&#x27;</span><br>... <span class="hljs-comment">// ä½¿ç”¨commonVar</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Webå‰ç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Vue</tag>
      
      <tag>ç»„åˆå¼å‡½æ•°</tag>
      
      <tag>é€‰é¡¹å¼API</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2025/08/03/hello-world/"/>
    <url>/2025/08/03/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
